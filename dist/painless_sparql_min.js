var palette,state_buffer_max_length;palette=["b58900","cb4b16","dc322f","d33682","6c71c4","268bd2","2aa198","859900"],state_buffer_max_length=20,function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dragula=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i||t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";var n={},r="(?:^|\\s)",o="(?:\\s|$)";function s(t){var e=n[t];return e?e.lastIndex=0:n[t]=e=new RegExp(r+t+o,"g"),e}e.exports={add:function(t,e){var i=t.className;i.length?s(e).test(i)||(t.className+=" "+e):t.className=e},rm:function(t,e){t.className=t.className.replace(s(e)," ").trim()}}},{}],2:[function(t,e,i){(function(i){"use strict";var n=t("contra/emitter"),r=t("crossvent"),o=t("./classes"),s=document,a=s.documentElement;function l(t,e,n,o){i.navigator.pointerEnabled?r[e](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],o):i.navigator.msPointerEnabled?r[e](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],o):(r[e](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],o),r[e](t,n,o))}function h(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function c(t,e){return void 0!==i[e]?i[e]:a.clientHeight?a[t]:s.body[t]}function d(t,e,i){var n,r=t||{},o=r.className;return r.className+=" gu-hide",n=s.elementFromPoint(e,i),r.className=o,n}function u(){return!1}function g(){return!0}function p(t){return t.width||t.right-t.left}function f(t){return t.height||t.bottom-t.top}function y(t){return t.parentNode===s?null:t.parentNode}function v(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){if(!e)return!1;if("false"===e.contentEditable)return!1;if("true"===e.contentEditable)return!0;return t(y(e))}(t)}function m(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function b(t,e){var i=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),n={pageX:"clientX",pageY:"clientY"};return t in n&&!(t in i)&&n[t]in i&&(t=n[t]),i[t]}e.exports=function(t,e){var i,_,E,x,w,L,T,A,N,R,C;1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var O,M=null,I=e||{};void 0===I.moves&&(I.moves=g),void 0===I.accepts&&(I.accepts=g),void 0===I.invalid&&(I.invalid=function(){return!1}),void 0===I.containers&&(I.containers=t||[]),void 0===I.isContainer&&(I.isContainer=u),void 0===I.copy&&(I.copy=!1),void 0===I.copySortSource&&(I.copySortSource=!1),void 0===I.revertOnSpill&&(I.revertOnSpill=!1),void 0===I.removeOnSpill&&(I.removeOnSpill=!1),void 0===I.direction&&(I.direction="vertical"),void 0===I.ignoreInputTextSelection&&(I.ignoreInputTextSelection=!0),void 0===I.mirrorContainer&&(I.mirrorContainer=s.body);var k=n({containers:I.containers,start:function(t){var e=B(t);e&&Y(e)},end:X,cancel:V,remove:j,destroy:function(){S(!0),W({})},canMove:function(t){return!!B(t)},dragging:!1});return!0===I.removeOnSpill&&k.on("over",function(t){o.rm(t,"gu-hide")}).on("out",function(t){k.dragging&&o.add(t,"gu-hide")}),S(),k;function D(t){return-1!==k.containers.indexOf(t)||I.isContainer(t)}function S(t){var e=t?"remove":"add";l(a,e,"mousedown",H),l(a,e,"mouseup",W)}function P(t){l(a,t?"remove":"add","mousemove",U)}function F(t){var e=t?"remove":"add";r[e](a,"selectstart",G),r[e](a,"click",G)}function G(t){O&&t.preventDefault()}function H(t){if(L=t.clientX,T=t.clientY,1===h(t)&&!t.metaKey&&!t.ctrlKey){var e=t.target,i=B(e);i&&(O=i,P(),"mousedown"===t.type&&(v(e)?e.focus():t.preventDefault()))}}function U(t){if(O)if(0!==h(t)){if(void 0===t.clientX||t.clientX!==L||void 0===t.clientY||t.clientY!==T){if(I.ignoreInputTextSelection){var e=b("clientX",t),n=b("clientY",t);if(v(s.elementFromPoint(e,n)))return}var r=O;P(!0),F(),X(),Y(r);var d,u={left:(d=E.getBoundingClientRect()).left+c("scrollLeft","pageXOffset"),top:d.top+c("scrollTop","pageYOffset")};x=b("pageX",t)-u.left,w=b("pageY",t)-u.top,o.add(R||E,"gu-transit"),function(){if(!i){var t=E.getBoundingClientRect();(i=E.cloneNode(!0)).style.width=p(t)+"px",i.style.height=f(t)+"px",o.rm(i,"gu-transit"),o.add(i,"gu-mirror"),I.mirrorContainer.appendChild(i),l(a,"add","mousemove",K),o.add(I.mirrorContainer,"gu-unselectable"),k.emit("cloned",i,E,"mirror")}}(),K(t)}}else W({})}function B(t){if(!(k.dragging&&i||D(t))){for(var e=t;y(t)&&!1===D(y(t));){if(I.invalid(t,e))return;if(!(t=y(t)))return}var n=y(t);if(n&&!I.invalid(t,e)&&I.moves(t,n,e,m(t)))return{item:t,source:n}}}function Y(t){var e,i;e=t.item,i=t.source,("boolean"==typeof I.copy?I.copy:I.copy(e,i))&&(R=t.item.cloneNode(!0),k.emit("cloned",R,t.item,"copy")),_=t.source,E=t.item,A=N=m(t.item),k.dragging=!0,k.emit("drag",E,_)}function X(){if(k.dragging){var t=R||E;z(t,y(t))}}function q(){O=!1,P(!0),F(!0)}function W(t){if(q(),k.dragging){var e=R||E,n=b("clientX",t),r=b("clientY",t),o=Q(d(i,n,r),n,r);o&&(R&&I.copySortSource||!R||o!==_)?z(e,o):I.removeOnSpill?j():V()}}function z(t,e){var i=y(t);R&&I.copySortSource&&e===_&&i.removeChild(E),J(e)?k.emit("cancel",t,_,_):k.emit("drop",t,e,_,N),Z()}function j(){if(k.dragging){var t=R||E,e=y(t);e&&e.removeChild(t),k.emit(R?"cancel":"remove",t,e,_),Z()}}function V(t){if(k.dragging){var e=arguments.length>0?t:I.revertOnSpill,i=R||E,n=y(i),r=J(n);!1===r&&e&&(R?n&&n.removeChild(R):_.insertBefore(i,A)),r||e?k.emit("cancel",i,_,_):k.emit("drop",i,n,_,N),Z()}}function Z(){var t=R||E;q(),i&&(o.rm(I.mirrorContainer,"gu-unselectable"),l(a,"remove","mousemove",K),y(i).removeChild(i),i=null),t&&o.rm(t,"gu-transit"),C&&clearTimeout(C),k.dragging=!1,M&&k.emit("out",t,M,_),k.emit("dragend",t),_=E=R=A=N=C=M=null}function J(t,e){var n;return n=void 0!==e?e:i?N:m(R||E),t===_&&n===A}function Q(t,e,i){for(var n=t;n&&!r();)n=y(n);return n;function r(){if(!1===D(n))return!1;var r=$(n,t),o=tt(n,r,e,i);return!!J(n,o)||I.accepts(E,n,_,o)}}function K(t){if(i){t.preventDefault();var e=b("clientX",t),n=b("clientY",t),r=e-x,o=n-w;i.style.left=r+"px",i.style.top=o+"px";var s=R||E,a=d(i,e,n),l=Q(a,e,n),h=null!==l&&l!==M;(h||null===l)&&(M&&p("out"),M=l,h&&p("over"));var c=y(s);if(l!==_||!R||I.copySortSource){var u,g=$(l,a);if(null!==g)u=tt(l,g,e,n);else{if(!0!==I.revertOnSpill||R)return void(R&&c&&c.removeChild(s));u=A,l=_}(null===u&&h||u!==s&&u!==m(s))&&(N=u,l.insertBefore(s,u),k.emit("shadow",s,l,_))}else c&&c.removeChild(s)}function p(t){k.emit(t,s,M,_)}}function $(t,e){for(var i=e;i!==t&&y(i)!==t;)i=y(i);return i===a?null:i}function tt(t,e,i,n){var r,o="horizontal"===I.direction;return e!==t?(r=e.getBoundingClientRect(),s(o?i>r.left+p(r)/2:n>r.top+f(r)/2)):function(){var e,r,s,a=t.children.length;for(e=0;e<a;e++){if(r=t.children[e],s=r.getBoundingClientRect(),o&&s.left+s.width/2>i)return r;if(!o&&s.top+s.height/2>n)return r}return null}();function s(t){return t?m(e):e}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(t,e,i){e.exports=function(t,e){return Array.prototype.slice.call(t,e)}},{}],4:[function(t,e,i){"use strict";var n=t("ticky");e.exports=function(t,e,i){t&&n(function(){t.apply(i||null,e||[])})}},{ticky:9}],5:[function(t,e,i){"use strict";var n=t("atoa"),r=t("./debounce");e.exports=function(t,e){var i=e||{},o={};return void 0===t&&(t={}),t.on=function(e,i){return o[e]?o[e].push(i):o[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var n=arguments.length;if(1===n)delete o[e];else if(0===n)o={};else{var r=o[e];if(!r)return t;r.splice(r.indexOf(i),1)}return t},t.emit=function(){var e=n(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var s=(o[e]||[]).slice(0);return function(){var o=n(arguments),a=this||t;if("error"===e&&!1!==i.throws&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(n){i.async?r(n,o,a):n.apply(a,o),n._once&&t.off(e,n)}),t}},t}},{"./debounce":4,atoa:3}],6:[function(t,e,i){(function(i){"use strict";var n=t("custom-event"),r=t("./eventmap"),o=i.document,s=function(t,e,i,n){return t.addEventListener(e,i,n)},a=function(t,e,i,n){return t.removeEventListener(e,i,n)},l=[];function h(t,e,i){var n=function(t,e,i){var n,r;for(n=0;n<l.length;n++)if((r=l[n]).element===t&&r.type===e&&r.fn===i)return n}(t,e,i);if(n){var r=l[n].wrapper;return l.splice(n,1),r}}i.addEventListener||(s=function(t,e,n){return t.attachEvent("on"+e,function(t,e,n){var r=h(t,e,n)||function(t,e,n){return function(e){var r=e||i.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(t,r)}}(t,0,n);return l.push({wrapper:r,element:t,type:e,fn:n}),r}(t,e,n))},a=function(t,e,i){var n=h(t,e,i);if(n)return t.detachEvent("on"+e,n)}),e.exports={add:s,remove:a,fabricate:function(t,e,i){var s=-1===r.indexOf(e)?new n(e,{detail:i}):function(){var t;o.createEvent?(t=o.createEvent("Event")).initEvent(e,!0,!0):o.createEventObject&&(t=o.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(s):t.fireEvent("on"+e,s)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(t,e,i){(function(t){"use strict";var i=[],n="",r=/^on/;for(n in t)r.test(n)&&i.push(n.slice(2));e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,i){(function(t){var i=t.CustomEvent;e.exports=function(){try{var t=new i("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?i:"function"==typeof document.createEvent?function(t,e){var i=document.createEvent("CustomEvent");return e?i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):i.initCustomEvent(t,!1,!1,void 0),i}:function(t,e){var i=document.createEventObject();return i.type=t,e?(i.bubbles=Boolean(e.bubbles),i.cancelable=Boolean(e.cancelable),i.detail=e.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,i){var n;n="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},e.exports=n},{}]},{},[2])(2)}),window.PainlessUtils=class{constructor(){this.a=0}generate_style(){return(new cytoscape.stylesheet).selector("edge").style({"curve-style":"bezier",width:3,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","arrow-scale":1.5,"line-color":"#839496","font-family":"Roboto","font-size":"10","text-outline-color":"#fdf6e3","text-outline-width":"2px",color:"#002b36"}).selector(".source-edge").style({"target-arrow-shape":"square","target-arrow-fill":"hollow","target-arrow-color":"#002b36"}).selector(".target-edge").style({"target-arrow-shape":"square","target-arrow-color":"#002b36"}).selector(".edge-datatype").style({"line-style":"dotted"}).selector(".edge-concept").style({content:"rdf:type"}).selector("node").style({"background-color":"black",shape:"rectangle"}).selector(".node-domain").style({"background-color":"#002b36","border-color":"#002b36","border-style":"solid","border-width":"0.5px",width:15,height:15}).selector(".node-range").style({"background-color":"#fdf6e3","border-color":"#002b36","border-style":"solid","border-width":"2px",width:15,height:15}).selector(".node-datatype").style({shape:"ellipse","background-color":"#93a1a1",content:"data(label)","text-valign":"center","font-family":"Roboto","font-size":"12",width:15,height:15}).selector(".node-role").style({shape:"diamond","background-color":"#fdf6e3","border-style":"solid","border-color":"#002b36",color:"#002b36","border-width":"4px",content:"data(label)","text-valign":"center","font-family":"Roboto","text-outline-color":"#fdf6e3","text-outline-width":"3px",width:90,height:60}).selector(".node-attribute").style({shape:"ellipse","background-color":"#fdf6e3","border-style":"solid","border-color":"#002b36",color:"#002b36","border-width":"4px",content:"data(label)","text-valign":"center","font-family":"Roboto","text-outline-color":"#fdf6e3","text-outline-width":"3px",width:30,height:30}).selector(".node-variable").style({shape:"ellipse","background-color":function(t){return t.data("color")},width:function(t){return 100},height:function(t){return 100},"text-valign":"center","font-size":"30","font-family":"Roboto",color:"#fdf6e3","text-outline-color":function(t){return t.data("color")},"text-outline-width":"5px",content:"data(label)"}).selector(".node-constant-value").style({shape:"ellipse","background-color":function(t){return t.data("color")},width:function(t){return 100},height:function(t){return 100},"text-valign":"center","font-size":"20","font-family":"Roboto",color:"#fdf6e3","text-outline-color":"#fdf6e3","text-outline-width":"0px",content:"data(label)"}).selector(".node-constant-object").style({shape:"ellipse","background-color":function(t){return t.data("color")},width:function(t){return 100},height:function(t){return 100},"text-valign":"center","font-size":"20","font-family":"Roboto",color:"#fdf6e3","text-outline-color":"#fdf6e3","text-outline-width":"0px",content:"data(label)"}).selector(".node-concept").style({shape:"rectangle","background-color":"#073642",content:"data(label)","text-valign":"center",width:function(t){return 10*t.data("label").length+50},height:"80","border-color":"#073642","border-width":"2px","font-family":"Roboto","font-size":"20",color:"#fdf6e3","border-style":"solid"}).selector("node.highlight").style({"border-color":"#333","border-opacity":"0.5","border-width":"20px","border-style":"solid"}).selector("node:selected").style({"border-color":"#daa","border-opacity":"0.5","border-width":"20px","border-style":"solid"})}},function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cytoscapeCoseBilkent=e():t.cytoscapeCoseBilkent=e()}(this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=32)}([function(t,e,i){"use strict";function n(){}n.PROOF_QUALITY=0,n.DEFAULT_QUALITY=1,n.DRAFT_QUALITY=2,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,t.exports=n},function(t,e,i){"use strict";var n=i(0);function r(){}for(var o in n)r[o]=n[o];r.MAX_ITERATIONS=2500,r.DEFAULT_EDGE_LENGTH=50,r.DEFAULT_SPRING_STRENGTH=.45,r.DEFAULT_REPULSION_STRENGTH=4500,r.DEFAULT_GRAVITY_STRENGTH=.4,r.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,r.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,r.DEFAULT_COOLING_FACTOR_INCREMENTAL=.5,r.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,r.MAX_NODE_DISPLACEMENT=3*r.MAX_NODE_DISPLACEMENT_INCREMENTAL,r.MIN_REPULSION_DIST=r.DEFAULT_EDGE_LENGTH/10,r.CONVERGENCE_CHECK_PERIOD=100,r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,r.MIN_EDGE_LENGTH=1,r.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=r},function(t,e,i){"use strict";function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,t.exports=n},function(t,e,i){"use strict";var n=i(10),r=i(7),o=i(8);function s(t,e,i){n.call(this,i),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=i,this.bendpoints=[],this.source=t,this.target=e}for(var a in s.prototype=Object.create(n.prototype),n)s[a]=n[a];s.prototype.getSource=function(){return this.source},s.prototype.getTarget=function(){return this.target},s.prototype.isInterGraph=function(){return this.isInterGraph},s.prototype.getLength=function(){return this.length},s.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},s.prototype.getBendpoints=function(){return this.bendpoints},s.prototype.getLca=function(){return this.lca},s.prototype.getSourceInLca=function(){return this.sourceInLca},s.prototype.getTargetInLca=function(){return this.targetInLca},s.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},s.prototype.getOtherEndInGraph=function(t,e){for(var i=this.getOtherEnd(t),n=e.getGraphManager().getRoot();;){if(i.getOwner()==e)return i;if(i.getOwner()==n)break;i=i.getOwner().getParent()}return null},s.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=r.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},s.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=s},function(t,e,i){"use strict";var n=i(10),r=i(2),o=i(0),s=i(9),a=i(11),l=i(3),h=i(6),c=i(14),d=i(13),u=i(31);function g(t,e,i){n.call(this,i),this.estimatedSize=r.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof s?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}for(var p in g.prototype=Object.create(n.prototype),n)g[p]=n[p];g.prototype.getNodes=function(){return this.nodes},g.prototype.getEdges=function(){return this.edges},g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getParent=function(){return this.parent},g.prototype.getLeft=function(){return this.left},g.prototype.getRight=function(){return this.right},g.prototype.getTop=function(){return this.top},g.prototype.getBottom=function(){return this.bottom},g.prototype.isConnected=function(){return this.isConnected},g.prototype.add=function(t,e,i){if(null==e&&null==i){var n=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(n)>-1)throw"Node already in graph!";return n.owner=this,this.getNodes().push(n),n}var r=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(i)>-1))throw"Source or target not in graph!";if(e.owner!=i.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=i.owner?null:(r.source=e,r.target=i,r.isInterGraph=!1,this.getEdges().push(r),e.edges.push(r),i!=e&&i.edges.push(r),r)},g.prototype.remove=function(t){var e=t;if(t instanceof a){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var i=e.edges.slice(),n=i.length,r=0;r<n;r++)(o=i[r]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(s=this.nodes.indexOf(e)))throw"Node not in owner node list!";this.nodes.splice(s,1)}else if(t instanceof l){var o;if(null==(o=t))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var s,h=o.source.edges.indexOf(o),c=o.target.edges.indexOf(o);if(!(h>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(h,1),o.target!=o.source&&o.target.edges.splice(c,1),-1==(s=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(s,1)}},g.prototype.updateLeftTop=function(){for(var t,e,i,n=r.MAX_VALUE,o=r.MAX_VALUE,s=this.getNodes(),a=s.length,l=0;l<a;l++){var h=s[l];t=h.getTop(),e=h.getLeft(),n>t&&(n=t),o>e&&(o=e)}return n==r.MAX_VALUE?null:(i=void 0!=s[0].getParent().paddingLeft?s[0].getParent().paddingLeft:this.margin,this.left=o-i,this.top=n-i,new d(this.left,this.top))},g.prototype.updateBounds=function(t){for(var e,i,n,o,s,a=r.MAX_VALUE,l=-r.MAX_VALUE,h=r.MAX_VALUE,d=-r.MAX_VALUE,u=this.nodes,g=u.length,p=0;p<g;p++){var f=u[p];t&&null!=f.child&&f.updateBounds(),e=f.getLeft(),i=f.getRight(),n=f.getTop(),o=f.getBottom(),a>e&&(a=e),l<i&&(l=i),h>n&&(h=n),d<o&&(d=o)}var y=new c(a,h,l-a,d-h);a==r.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),s=void 0!=u[0].getParent().paddingLeft?u[0].getParent().paddingLeft:this.margin,this.left=y.x-s,this.right=y.x+y.width+s,this.top=y.y-s,this.bottom=y.y+y.height+s},g.calculateBounds=function(t){for(var e,i,n,o,s=r.MAX_VALUE,a=-r.MAX_VALUE,l=r.MAX_VALUE,h=-r.MAX_VALUE,d=t.length,u=0;u<d;u++){var g=t[u];e=g.getLeft(),i=g.getRight(),n=g.getTop(),o=g.getBottom(),s>e&&(s=e),a<i&&(a=i),l>n&&(l=n),h<o&&(h=o)}return new c(s,l,a-s,h-l)},g.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},g.prototype.getEstimatedSize=function(){if(this.estimatedSize==r.MIN_VALUE)throw"assert failed";return this.estimatedSize},g.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,i=e.length,n=0;n<i;n++){t+=e[n].calcEstimatedSize()}return this.estimatedSize=0==t?o.EMPTY_COMPOUND_NODE_SIZE:t/Math.sqrt(this.nodes.length),this.estimatedSize},g.prototype.updateConnected=function(){var t=this;if(0!=this.nodes.length){var e,i,n=new u,r=new h,o=this.nodes[0];for(o.withChildren().forEach(function(t){n.push(t)});0!==n.length;){o=n.shift(),r.add(o);for(var s=(e=o.getEdges()).length,a=0;a<s;a++){if(null!=(i=e[a].getOtherEndInGraph(o,this))&&!r.contains(i))i.withChildren().forEach(function(t){n.push(t)})}}if(this.isConnected=!1,r.size()>=this.nodes.length){var l=0;s=r.size();Object.keys(r.set).forEach(function(e){r.set[e].owner==t&&l++}),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},t.exports=g},function(t,e,i){"use strict";function n(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(t){this.x=t},n.prototype.setY=function(t){this.y=t},n.prototype.getDifference=function(t){return new DimensionD(this.x-t.x,this.y-t.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},t.exports=n},function(t,e,i){"use strict";var n=i(16);function r(){this.set={}}r.prototype.add=function(t){var e=n.createID(t);this.contains(e)||(this.set[e]=t)},r.prototype.remove=function(t){delete this.set[n.createID(t)]},r.prototype.clear=function(){this.set={}},r.prototype.contains=function(t){return this.set[n.createID(t)]==t},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),i=e.length,n=0;n<i;n++)t.push(this.set[e[n]])},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAll=function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n)}},t.exports=r},function(t,e,i){"use strict";function n(){}n.calcSeparationAmount=function(t,e,i,r){if(!t.intersects(e))throw"assert failed";var o=new Array(2);n.decideDirectionsForOverlappingNodes(t,e,o),i[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),i[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?i[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(i[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?i[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(i[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var s=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()==t.getCenterY()&&e.getCenterX()==t.getCenterX()&&(s=1);var a=s*i[0],l=i[1]/s;i[0]<l?l=i[0]:a=i[1],i[0]=-1*o[0]*(l/2+r),i[1]=-1*o[1]*(a/2+r)},n.decideDirectionsForOverlappingNodes=function(t,e,i){t.getCenterX()<e.getCenterX()?i[0]=-1:i[0]=1,t.getCenterY()<e.getCenterY()?i[1]=-1:i[1]=1},n.getIntersection2=function(t,e,i){var r=t.getCenterX(),o=t.getCenterY(),s=e.getCenterX(),a=e.getCenterY();if(t.intersects(e))return i[0]=r,i[1]=o,i[2]=s,i[3]=a,!0;var l=t.getX(),h=t.getY(),c=t.getRight(),d=t.getX(),u=t.getBottom(),g=t.getRight(),p=t.getWidthHalf(),f=t.getHeightHalf(),y=e.getX(),v=e.getY(),m=e.getRight(),b=e.getX(),_=e.getBottom(),E=e.getRight(),x=e.getWidthHalf(),w=e.getHeightHalf(),L=!1,T=!1;if(r==s){if(o>a)return i[0]=r,i[1]=h,i[2]=s,i[3]=_,!1;if(o<a)return i[0]=r,i[1]=u,i[2]=s,i[3]=v,!1}else if(o==a){if(r>s)return i[0]=l,i[1]=o,i[2]=m,i[3]=a,!1;if(r<s)return i[0]=c,i[1]=o,i[2]=y,i[3]=a,!1}else{var A,N,R,C,O,M,I=t.height/t.width,k=e.height/e.width,D=(a-o)/(s-r);if(-I==D?r>s?(i[0]=d,i[1]=u,L=!0):(i[0]=c,i[1]=h,L=!0):I==D&&(r>s?(i[0]=l,i[1]=h,L=!0):(i[0]=g,i[1]=u,L=!0)),-k==D?s>r?(i[2]=b,i[3]=_,T=!0):(i[2]=m,i[3]=v,T=!0):k==D&&(s>r?(i[2]=y,i[3]=v,T=!0):(i[2]=E,i[3]=_,T=!0)),L&&T)return!1;if(r>s?o>a?(A=n.getCardinalDirection(I,D,4),N=n.getCardinalDirection(k,D,2)):(A=n.getCardinalDirection(-I,D,3),N=n.getCardinalDirection(-k,D,1)):o>a?(A=n.getCardinalDirection(-I,D,1),N=n.getCardinalDirection(-k,D,3)):(A=n.getCardinalDirection(I,D,2),N=n.getCardinalDirection(k,D,4)),!L)switch(A){case 1:C=h,R=r+-f/D,i[0]=R,i[1]=C;break;case 2:R=g,C=o+p*D,i[0]=R,i[1]=C;break;case 3:C=u,R=r+f/D,i[0]=R,i[1]=C;break;case 4:R=d,C=o+-p*D,i[0]=R,i[1]=C}if(!T)switch(N){case 1:M=v,O=s+-w/D,i[2]=O,i[3]=M;break;case 2:O=E,M=a+x*D,i[2]=O,i[3]=M;break;case 3:M=_,O=s+w/D,i[2]=O,i[3]=M;break;case 4:O=b,M=a+-x*D,i[2]=O,i[3]=M}}return!1},n.getCardinalDirection=function(t,e,i){return t>e?i:1+i%4},n.getIntersection=function(t,e,i,r){if(null==r)return n.getIntersection2(t,e,i);var o,s,a,l,h,c,d,u=t.x,g=t.y,p=e.x,f=e.y,y=i.x,v=i.y,m=r.x,b=r.y;return h=p*g-u*f,c=m*v-y*b,0==(d=(o=f-g)*(l=y-m)-(s=b-v)*(a=u-p))?null:new Point((a*c-l*h)/d,(s*h-o*c)/d)},n.HALF_PI=.5*Math.PI,n.ONE_AND_HALF_PI=1.5*Math.PI,n.TWO_PI=2*Math.PI,n.THREE_PI=3*Math.PI,t.exports=n},function(t,e,i){"use strict";function n(){}n.sign=function(t){return t>0?1:t<0?-1:0},n.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},n.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},t.exports=n},function(t,e,i){"use strict";var n,r=i(3);function o(t){n=i(4),this.layout=t,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),i=this.add(t,e);return this.setRootGraph(i),this.rootGraph},o.prototype.add=function(t,e,i,n,r){if(null==i&&null==n&&null==r){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}r=i,i=t;var o=(n=e).getOwner(),s=r.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==s||s.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==s)return i.isInterGraph=!1,o.add(i,n,r);if(i.isInterGraph=!0,i.source=n,i.target=r,this.edges.indexOf(i)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(i),null==i.source||null==i.target)throw"Edge source and/or target is null!";if(-1!=i.source.edges.indexOf(i)||-1!=i.target.edges.indexOf(i))throw"Edge already in source and/or target incidency list!";return i.source.edges.push(i),i.target.edges.push(i),i},o.prototype.remove=function(t){if(t instanceof n){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";for(var i,o=[],s=(o=o.concat(e.getEdges())).length,a=0;a<s;a++)i=o[a],e.remove(i);var l,h=[];s=(h=h.concat(e.getNodes())).length;for(a=0;a<s;a++)l=h[a],e.remove(l);e==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(e);this.graphs.splice(c,1),e.parent=null}else if(t instanceof r){if(null==(i=t))throw"Edge is null!";if(!i.isInterGraph)throw"Not an inter-graph edge!";if(null==i.source||null==i.target)throw"Source and/or target is null!";if(-1==i.source.edges.indexOf(i)||-1==i.target.edges.indexOf(i))throw"Source and/or target doesn't know this edge!";c=i.source.edges.indexOf(i);if(i.source.edges.splice(c,1),c=i.target.edges.indexOf(i),i.target.edges.splice(c,1),null==i.source.owner||null==i.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==i.source.owner.getGraphManager().edges.indexOf(i))throw"Not in owner graph manager's edge list!";c=i.source.owner.getGraphManager().edges.indexOf(i);i.source.owner.getGraphManager().edges.splice(c,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),i=e.length,n=0;n<i;n++)t=t.concat(e[n].getNodes());this.allNodes=t}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){for(var t=[],e=this.getGraphs(),i=(e.length,0);i<e.length;i++)t=t.concat(e[i].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var i,n=t.getOwner();;){if(null==(i=n.getParent()))break;if(i==e)return!0;if(null==(n=i.getOwner()))break}for(n=e.getOwner();;){if(null==(i=n.getParent()))break;if(i==t)return!0;if(null==(n=i.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var t,e,i,n,r,o=this.getAllEdges(),s=o.length,a=0;a<s;a++)if(e=(t=o[a]).source,i=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=i,e!=i){for(n=e.getOwner();null==t.lca;){for(t.targetInLca=i,r=i.getOwner();null==t.lca;){if(r==n){t.lca=r;break}if(r==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=r.getParent(),r=t.targetInLca.getOwner()}if(n==this.rootGraph)break;null==t.lca&&(t.sourceInLca=n.getParent(),n=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},o.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var i=t.getOwner();;){if(null==i)break;for(var n=e.getOwner();;){if(null==n)break;if(n==i)return n;n=n.getParent().getOwner()}i=i.getParent().getOwner()}return i},o.prototype.calcInclusionTreeDepths=function(t,e){var i;null==t&&null==e&&(t=this.rootGraph,e=1);for(var n=t.getNodes(),r=n.length,o=0;o<r;o++)(i=n[o]).inclusionTreeDepth=e,null!=i.child&&this.calcInclusionTreeDepths(i.child,e+1)},o.prototype.includesInvalidEdge=function(){for(var t,e=this.edges.length,i=0;i<e;i++)if(t=this.edges[i],this.isOneAncestorOfOther(t.source,t.target))return!0;return!1},t.exports=o},function(t,e,i){"use strict";t.exports=function(t){this.vGraphObject=t}},function(t,e,i){"use strict";var n=i(10),r=i(2),o=i(14),s=i(0),a=i(26),l=i(5),h=i(6);function c(t,e,i,s){null==i&&null==s&&(s=e),n.call(this,s),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=r.MIN_VALUE,this.inclusionTreeDepth=r.MAX_VALUE,this.vGraphObject=s,this.edges=[],this.graphManager=t,this.rect=null!=i&&null!=e?new o(e.x,e.y,i.width,i.height):new o}for(var d in c.prototype=Object.create(n.prototype),n)c[d]=n[d];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(t){this.rect.width=t},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(t){this.rect.height=t},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},c.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},c.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},c.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},c.prototype.getEdgeListToNode=function(t){var e=[],i=this;return i.edges.forEach(function(n){if(n.target==t){if(n.source!=i)throw"Incorrect edge source!";e.push(n)}}),e},c.prototype.getEdgesBetween=function(t){var e=[],i=this;return i.edges.forEach(function(n){if(n.source!=i&&n.target!=i)throw"Incorrect edge source and/or target";n.target!=t&&n.source!=t||e.push(n)}),e},c.prototype.getNeighborsList=function(){var t=new h,e=this;return e.edges.forEach(function(i){if(i.source==e)t.add(i.target);else{if(i.target!=e)throw"Incorrect incidency!";t.add(i.source)}}),t},c.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var e=this.child.getNodes(),i=0;i<e.length;i++)e[i].withChildren().forEach(function(e){t.add(e)});return t},c.prototype.getNoOfChildren=function(){var t=0;if(null==this.child)t=1;else for(var e=this.child.getNodes(),i=0;i<e.length;i++)t+=e[i].getNoOfChildren();return 0==t&&(t=1),t},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==r.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var t,e,i=-s.INITIAL_WORLD_BOUNDARY,n=s.INITIAL_WORLD_BOUNDARY;t=s.WORLD_CENTER_X+a.nextDouble()*(n-i)+i;var r=-s.INITIAL_WORLD_BOUNDARY,o=s.INITIAL_WORLD_BOUNDARY;e=s.WORLD_CENTER_Y+a.nextDouble()*(o-r)+r,this.rect.x=t,this.rect.y=e},c.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),s.NODE_DIMENSIONS_INCLUDE_LABELS){var e=t.getRight()-t.getLeft(),i=t.getBottom()-t.getTop();this.labelWidth>e&&(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)),this.labelHeight>i&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-i)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-i),this.setHeight(this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==r.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(t){var e=this.rect.x;e>s.WORLD_BOUNDARY?e=s.WORLD_BOUNDARY:e<-s.WORLD_BOUNDARY&&(e=-s.WORLD_BOUNDARY);var i=this.rect.y;i>s.WORLD_BOUNDARY?i=s.WORLD_BOUNDARY:i<-s.WORLD_BOUNDARY&&(i=-s.WORLD_BOUNDARY);var n=new l(e,i),r=t.inverseTransformPoint(n);this.setLocation(r.x,r.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},t.exports=c},function(t,e,i){"use strict";var n=i(0),r=i(25),o=i(9),s=i(11),a=i(3),l=i(4),h=i(5),c=i(15),d=i(30),u=i(6);function g(t){d.call(this),this.layoutQuality=n.DEFAULT_QUALITY,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=n.DEFAULT_INCREMENTAL,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new r,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}g.RANDOM_SEED=1,g.prototype=Object.create(d.prototype),g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},g.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},g.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},g.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},g.prototype.newGraph=function(t){return new l(null,this.graphManager,t)},g.prototype.newNode=function(t){return new s(this.graphManager,t)},g.prototype.newEdge=function(t){return new a(null,null,t)},g.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},g.prototype.runLayout=function(){var t;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),t=!this.checkLayoutSuccess()&&this.layout(),"during"!==n.ANIMATE&&(t&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,t)},g.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},g.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t=this.graphManager.getAllEdges(),e=0;e<t.length;e++)t[e];var i=this.graphManager.getRoot().getNodes();for(e=0;e<i.length;e++)i[e];this.update(this.graphManager.getRoot())}},g.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof s){var e=t;if(null!=e.getChild())for(var i=e.getChild().getNodes(),n=0;n<i.length;n++)update(i[n]);if(null!=e.vGraphObject)e.vGraphObject.update(e)}else if(t instanceof a){var r=t;if(null!=r.vGraphObject)r.vGraphObject.update(r)}else if(t instanceof l){var o=t;if(null!=o.vGraphObject)o.vGraphObject.update(o)}},g.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=n.DEFAULT_QUALITY,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=n.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},g.prototype.transform=function(t){if(void 0==t)this.transform(new h(0,0));else{var e=new c,i=this.graphManager.getRoot().updateLeftTop();if(null!=i){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(i.x),e.setDeviceOrgY(i.y);for(var n=this.getAllNodes(),r=0;r<n.length;r++)n[r].transform(e)}}},g.prototype.positionNodesRandomly=function(t){if(void 0==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,i,n=t.getNodes(),r=0;r<n.length;r++)null==(i=(e=n[r]).getChild())?e.scatter():0==i.getNodes().length?e.scatter():(this.positionNodesRandomly(i),e.updateBounds())},g.prototype.getFlatForest=function(){for(var t=[],e=!0,i=this.graphManager.getRoot().getNodes(),n=!0,o=0;o<i.length;o++)null!=i[o].getChild()&&(n=!1);if(!n)return t;var s=new u,a=[],l=new r,h=[];for(h=h.concat(i);h.length>0&&e;){for(a.push(h[0]);a.length>0&&e;){var c=a[0];a.splice(0,1),s.add(c);var d=c.getEdges();for(o=0;o<d.length;o++){var g=d[o].getOtherEnd(c);if(l.get(c)!=g){if(s.contains(g)){e=!1;break}a.push(g),l.put(g,c)}}}if(e){var p=[];s.addAllTo(p),t.push(p);for(o=0;o<p.length;o++){var f=p[o],y=h.indexOf(f);y>-1&&h.splice(y,1)}s=new u,l=new r}else t=[]}return t},g.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],i=t.source,n=this.graphManager.calcLowestCommonAncestor(t.source,t.target),r=0;r<t.bendpoints.length;r++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),n.add(o);var s=this.newEdge(null);this.graphManager.add(s,i,o),e.add(o),i=o}s=this.newEdge(null);return this.graphManager.add(s,i,t.target),this.edgeToDummyNodes.put(t,e),t.isInterGraph()?this.graphManager.remove(t):n.remove(t),e},g.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=this.edgeToDummyNodes.keySet().concat(t);for(var e=0;e<t.length;e++){var i=t[e];if(i.bendpoints.length>0){for(var n=this.edgeToDummyNodes.get(i),r=0;r<n.length;r++){var o=n[r],s=new h(o.getCenterX(),o.getCenterY()),a=i.bendpoints.get(r);a.x=s.x,a.y=s.y,o.getOwner().remove(o)}this.graphManager.add(i,i.source,i.target)}}},g.transform=function(t,e,i,n){if(void 0!=i&&void 0!=n){var r=e;if(t<=50)r-=(e-e/i)/50*(50-t);else r+=(e*n-e)/50*(t-50);return r}var o,s;return t<=50?(o=9*e/500,s=e/10):(o=9*e/50,s=-8*e),o*t+s},g.findCenterOfTree=function(t){var e=[];e=e.concat(t);var i=[],n=new r,o=!1,s=null;1!=e.length&&2!=e.length||(o=!0,s=e[0]);for(var a=0;a<e.length;a++){var l=(d=e[a]).getNeighborsList().size();n.put(d,d.getNeighborsList().size()),1==l&&i.push(d)}var h=[];for(h=h.concat(i);!o;){var c=[];c=c.concat(h),h=[];for(a=0;a<e.length;a++){var d=e[a],u=e.indexOf(d);u>=0&&e.splice(u,1);var g=d.getNeighborsList();Object.keys(g.set).forEach(function(t){var e=g.set[t];if(i.indexOf(e)<0){var r=n.get(e)-1;1==r&&h.push(e),n.put(e,r)}})}i=i.concat(h),1!=e.length&&2!=e.length||(o=!0,s=e[0])}return s},g.prototype.setGraphManager=function(t){this.graphManager=t},t.exports=g},function(t,e,i){"use strict";function n(t,e,i){this.x=null,this.y=null,null==t&&null==e&&null==i?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==i?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==i&&(i=t,this.x=i.x,this.y=i.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(t,e,i){"Point"==t.constructor.name&&null==e&&null==i?(i=t,this.setLocation(i.x,i.y)):"number"==typeof t&&"number"==typeof e&&null==i&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},n.prototype.move=function(t,e){this.x=t,this.y=e},n.prototype.translate=function(t,e){this.x+=t,this.y+=e},n.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=i&&null!=n&&(this.x=t,this.y=e,this.width=i,this.height=n)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(t){this.x=t},n.prototype.getY=function(){return this.y},n.prototype.setY=function(t){this.y=t},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(t){this.width=t},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(t){this.height=t},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(t){return!(this.getRight()<t.x)&&(!(this.getBottom()<t.y)&&(!(t.getRight()<this.x)&&!(t.getBottom()<this.y)))},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},t.exports=n},function(t,e,i){"use strict";var n=i(5);function r(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}r.prototype.getWorldOrgX=function(){return this.lworldOrgX},r.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},r.prototype.getWorldOrgY=function(){return this.lworldOrgY},r.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},r.prototype.getWorldExtX=function(){return this.lworldExtX},r.prototype.setWorldExtX=function(t){this.lworldExtX=t},r.prototype.getWorldExtY=function(){return this.lworldExtY},r.prototype.setWorldExtY=function(t){this.lworldExtY=t},r.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},r.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},r.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},r.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},r.prototype.getDeviceExtX=function(){return this.ldeviceExtX},r.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},r.prototype.getDeviceExtY=function(){return this.ldeviceExtY},r.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},r.prototype.transformX=function(t){var e=0,i=this.lworldExtX;return 0!=i&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/i),e},r.prototype.transformY=function(t){var e=0,i=this.lworldExtY;return 0!=i&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/i),e},r.prototype.inverseTransformX=function(t){var e=0,i=this.ldeviceExtX;return 0!=i&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/i),e},r.prototype.inverseTransformY=function(t){var e=0,i=this.ldeviceExtY;return 0!=i&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/i),e},r.prototype.inverseTransformPoint=function(t){return new n(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},t.exports=r},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(){}r.lastID=0,r.createID=function(t){return r.isPrimitive(t)?t:null!=t.uniqueID?t.uniqueID:(t.uniqueID=r.getString(),r.lastID++,t.uniqueID)},r.getString=function(t){return null==t&&(t=r.lastID),"Object#"+t},r.isPrimitive=function(t){var e=void 0===t?"undefined":n(t);return null==t||"object"!=e&&"function"!=e},t.exports=r},function(t,e,i){"use strict";var n=i(1);function r(){}for(var o in n)r[o]=n[o];r.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,r.DEFAULT_RADIAL_SEPARATION=n.DEFAULT_EDGE_LENGTH,r.DEFAULT_COMPONENT_SEPERATION=60,r.TILE=!0,r.TILING_PADDING_VERTICAL=10,r.TILING_PADDING_HORIZONTAL=10,t.exports=r},function(t,e,i){"use strict";var n=i(23);function r(t,e,i){n.call(this,t,e,i)}for(var o in r.prototype=Object.create(n.prototype),n)r[o]=n[o];t.exports=r},function(t,e,i){"use strict";var n=i(4);function r(t,e,i){n.call(this,t,e,i)}for(var o in r.prototype=Object.create(n.prototype),n)r[o]=n[o];t.exports=r},function(t,e,i){"use strict";var n=i(9);function r(t){n.call(this,t)}for(var o in r.prototype=Object.create(n.prototype),n)r[o]=n[o];t.exports=r},function(t,e,i){"use strict";var n=i(24),r=i(8);function o(t,e,i,r){n.call(this,t,e,i,r)}for(var s in o.prototype=Object.create(n.prototype),n)o[s]=n[s];o.prototype.move=function(){var t=this.graphManager.getLayout();this.displacementX=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*r.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*r.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(t,e){for(var i,n=this.getChild().getNodes(),r=0;r<n.length;r++)null==(i=n[r]).getChild()?(i.moveBy(t,e),i.displacementX+=t,i.displacementY+=e):i.propogateDisplacementToChildren(t,e)},o.prototype.setPred1=function(t){this.pred1=t},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(t){this.next=t},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(t){this.processed=t},o.prototype.isProcessed=function(){return processed},t.exports=o},function(t,e,i){"use strict";var n=i(12),r=i(1),o=i(0),s=i(7),a=i(8),l=i(2);function h(){n.call(this),this.useSmartIdealEdgeLengthCalculation=r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=r.DEFAULT_EDGE_LENGTH,this.springConstant=r.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=r.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=r.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=r.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=r.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*r.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=r.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=r.MAX_ITERATIONS}for(var c in h.prototype=Object.create(n.prototype),n)h[c]=n[c];h.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.layoutQuality==o.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==o.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[],this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1},h.prototype.calcIdealEdgeLengths=function(){for(var t,e,i,n,s,a,l=this.getGraphManager().getAllEdges(),h=0;h<l.length;h++)(t=l[h]).idealLength=this.idealEdgeLength,t.isInterGraph&&(i=t.getSource(),n=t.getTarget(),s=t.getSourceInLca().getEstimatedSize(),a=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=s+a-2*o.SIMPLE_NODE_SIZE),e=t.getLca().getInclusionTreeDepth(),t.idealLength+=r.DEFAULT_EDGE_LENGTH*r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(i.getInclusionTreeDepth()+n.getInclusionTreeDepth()-2*e))},h.prototype.initSpringEmbedder=function(){this.incremental?this.maxNodeDisplacement=r.MAX_NODE_DISPLACEMENT_INCREMENTAL:(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=r.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),i=0;i<e.length;i++)t=e[i],this.calcSpringForce(t,t.idealLength)},h.prototype.calcRepulsionForces=function(){var t,e,i,n,o,s=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%r.GRID_CALCULATION_CHECK_PERIOD!=1||this.isTreeGrowing||this.isGrowthFinished||this.updateGrid(),o=new Set,t=0;t<s.length;t++)i=s[t],this.calculateRepulsionForceOfANode(i,o),o.add(i);else for(t=0;t<s.length;t++)for(i=s[t],e=t+1;e<s.length;e++)n=s[e],i.getOwner()==n.getOwner()&&this.calcRepulsionForce(i,n)},h.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),i=0;i<e.length;i++)t=e[i],this.calcGravitationalForce(t)},h.prototype.moveNodes=function(){for(var t=this.getAllNodes(),e=0;e<t.length;e++)t[e].move()},h.prototype.calcSpringForce=function(t,e){var i,n,r,o,s=t.getSource(),a=t.getTarget();if(this.uniformLeafNodeSizes&&null==s.getChild()&&null==a.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;i=t.getLength(),r=(n=this.springConstant*(i-e))*(t.lengthX/i),o=n*(t.lengthY/i),s.springForceX+=r,s.springForceY+=o,a.springForceX-=r,a.springForceY-=o},h.prototype.calcRepulsionForce=function(t,e){var i,n,o,l,h,c,d,u=t.getRect(),g=e.getRect(),p=new Array(2),f=new Array(4);if(u.intersects(g)){s.calcSeparationAmount(u,g,p,r.DEFAULT_EDGE_LENGTH/2),c=2*p[0],d=2*p[1];var y=t.noOfChildren*e.noOfChildren/(t.noOfChildren+e.noOfChildren);t.repulsionForceX-=y*c,t.repulsionForceY-=y*d,e.repulsionForceX+=y*c,e.repulsionForceY+=y*d}else this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(i=g.getCenterX()-u.getCenterX(),n=g.getCenterY()-u.getCenterY()):(s.getIntersection(u,g,f),i=f[2]-f[0],n=f[3]-f[1]),Math.abs(i)<r.MIN_REPULSION_DIST&&(i=a.sign(i)*r.MIN_REPULSION_DIST),Math.abs(n)<r.MIN_REPULSION_DIST&&(n=a.sign(n)*r.MIN_REPULSION_DIST),o=i*i+n*n,l=Math.sqrt(o),c=(h=this.repulsionConstant*t.noOfChildren*e.noOfChildren/o)*i/l,d=h*n/l,t.repulsionForceX-=c,t.repulsionForceY-=d,e.repulsionForceX+=c,e.repulsionForceY+=d},h.prototype.calcGravitationalForce=function(t){var e,i,n,r,o,s,a,l;i=((e=t.getOwner()).getRight()+e.getLeft())/2,n=(e.getTop()+e.getBottom())/2,r=t.getCenterX()-i,o=t.getCenterY()-n,s=Math.abs(r)+t.getWidth()/2,a=Math.abs(o)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(s>(l=e.getEstimatedSize()*this.gravityRangeFactor)||a>l)&&(t.gravitationForceX=-this.gravityConstant*r,t.gravitationForceY=-this.gravityConstant*o):(s>(l=e.getEstimatedSize()*this.compoundGravityRangeFactor)||a>l)&&(t.gravitationForceX=-this.gravityConstant*r*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},h.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcGrid=function(t){var e,i;e=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),i=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(i);for(r=0;r<e;r++)for(var o=0;o<i;o++)n[r][o]=new Array;return n},h.prototype.addNodeToGrid=function(t,e,i){var n,r,o,s;n=parseInt(Math.floor((t.getRect().x-e)/this.repulsionRange)),r=parseInt(Math.floor((t.getRect().width+t.getRect().x-e)/this.repulsionRange)),o=parseInt(Math.floor((t.getRect().y-i)/this.repulsionRange)),s=parseInt(Math.floor((t.getRect().height+t.getRect().y-i)/this.repulsionRange));for(var a=n;a<=r;a++)for(var l=o;l<=s;l++)this.grid[a][l].push(t),t.setGridCoordinates(n,r,o,s)},h.prototype.updateGrid=function(){var t,e,i=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<i.length;t++)e=i[t],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(t,e){if(this.totalIterations%r.GRID_CALCULATION_CHECK_PERIOD==1&&!this.isTreeGrowing&&!this.isGrowthFinished||this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished){var i,n=new Set;t.surrounding=new Array;for(var o=this.grid,s=t.startX-1;s<t.finishX+2;s++)for(var a=t.startY-1;a<t.finishY+2;a++)if(!(s<0||a<0||s>=o.length||a>=o[0].length))for(var l=0;l<o[s][a].length;l++)if(i=o[s][a][l],t.getOwner()==i.getOwner()&&t!=i&&!e.has(i)&&!n.has(i)){var h=Math.abs(t.getCenterX()-i.getCenterX())-(t.getWidth()/2+i.getWidth()/2),c=Math.abs(t.getCenterY()-i.getCenterY())-(t.getHeight()/2+i.getHeight()/2);h<=this.repulsionRange&&c<=this.repulsionRange&&n.add(i)}t.surrounding=[].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(n))}for(s=0;s<t.surrounding.length;s++)this.calcRepulsionForce(t,t.surrounding[s])},h.prototype.calcRepulsionRange=function(){return 0},h.prototype.reduceTrees=function(){for(var t,e=[],i=!0;i;){var n=this.graphManager.getAllNodes(),r=[];i=!1;for(var o=0;o<n.length;o++)1!=(t=n[o]).getEdges().length||t.getEdges()[0].isInterGraph||null!=t.getChild()||(r.push([t,t.getEdges()[0],t.getOwner()]),i=!0);if(1==i){for(var s=[],a=0;a<r.length;a++)1==r[a][0].getEdges().length&&(s.push(r[a]),r[a][0].getOwner().remove(r[a][0]));e.push(s),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=e},h.prototype.growTree=function(t){for(var e,i=t[t.length-1],n=0;n<i.length;n++)e=i[n],this.findPlaceforPrunedNode(e),e[2].add(e[0]),e[2].add(e[1],e[1].source,e[1].target);t.splice(t.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},h.prototype.findPlaceforPrunedNode=function(t){var e,i,n=t[0],o=(i=n==t[1].source?t[1].target:t[1].source).startX,s=i.finishX,a=i.startY,h=i.finishY,c=[0,0,0,0];if(a>0)for(var d=o;d<=s;d++)c[0]+=this.grid[d][a-1].length+this.grid[d][a].length-1;if(s<this.grid.length-1)for(d=a;d<=h;d++)c[1]+=this.grid[s+1][d].length+this.grid[s][d].length-1;if(h<this.grid[0].length-1)for(d=o;d<=s;d++)c[2]+=this.grid[d][h+1].length+this.grid[d][h].length-1;if(o>0)for(d=a;d<=h;d++)c[3]+=this.grid[o-1][d].length+this.grid[o][d].length-1;for(var u,g,p=l.MAX_VALUE,f=0;f<c.length;f++)c[f]<p?(p=c[f],u=1,g=f):c[f]==p&&u++;if(3==u&&0==p)0==c[0]&&0==c[1]&&0==c[2]?e=1:0==c[0]&&0==c[1]&&0==c[3]?e=0:0==c[0]&&0==c[2]&&0==c[3]?e=3:0==c[1]&&0==c[2]&&0==c[3]&&(e=2);else if(2==u&&0==p){var y=Math.floor(2*Math.random());e=0==c[0]&&0==c[1]?0==y?0:1:0==c[0]&&0==c[2]?0==y?0:2:0==c[0]&&0==c[3]?0==y?0:3:0==c[1]&&0==c[2]?0==y?1:2:0==c[1]&&0==c[3]?0==y?1:3:0==y?2:3}else if(4==u&&0==p){e=y=Math.floor(4*Math.random())}else e=g;0==e?n.setCenter(i.getCenterX(),i.getCenterY()-i.getHeight()/2-r.DEFAULT_EDGE_LENGTH-n.getHeight()/2):1==e?n.setCenter(i.getCenterX()+i.getWidth()/2+r.DEFAULT_EDGE_LENGTH+n.getWidth()/2,i.getCenterY()):2==e?n.setCenter(i.getCenterX(),i.getCenterY()+i.getHeight()/2+r.DEFAULT_EDGE_LENGTH+n.getHeight()/2):n.setCenter(i.getCenterX()-i.getWidth()/2-r.DEFAULT_EDGE_LENGTH-n.getWidth()/2,i.getCenterY())},t.exports=h},function(t,e,i){"use strict";var n=i(3),r=i(1);function o(t,e,i){n.call(this,t,e,i),this.idealLength=r.DEFAULT_EDGE_LENGTH}for(var s in o.prototype=Object.create(n.prototype),n)o[s]=n[s];t.exports=o},function(t,e,i){"use strict";var n=i(11);function r(t,e,i,r){n.call(this,t,e,i,r),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in r.prototype=Object.create(n.prototype),n)r[o]=n[o];r.prototype.setGridCoordinates=function(t,e,i,n){this.startX=t,this.finishX=e,this.startY=i,this.finishY=n},t.exports=r},function(t,e,i){"use strict";var n=i(16);function r(){this.map={},this.keys=[]}r.prototype.put=function(t,e){var i=n.createID(t);this.contains(i)||(this.map[i]=e,this.keys.push(t))},r.prototype.contains=function(t){n.createID(t);return null!=this.map[t]},r.prototype.get=function(t){var e=n.createID(t);return this.map[e]},r.prototype.keySet=function(){return this.keys},t.exports=r},function(t,e,i){"use strict";function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return n.x=1e4*Math.sin(n.seed++),n.x-Math.floor(n.x)},t.exports=n},function(t,e,i){"use strict";var n=i(29),r=(i(25),i(6),i(7),i(8),i(2),i(13),i(5)),o=(i(26),i(14),i(15),i(16),i(10),i(4),i(3),i(9),i(11),i(12),i(0)),s=(i(22),i(1)),a=(i(23),i(24),i(17)),l=(i(18),i(19),i(20),i(28)),h=i(21),c={ready:function(){},stop:function(){},nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function d(t){this.options=function(t,e){var i={};for(var n in t)i[n]=t[n];for(var n in e)i[n]=e[n];return i}(c,t),u(this.options)}var u=function(t){null!=t.nodeRepulsion&&(a.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(a.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(a.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(a.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(a.MAX_ITERATIONS=s.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(a.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),null!=t.initialEnergyOnIncremental&&(a.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental),a.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels,a.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!t.randomize,a.ANIMATE=s.ANIMATE=o.ANIMATE=t.animate,a.TILE=t.tile,a.TILING_PADDING_VERTICAL="function"==typeof t.tilingPaddingVertical?t.tilingPaddingVertical.call():t.tilingPaddingVertical,a.TILING_PADDING_HORIZONTAL="function"==typeof t.tilingPaddingHorizontal?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal};d.prototype.run=function(){var t,e,i=this.options,n=(this.idToLNode={},this.layout=new l),r=this;r.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var o=n.newGraphManager();this.gm=o;var s=this.options.eles.nodes(),a=this.options.eles.edges();this.root=o.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(s),n);for(var h=0;h<a.length;h++){var c=a[h],d=this.idToLNode[c.data("source")],u=this.idToLNode[c.data("target")];if(0==d.getEdgesBetween(u).length)o.add(n.newEdge(),d,u).id=c.id()}var g=function(t,e){"number"==typeof t&&(t=e);var i=t.data("id"),n=r.idToLNode[i];return{x:n.getRect().getCenterX(),y:n.getRect().getCenterY()}},p=function o(){for(var s,a=function(){i.fit&&i.cy.fit(i.eles.nodes(),i.padding),t||(t=!0,r.cy.one("layoutready",i.ready),r.cy.trigger({type:"layoutready",layout:r}))},l=r.options.refresh,h=0;h<l&&!s;h++)s=r.stopped||r.layout.tick();if(s)return n.checkLayoutSuccess()&&!n.isSubLayout&&n.doPostLayout(),n.tilingPostLayout&&n.tilingPostLayout(),n.isLayoutFinished=!0,r.options.eles.nodes().positions(g),a(),r.cy.one("layoutstop",r.options.stop),r.cy.trigger({type:"layoutstop",layout:r}),e&&cancelAnimationFrame(e),void(t=!1);var c=r.layout.getPositionsData();i.eles.nodes().positions(function(t,e){"number"==typeof t&&(t=e);for(var i=t.id(),n=c[i],r=t;null==n&&(n=c[r.data("parent")]||c["DummyCompound_"+r.data("parent")],c[i]=n,void 0!=(r=r.parent()[0])););return null!=n?{x:n.x,y:n.y}:{x:t.x,y:t.y}}),a(),e=requestAnimationFrame(o)};return n.addListener("layoutstarted",function(){"during"===r.options.animate&&(e=requestAnimationFrame(p))}),n.runLayout(),"during"!==this.options.animate&&(r.options.eles.nodes().not(":parent").layoutPositions(r,r.options,g),t=!1),this},d.prototype.getTopMostNodes=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].id()]=!0;return t.filter(function(t,i){"number"==typeof t&&(t=i);for(var n=t.parent()[0];null!=n;){if(e[n.id()])return!1;n=n.parent()[0]}return!0})},d.prototype.processChildrenList=function(t,e,i){for(var o=e.length,s=0;s<o;s++){var a,l,c=e[s],d=c.children(),u=c.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((a=null!=c.outerWidth()&&null!=c.outerHeight()?t.add(new h(i.graphManager,new r(c.position("x")-u.w/2,c.position("y")-u.h/2),new n(parseFloat(u.w),parseFloat(u.h)))):t.add(new h(this.graphManager))).id=c.data("id"),a.paddingLeft=parseInt(c.css("padding")),a.paddingTop=parseInt(c.css("padding")),a.paddingRight=parseInt(c.css("padding")),a.paddingBottom=parseInt(c.css("padding")),this.options.nodeDimensionsIncludeLabels&&c.isParent()){var g=c.boundingBox({includeLabels:!0,includeNodes:!1}).w,p=c.boundingBox({includeLabels:!0,includeNodes:!1}).h,f=c.css("text-halign");a.labelWidth=g,a.labelHeight=p,a.labelPos=f}if(this.idToLNode[c.data("id")]=a,isNaN(a.rect.x)&&(a.rect.x=0),isNaN(a.rect.y)&&(a.rect.y=0),null!=d&&d.length>0)l=i.getGraphManager().add(i.newGraph(),a),this.processChildrenList(l,d,i)}},d.prototype.stop=function(){return this.stopped=!0,this},t.exports=function(t){return d}},function(t,e,i){"use strict";var n=i(22),r=i(20),o=i(19),s=i(21),a=i(18),l=i(17),h=i(1),c=i(0),d=i(13),u=i(5),g=i(12),p=i(2),f=i(7),y=i(4),v=i(15);function m(){n.call(this),this.toBeTiled={}}for(var b in m.prototype=Object.create(n.prototype),n)m[b]=n[b];m.prototype.newGraphManager=function(){var t=new r(this);return this.graphManager=t,t},m.prototype.newGraph=function(t){return new o(null,this.graphManager,t)},m.prototype.newNode=function(t){return new s(this.graphManager,t)},m.prototype.newEdge=function(t){return new a(null,null,t)},m.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR)},m.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},m.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var t=this.getFlatForest();if(t.length>0)this.positionNodesRadially(t);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),i=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(i),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},m.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),e=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(e),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},m.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},i=0;i<t.length;i++){var n=t[i].rect,r=t[i].id;e[r]={id:r,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return e},m.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===h.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},m.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,i=[],n=this.graphManager.getGraphs(),r=n.length;for(e=0;e<r;e++)(t=n[e]).updateConnected(),t.isConnected||(i=i.concat(t.getNodes()));return i},m.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,e=this.graphManager.getAllNodes(),i=0;i<e.length;i++)(t=e[i]).noOfChildren=t.getNoOfChildren()},m.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,i=new HashSet;for(e=0;e<t.length;e++){var n=t[e];if(!i.contains(n)){var r=n.getSource(),o=n.getTarget();if(r==o)n.getBendpoints().push(new u),n.getBendpoints().push(new u),this.createDummyNodesForBendpoints(n),i.add(n);else{var s=[];if(s=(s=s.concat(r.getEdgeListToNode(o))).concat(o.getEdgeListToNode(r)),!i.contains(s[0])){var a;if(s.length>1)for(a=0;a<s.length;a++){var l=s[a];l.getBendpoints().push(new u),this.createDummyNodesForBendpoints(l)}i.addAll(list)}}}if(i.size()==t.length)break}},m.prototype.positionNodesRadially=function(t){for(var e=new d(0,0),i=Math.ceil(Math.sqrt(t.length)),n=0,r=0,o=0,s=new u(0,0),a=0;a<t.length;a++){a%i==0&&(o=0,r=n,0!=a&&(r+=l.DEFAULT_COMPONENT_SEPERATION),n=0);var h=t[a],p=g.findCenterOfTree(h);e.x=o,e.y=r,(s=m.radialLayout(h,p,e)).y>n&&(n=Math.floor(s.y)),o=Math.floor(s.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new u(c.WORLD_CENTER_X-s.x/2,c.WORLD_CENTER_Y-s.y/2))},m.radialLayout=function(t,e,i){var n=Math.max(this.maxDiagonalInTree(t),l.DEFAULT_RADIAL_SEPARATION);m.branchRadialLayout(e,null,0,359,0,n);var r=y.calculateBounds(t),o=new v;o.setDeviceOrgX(r.getMinX()),o.setDeviceOrgY(r.getMinY()),o.setWorldOrgX(i.x),o.setWorldOrgY(i.y);for(var s=0;s<t.length;s++){t[s].transform(o)}var a=new u(r.getMaxX(),r.getMaxY());return o.inverseTransformPoint(a)},m.branchRadialLayout=function(t,e,i,n,r,o){var s=(n-i+1)/2;s<0&&(s+=180);var a=(s+i)%360*f.TWO_PI/360,l=(Math.cos(a),r*Math.cos(a)),h=r*Math.sin(a);t.setCenter(l,h);var c=[],d=(c=c.concat(t.getEdges())).length;null!=e&&d--;for(var u,g=0,p=c.length,y=t.getEdgesBetween(e);y.length>1;){var v=y[0];y.splice(0,1);var b=c.indexOf(v);b>=0&&c.splice(b,1),p--,d--}u=null!=e?(c.indexOf(y[0])+1)%p:0;for(var _=Math.abs(n-i)/d,E=u;g!=d;E=++E%p){var x=c[E].getOtherEnd(t);if(x!=e){var w=(i+g*_)%360,L=(w+_)%360;m.branchRadialLayout(x,t,w,L,r+o,o),g++}}},m.maxDiagonalInTree=function(t){for(var e=p.MIN_VALUE,i=0;i<t.length;i++){var n=t[i].getDiagonal();n>e&&(e=n)}return e},m.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},m.prototype.groupZeroDegreeMembers=function(){var t=this,e={};this.memberGroups={},this.idToDummyNode={};for(var i=[],n=this.graphManager.getAllNodes(),r=0;r<n.length;r++){var o=(a=n[r]).getParent();0!==this.getNodeDegreeWithChildren(a)||void 0!=o.id&&this.getToBeTiled(o)||i.push(a)}for(r=0;r<i.length;r++){var a,l=(a=i[r]).getParent().id;void 0===e[l]&&(e[l]=[]),e[l]=e[l].concat(a)}Object.keys(e).forEach(function(i){if(e[i].length>1){var n="DummyCompound_"+i;t.memberGroups[n]=e[i];var r=e[i][0].getParent(),o=new s(t.graphManager);o.id=n,o.paddingLeft=r.paddingLeft||0,o.paddingRight=r.paddingRight||0,o.paddingBottom=r.paddingBottom||0,o.paddingTop=r.paddingTop||0,t.idToDummyNode[n]=o;var a=t.getGraphManager().add(t.newGraph(),o),l=r.getChild();l.add(o);for(var h=0;h<e[i].length;h++){var c=e[i][h];l.remove(c),a.add(c)}}})},m.prototype.clearCompounds=function(){var t={},e={};this.performDFSOnCompounds();for(var i=0;i<this.compoundOrder.length;i++)e[this.compoundOrder[i].id]=this.compoundOrder[i],t[this.compoundOrder[i].id]=[].concat(this.compoundOrder[i].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[i].getChild()),this.compoundOrder[i].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(t,e)},m.prototype.clearZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(i){var n=t.idToDummyNode[i];e[i]=t.tileNodes(t.memberGroups[i],n.paddingLeft+n.paddingRight),n.rect.width=e[i].width,n.rect.height=e[i].height})},m.prototype.repopulateCompounds=function(){for(var t=this.compoundOrder.length-1;t>=0;t--){var e=this.compoundOrder[t],i=e.id,n=e.paddingLeft,r=e.paddingTop;this.adjustLocations(this.tiledMemberPack[i],e.rect.x,e.rect.y,n,r)}},m.prototype.repopulateZeroDegreeMembers=function(){var t=this,e=this.tiledZeroDegreePack;Object.keys(e).forEach(function(i){var n=t.idToDummyNode[i],r=n.paddingLeft,o=n.paddingTop;t.adjustLocations(e[i],n.rect.x,n.rect.y,r,o)})},m.prototype.getToBeTiled=function(t){var e=t.id;if(null!=this.toBeTiled[e])return this.toBeTiled[e];var i=t.getChild();if(null==i)return this.toBeTiled[e]=!1,!1;for(var n=i.getNodes(),r=0;r<n.length;r++){var o=n[r];if(this.getNodeDegree(o)>0)return this.toBeTiled[e]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[e]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[e]=!0,!0},m.prototype.getNodeDegree=function(t){t.id;for(var e=t.getEdges(),i=0,n=0;n<e.length;n++){var r=e[n];r.getSource().id!==r.getTarget().id&&(i+=1)}return i},m.prototype.getNodeDegreeWithChildren=function(t){var e=this.getNodeDegree(t);if(null==t.getChild())return e;for(var i=t.getChild().getNodes(),n=0;n<i.length;n++){var r=i[n];e+=this.getNodeDegreeWithChildren(r)}return e},m.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},m.prototype.fillCompexOrderByDFS=function(t){for(var e=0;e<t.length;e++){var i=t[e];null!=i.getChild()&&this.fillCompexOrderByDFS(i.getChild().getNodes()),this.getToBeTiled(i)&&this.compoundOrder.push(i)}},m.prototype.adjustLocations=function(t,e,i,n,r){i+=r;for(var o=e+=n,s=0;s<t.rows.length;s++){var a=t.rows[s];e=o;for(var l=0,h=0;h<a.length;h++){var c=a[h];c.rect.x=e,c.rect.y=i,e+=c.rect.width+t.horizontalPadding,c.rect.height>l&&(l=c.rect.height)}i+=l+t.verticalPadding}},m.prototype.tileCompoundMembers=function(t,e){var i=this;this.tiledMemberPack=[],Object.keys(t).forEach(function(n){var r=e[n];i.tiledMemberPack[n]=i.tileNodes(t[n],r.paddingLeft+r.paddingRight),r.rect.width=i.tiledMemberPack[n].width+20,r.rect.height=i.tiledMemberPack[n].height+20})},m.prototype.tileNodes=function(t,e){var i={rows:[],rowWidth:[],rowHeight:[],width:20,height:20,verticalPadding:l.TILING_PADDING_VERTICAL,horizontalPadding:l.TILING_PADDING_HORIZONTAL};t.sort(function(t,e){return t.rect.width*t.rect.height>e.rect.width*e.rect.height?-1:t.rect.width*t.rect.height<e.rect.width*e.rect.height?1:0});for(var n=0;n<t.length;n++){var r=t[n];0==i.rows.length?this.insertNodeToRow(i,r,0,e):this.canAddHorizontal(i,r.rect.width,r.rect.height)?this.insertNodeToRow(i,r,this.getShortestRowIndex(i),e):this.insertNodeToRow(i,r,i.rows.length,e),this.shiftToLastRow(i)}return i},m.prototype.insertNodeToRow=function(t,e,i,n){var r=n;if(i==t.rows.length){t.rows.push([]),t.rowWidth.push(r),t.rowHeight.push(0)}var o=t.rowWidth[i]+e.rect.width;t.rows[i].length>0&&(o+=t.horizontalPadding),t.rowWidth[i]=o,t.width<o&&(t.width=o);var s=e.rect.height;i>0&&(s+=t.verticalPadding);var a=0;s>t.rowHeight[i]&&(a=t.rowHeight[i],t.rowHeight[i]=s,a=t.rowHeight[i]-a),t.height+=a,t.rows[i].push(e)},m.prototype.getShortestRowIndex=function(t){for(var e=-1,i=Number.MAX_VALUE,n=0;n<t.rows.length;n++)t.rowWidth[n]<i&&(e=n,i=t.rowWidth[n]);return e},m.prototype.getLongestRowIndex=function(t){for(var e=-1,i=Number.MIN_VALUE,n=0;n<t.rows.length;n++)t.rowWidth[n]>i&&(e=n,i=t.rowWidth[n]);return e},m.prototype.canAddHorizontal=function(t,e,i){var n=this.getShortestRowIndex(t);if(n<0)return!0;var r=t.rowWidth[n];if(r+t.horizontalPadding+e<=t.width)return!0;var o,s,a=0;return t.rowHeight[n]<i&&n>0&&(a=i+t.verticalPadding-t.rowHeight[n]),o=t.width-r>=e+t.horizontalPadding?(t.height+a)/(r+e+t.horizontalPadding):(t.height+a)/t.width,a=i+t.verticalPadding,(s=t.width<e?(t.height+a)/e:(t.height+a)/t.width)<1&&(s=1/s),o<1&&(o=1/o),o<s},m.prototype.shiftToLastRow=function(t){var e=this.getLongestRowIndex(t),i=t.rowWidth.length-1,n=t.rows[e],r=n[n.length-1],o=r.width+t.horizontalPadding;if(t.width-t.rowWidth[i]>o&&e!=i){n.splice(-1,1),t.rows[i].push(r),t.rowWidth[e]=t.rowWidth[e]-o,t.rowWidth[i]=t.rowWidth[i]+o,t.width=t.rowWidth[instance.getLongestRowIndex(t)];for(var s=Number.MIN_VALUE,a=0;a<n.length;a++)n[a].height>s&&(s=n[a].height);e>0&&(s+=t.verticalPadding);var l=t.rowHeight[e]+t.rowHeight[i];t.rowHeight[e]=s,t.rowHeight[i]<r.height+t.verticalPadding&&(t.rowHeight[i]=r.height+t.verticalPadding);var h=t.rowHeight[e]+t.rowHeight[i];t.height+=h-l,this.shiftToLastRow(t)}},m.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},m.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},t.exports=m},function(t,e,i){"use strict";function n(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(t){this.width=t},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(t){this.height=t},t.exports=n},function(t,e,i){"use strict";function n(){this.listeners=[]}var r=n.prototype;r.addListener=function(t,e){this.listeners.push({event:t,callback:e})},r.removeListener=function(t,e){for(var i=this.listeners.length;i>=0;i--){var n=this.listeners[i];n.event===t&&n.callback===e&&this.listeners.splice(i,1)}},r.emit=function(t,e){for(var i=0;i<this.listeners.length;i++){var n=this.listeners[i];t===n.event&&n.callback(e)}},t.exports=n},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(t){return{value:t,next:null,prev:null}},o=function(t,e,i,n){return null!==t?t.next=e:n.head=e,null!==i?i.prev=e:n.tail=e,e.prev=t,e.next=i,n.length++,e},s=function(t,e){var i=t.prev,n=t.next;return null!==i?i.next=n:e.head=n,null!==n?n.prev=i:e.tail=i,t.prev=t.next=null,e.length--,t},a=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=0,this.head=null,this.tail=null,null!=e&&e.forEach(function(t){return i.push(t)})}return n(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,e){return o(e.prev,r(t),e,this)}},{key:"insertAfter",value:function(t,e){return o(e,r(t),e.next,this)}},{key:"insertNodeBefore",value:function(t,e){return o(e.prev,t,e,this)}},{key:"insertNodeAfter",value:function(t,e){return o(e,t,e.next,this)}},{key:"push",value:function(t){return o(this.tail,r(t),null,this)}},{key:"unshift",value:function(t){return o(null,r(t),this.head,this)}},{key:"remove",value:function(t){return s(t,this)}},{key:"pop",value:function(){return s(this.tail,this).value}},{key:"popNode",value:function(){return s(this.tail,this)}},{key:"shift",value:function(){return s(this.head,this).value}},{key:"shiftNode",value:function(){return s(this.head,this)}}]),t}();t.exports=a},function(t,e,i){"use strict";var n=i(27),r=function(t){t("layout","cose-bilkent",n(t))};"undefined"!=typeof cytoscape&&r(cytoscape),t.exports=r}])}),window.PainlessContextMenu=class{constructor(t,e){this.init=this.init.bind(this),this.rename_const=this.rename_const.bind(this),this.rename_var=this.rename_var.bind(this),this.context=e,this.cy=t,this.init()}init(){var t,e,i,n,r,o;return o={selector:".node-variable-full-options",commands:[{content:"delete node",select:t=>{var e,i,n,r,o,s,a;for(a=[],e=0,n=(s=t.data("links")).length;e<n;e++)null!==(o=s[e])&&void 0!==o&&a.push(o);for(i=0,r=a.length;i<r;i++)(o=a[i]).delete();return this.cy.remove(t)}},{content:"center view",select:t=>this.context.center_view(t)},{content:"add node to select statement",select:t=>this.context.add_to_select(t.id())},{content:"rename node",select:t=>this.rename_var(t)},{content:"filter",select:t=>this.context.sparql_text.add_filter(t.id())}]},r={selector:".node-role",commands:[{content:"reverse",select:t=>(console.log(t.data("links")),t.data("links")[0].reverse())},{content:"delete",select:t=>t.data("links")[0].delete()}]},n={selector:".node-attribute",commands:[{content:"delete",select:t=>t.data("links")[0].delete()}]},t={selector:".attr-range",commands:[{content:"delete",select:t=>t.data("links")[0].delete()},{content:"transform into constant [object]",select:t=>(t.data("color",tinycolor(t.data("color")).desaturate(50).toString()),t.data("label","const[o]"),t.classes("node-constant-object"))},{content:"transform into constant [value]",select:t=>(t.data("color",tinycolor(t.data("color")).desaturate(50).toString()),t.data("label","const[v]"),t.classes("node-constant-value"))}]},e={selector:".node-concept",commands:[{content:"delete",select:t=>t.data("links")[0].delete()}]},i={selector:".node-constant-value",commands:[{content:"define value",select:t=>this.rename_const(t)},{content:"delete",select:t=>t.data("links")[0].delete()}]},{selector:".node-constant-object",commands:[{content:"define value",select:t=>this.rename_const(t)},{content:"delete",select:t=>t.data("links")[0].delete()}]},this.cy.cxtmenu(o),this.cy.cxtmenu(r),this.cy.cxtmenu(n),this.cy.cxtmenu(e),this.cy.cxtmenu(i),this.cy.cxtmenu(t)}rename_const(t){var e,i,n,r,o;return o=t.data("label"),t.data("label",""),e=document.createElement(i),(i=document.createElement("div")).innerHTML=t.data("label").slice(1),i.style.display="inline-block",r=(s=>{if(s.target!==i)return""===i.innerHTML&&(i.innerHTML=o),t.data("label",i.innerHTML),e.parentNode.removeChild(e),document.removeEventListener("click",r),document.removeEventListener("keypress",n)}),n=(s=>{if("Enter"===s.key)return""===i.innerHTML&&(i.innerHTML=o),t.data("label",i.innerHTML),e.parentNode.removeChild(e),document.removeEventListener("click",r),document.removeEventListener("keypress",n)}),document.addEventListener("click",r),document.addEventListener("keypress",n),i.setAttribute("contenteditable",!0),e.appendChild(i),e.style.position="absolute",e.id="rename_div",e.style.top=document.getElementById("query_canvas").getBoundingClientRect().y+t.renderedPosition("y")-t.renderedWidth()/4+"px",e.style.left=document.getElementById("query_canvas").getBoundingClientRect().x+t.renderedPosition("x")-t.renderedWidth()/4+"px",e.style.backgroundColor=t.data("color"),e.style.fontSize="xx-large",e.style.color="#fdf6e3",e.style.borderRadius="100px",e.style.fontFamily="Courier New",e.style.padding="2px",e.style.textAlign="center",document.body.appendChild(e),i.focus()}rename_var(t){var e,i,n,r,o,s;return o=t.data("label").slice(1),t.data("label",""),e=document.createElement(i),(s=document.createElement("div")).innerHTML="?",s.style.display="inline-block",e.appendChild(s),(i=document.createElement("div")).innerHTML=t.data("label").slice(1),i.style.display="inline-block",r=(s=>{if(s.target!==i)return""===i.innerHTML&&(i.innerHTML=o),t.data("label","?"+i.innerHTML),e.parentNode.removeChild(e),document.removeEventListener("click",r),document.removeEventListener("keypress",n)}),n=(s=>{if("Enter"===s.key)return""===i.innerHTML&&(i.innerHTML=o),t.data("label","?"+i.innerHTML),e.parentNode.removeChild(e),document.removeEventListener("click",r),document.removeEventListener("keypress",n)}),document.addEventListener("click",r),document.addEventListener("keypress",n),i.setAttribute("contenteditable",!0),e.appendChild(i),e.style.position="absolute",e.id="rename_div",e.style.top=document.getElementById("query_canvas").getBoundingClientRect().y+t.renderedPosition("y")-t.renderedWidth()/4+"px",e.style.left=document.getElementById("query_canvas").getBoundingClientRect().x+t.renderedPosition("x")-t.renderedWidth()/4+"px",e.style.backgroundColor=t.data("color"),e.style.fontSize="xx-large",e.style.color="#fdf6e3",e.style.borderRadius="100px",e.style.fontFamily="Courier New",e.style.padding="2px",e.style.textAlign="center",document.body.appendChild(e),i.focus()}},function(t,e){"object"==typeof exports?module.exports=e(window,document):t.SimpleScrollbar=e(window,document)}(this,function(t,e){var i=t.requestAnimationFrame||t.setImmediate||function(t){return setTimeout(t,0)};function n(t){Object.prototype.hasOwnProperty.call(t,"data-simple-scrollbar")||Object.defineProperty(t,"data-simple-scrollbar",{value:new s(t)})}function r(n){for(this.target=n,this.direction=t.getComputedStyle(this.target).direction,this.bar='<div class="ss-scroll">',this.wrapper=e.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=e.createElement("div"),this.el.setAttribute("class","ss-content"),"rtl"===this.direction&&this.el.classList.add("rtl"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,function(t,n){var r;function o(t){var e=t.pageY-r;r=t.pageY,i(function(){n.el.scrollTop+=e/n.scrollRatio})}function s(){t.classList.remove("ss-grabbed"),e.body.classList.remove("ss-grabbed"),e.removeEventListener("mousemove",o),e.removeEventListener("mouseup",s)}t.addEventListener("mousedown",function(i){return r=i.pageY,t.classList.add("ss-grabbed"),e.body.classList.add("ss-grabbed"),e.addEventListener("mousemove",o),e.addEventListener("mouseup",s),!1})}(this.bar,this),this.moveBar(),t.addEventListener("resize",this.moveBar.bind(this)),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var r=t.getComputedStyle(n);"0px"===r.height&&"0px"!==r["max-height"]&&(n.style.height=r["max-height"])}function o(){for(var t=e.querySelectorAll("*[ss-container]"),i=0;i<t.length;i++)n(t[i])}r.prototype={moveBar:function(t){var e=this.el.scrollHeight,n=this.el.clientHeight,r=this;this.scrollRatio=n/e;var o="rtl"===r.direction?r.target.clientWidth-r.bar.clientWidth+18:-1*(r.target.clientWidth-r.bar.clientWidth);i(function(){r.scrollRatio>=1?r.bar.classList.add("ss-hidden"):(r.bar.classList.remove("ss-hidden"),r.bar.style.cssText="height:"+Math.max(100*r.scrollRatio,10)+"%; top:"+r.el.scrollTop/e*100+"%;right:"+o+"px;")})}},e.addEventListener("DOMContentLoaded",o),r.initEl=n,r.initAll=o;var s=r;return s}),window.PainlessGraph=function(){var t,e;return e=null,t=[],class{constructor(e){this.reshape=this.reshape.bind(this),this.download=this.download.bind(this),this.center_view=this.center_view.bind(this),this.add_to_select=this.add_to_select.bind(this),this.reverse_relationship=this.reverse_relationship.bind(this),this.add_link=this.add_link.bind(this),this.check_collisions=this.check_collisions.bind(this),this.init=this.init.bind(this),this.utils=new window.PainlessUtils,this.context=e,this.links=t,this.layout_names=["cola","cose-bilkent","circle","cose","grid","breadthfirst","concentric"],this.layout_index=0,this.init(),this.reshape(),this.sparql_text=new SparqlText(this.cy,t),this.sparql_text.update(),new window.PainlessContextMenu(this.cy,this)}reshape(){return this.layout=this.layout_names[this.layout_index%this.layout_names.length],this.cy.layout({name:this.layout,fit:!1,animate:!0,nodeDimensionsIncludeLabels:!0,edgeLength:200}).run()}download(){var t,e,i,n;return e=JSON.stringify(this.cy.json()),i=new Blob([e],{type:"text/plain"}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(i,"sparql.json"):(t=document.createElement("a"),n=URL.createObjectURL(i),t.href=n,t.download="sparql.json",document.body.appendChild(t),t.click(),setTimeout(()=>(document.body.removeChild(t),window.URL.revokeObjectURL(n)),0))}center_view(t=null){return null===t?this.cy.nodes(":selected").length>0?this.cy.center(this.cy.nodes(":selected")):this.cy.fit():this.cy.center(t)}add_to_select(t){return this.sparql_text.add_to_select(t)}copy_to_clipboard(){return this.sparql_text.copy_to_clipboard()}save_state(){if(null===e&&(e=[]),this.cy.json()!==e[e.length-1]&&e.push(this.cy.json()),e.length>=state_buffer_max_length)return e.shift()}undo(){return null===e||e.length<1?console.warn("no saved states"):(this.cy.json(e[e.length-1]),this.cy.style(this.utils.generate_style()),e.pop(),this.reshape())}reverse_relationship(){var t;return null===(t=this.cy.nodes(":selected"))?console.warn("please select a node in the sparql graph"):t.hasClass("node-variable")?console.warn("please select a role and not a variable"):"attribute"===t.data("links").link_type?console.warn("attributes cannot be reversed"):t.hasClass("node-role")||t.hasClass("node-domain")||t.hasClass("node-range")?this.cy.nodes(":selected").data("links").reverse():console.warn("this action cannot be performed on the selected node")}merge(e,i){var n,r,o,s;for(this.save_state(),n=0,r=(s=i.data("links")).length;n<r;n++)"concept"===(o=s[n]).link_type?t.push(new PainlessLink(this,this.cy,o.link_name,o.link_type,e)):o.node_var1===i&&o.node_var2===i?t.push(new PainlessLink(this,this.cy,o.link_name,o.link_type,e,e)):o.node_var1===i?t.push(new PainlessLink(this,this.cy,o.link_name,o.link_type,e,o.node_var2)):t.push(new PainlessLink(this,this.cy,o.link_name,o.link_type,o.node_var1,e)),o.delete();return this.cy.remove(i)}add_link(e,i,n){var r;return this.save_state(),"concept"===i?this.cy.nodes(":selected").length>0&&this.cy.nodes(":selected").hasClass("node-variable")?r=new PainlessLink(this,this.cy,e,i,this.cy.nodes(":selected")):(r=new PainlessLink(this,this.cy,e,i),this.sparql_text.add_to_select(r.node_var1.id())):this.cy.nodes(":selected").length>0&&this.cy.nodes(":selected").hasClass("node-variable")?(r=new PainlessLink(this,this.cy,e,i,this.cy.nodes(":selected"),null,n),this.sparql_text.add_to_select(r.node_var2.id())):(r=new PainlessLink(this,this.cy,e,i,null,null,n),this.sparql_text.add_to_select(r.node_var1.id()),this.sparql_text.add_to_select(r.node_var2.id())),t.push(r),this.sparql_text.update(),this.reshape()}compute_distance(t,e){var i,n;return i=Math.abs(t.position("x")-e.position("x")),n=Math.abs(t.position("y")-e.position("y")),Math.sqrt(i*i+n*n)}check_collisions(){var t,e,i,n,r,o,s,a;for(t=0,i=(s=this.cy.nodes(".node-variable")).length;t<i;t++)for(r=s[t],e=0,n=(a=this.cy.nodes(".node-variable")).length;e<n;e++)if(r!==(o=a[e])){if(this.compute_distance(r,o)<100)return r.addClass("highlight"),o.addClass("highlight"),[r,o];r.removeClass("highlight")}}init(){return this.cy=new cytoscape({container:document.getElementById("query_canvas"),style:this.utils.generate_style(),wheelSensitivity:.5}),this.cy.on("click",".node-variable",t=>(t.target.select(),this.reshape())),this.cy.on("mouseup",t=>{var e;return void 0!==this.check_collisions()&&(e=this.check_collisions(),this.merge(e[0],e[1])),this.reshape()}),this.cy.resize()}}}.call(this),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cytoscapeCxtmenu=e():t.cytoscapeCxtmenu=e()}(this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";var n=i(2),r=i(1),o=i(3),s=o.removeEles,a=o.setStyles,l=o.createElement,h=o.getPixelRatio,c=o.getOffset;t.exports=function(t){var e=r({},n,t),i=this,o=i.container(),d=void 0,u={options:e,handlers:[],container:l({class:"cxtmenu"})},g=u.container,p=l(),f=l({tag:"canvas"}),y=[],v=f.getContext("2d"),m=e.menuRadius,b=2*(m+e.activePadding),_=void 0,E=void 0;function x(t){T.drawBg=[t]}function w(){var t=h(),e=o.clientWidth,i=o.clientHeight;f.width=e*t,f.height=i*t,f.style.width=e+"px",f.style.height=i+"px",v.setTransform(1,0,0,1,0,0),v.scale(t,t)}o.insertBefore(g,o.firstChild),g.appendChild(p),p.appendChild(f),a(g,{position:"absolute",zIndex:e.zIndex,userSelect:"none"}),a(p,{display:"none",width:b+"px",height:b+"px",position:"absolute",zIndex:1,marginLeft:-e.activePadding+"px",marginTop:-e.activePadding+"px",userSelect:"none"}),f.width=b,f.height=b;var L=!0,T={},A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;w(),function t(){T.drawBg&&function(t){t=void 0!==t?t:F,v.globalCompositeOperation="source-over",v.clearRect(0,0,b,b),v.fillStyle=e.fillColor;for(var i=2*Math.PI/y.length,n=Math.PI/2,r=n+i,o=0;o<y.length;o++){var s=y[o];s.fillColor&&(v.fillStyle=s.fillColor),v.beginPath(),v.moveTo(m+e.activePadding,m+e.activePadding),v.arc(m+e.activePadding,m+e.activePadding,m,2*Math.PI-n,2*Math.PI-r,!0),v.closePath(),v.fill(),n+=i,r+=i,v.fillStyle=e.fillColor}v.globalCompositeOperation="destination-out",v.strokeStyle="white",v.lineWidth=e.separatorWidth,r=(n=Math.PI/2)+i;for(var a=0;a<y.length;a++){var l=m*Math.cos(n),h=m*Math.sin(n);v.beginPath(),v.moveTo(m+e.activePadding,m+e.activePadding),v.lineTo(m+e.activePadding+l,m+e.activePadding-h),v.closePath(),v.stroke(),n+=i,r+=i}v.fillStyle="white",v.globalCompositeOperation="destination-out",v.beginPath(),v.arc(m+e.activePadding,m+e.activePadding,t+e.spotlightPadding,0,2*Math.PI,!0),v.closePath(),v.fill(),v.globalCompositeOperation="source-over"}.apply(null,T.drawBg),T.drawCommands&&function(t,i,n){var r=2*Math.PI/y.length,o=Math.PI/2,s=o+r;o+=r*_,s+=r*_,v.fillStyle=e.activeFillColor,v.strokeStyle="black",v.lineWidth=1,v.beginPath(),v.moveTo(m+e.activePadding,m+e.activePadding),v.arc(m+e.activePadding,m+e.activePadding,m+e.activePadding,2*Math.PI-o,2*Math.PI-s,!0),v.closePath(),v.fill(),v.fillStyle="white",v.globalCompositeOperation="destination-out";var a=m+e.activePadding+t/m*(F+e.spotlightPadding-e.indicatorSize/4),l=m+e.activePadding+i/m*(F+e.spotlightPadding-e.indicatorSize/4),h=Math.PI/4-n;v.translate(a,l),v.rotate(h),v.beginPath(),v.fillRect(-e.indicatorSize/2,-e.indicatorSize/2,e.indicatorSize,e.indicatorSize),v.closePath(),v.fill(),v.rotate(-h),v.translate(-a,-l),v.beginPath(),v.arc(m+e.activePadding,m+e.activePadding,F+e.spotlightPadding,0,2*Math.PI,!0),v.closePath(),v.fill(),v.globalCompositeOperation="source-over"}.apply(null,T.drawCommands),T={},L&&A(t)}();var N,R,C,O,M,I,k,D,S=void 0,P=void 0,F=void 0,G={on:function(t,e,n){var r=n;return"core"===e&&(r=function(t){if(t.cyTarget===i||t.target===i)return n.apply(this,[t])}),u.handlers.push({events:t,selector:e,fn:r}),"core"===e?i.on(t,r):i.on(t,e,r),this}};function H(){L=!1,function(){for(var t=u.handlers,e=0;e<t.length;e++){var n=t[e];"core"===n.selector?i.off(n.events,n.fn):i.off(n.events,n.selector,n.fn)}window.removeEventListener("resize",w)}(),g.remove()}return N=void 0,R=!1,C=void 0,O=void 0,M=void 0,I=void 0,k=void 0,D=function(){N&&d.grabify(),O&&i.userZoomingEnabled(!0),M&&i.userPanningEnabled(!0),I&&i.boxSelectionEnabled(!0)},window.addEventListener("resize",w),G.on("resize",function(){w()}).on(e.openMenuEvents,e.selector,function(t){d=this;var n=this===i;if(R&&(p.style.display="none",R=!1,D()),(y="function"==typeof e.commands?e.commands(d):e.commands)&&0!==y.length){O=i.userZoomingEnabled(),i.userZoomingEnabled(!1),M=i.userPanningEnabled(),i.userPanningEnabled(!1),I=i.boxSelectionEnabled(),i.boxSelectionEnabled(!1),(N=d.grabbable&&d.grabbable())&&d.ungrabify();var r=void 0,h=void 0,u=void 0;n||!this.isNode()||this.isParent()||e.atMouse?(r=t.renderedPosition||t.cyRenderedPosition,h=1,u=1):(r=this.renderedPosition(),h=this.renderedWidth(),u=this.renderedHeight()),E=c(o),S=r.x,P=r.y,function(){s(".cxtmenu-item",p);for(var t=2*Math.PI/y.length,i=Math.PI/2,n=i+t,r=0;r<y.length;r++){var o=y[r],h=(i+n)/2,c=.66*m*Math.cos(h),d=.66*m*Math.sin(h),u=l({class:"cxtmenu-item"});a(u,{color:e.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+e.itemTextShadowColor+", 1px -1px 2px "+e.itemTextShadowColor+", -1px 1px 2px "+e.itemTextShadowColor+", 1px 1px 1px "+e.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*m+"px",width:.66*m+"px",height:.66*m+"px",marginLeft:c-.33*m+"px",marginTop:-d-.33*m+"px"});var g=l({class:"cxtmenu-content"});o.content instanceof HTMLElement?g.appendChild(o.content):g.innerHTML=o.content,a(g,{width:.66*m+"px",height:.66*m+"px","vertical-align":"middle",display:"table-cell"}),a(g,o.contentStyle||{}),!0!==o.disabled&&!1!==o.enabled||g.classList.add("cxtmenu-disabled"),p.appendChild(u),u.appendChild(g),i+=t,n+=t}}(),a(p,{display:"block",left:r.x-m+"px",top:r.y-m+"px"}),F=Math.max(h,u)/2,F=Math.max(F,e.minSpotlightRadius),F=Math.min(F,e.maxSpotlightRadius),x(),_=void 0,R=!0,k=t}}).on("cxtdrag tapdrag",e.selector,C=function(t){if(R){var i=t.originalEvent,n=i.touches&&i.touches.length>0,r=n?i.touches[0].pageX:i.pageX,o=n?i.touches[0].pageY:i.pageY;_=void 0;var s=r-E.left-S,a=o-E.top-P;0===s&&(s=.01);var l=Math.sqrt(s*s+a*a),h=(a*a-l*l-s*s)/(-2*l*s),c=Math.acos(h);if(l<F+e.spotlightPadding)x();else{x();var d=s*m/l,u=a*m/l;a>0&&(c=Math.PI+Math.abs(c-Math.PI));for(var g=2*Math.PI/y.length,p=Math.PI/2,f=p+g,v=0;v<y.length;v++){var b=y[v],w=p<=c&&c<=f||p<=c+2*Math.PI&&c+2*Math.PI<=f;if(b.disabled&&(w=!1),w){_=v;break}p+=g,f+=g}!function(t,e,i){T.drawCommands=[t,e,i]}(d,u,c)}}}).on("tapdrag",C).on("cxttapend tapend",function(){if(p.style.display="none",void 0!==_){var t=y[_].select;t&&(t.apply(d,[d,k]),_=void 0)}R=!1,D()}),{destroy:function(){H()}}}},function(t,e,i){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i.forEach(function(e){Object.keys(e).forEach(function(i){return t[i]=e[i]})}),t}},function(t,e,i){"use strict";t.exports={menuRadius:100,selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1}},function(t,e,i){"use strict";var n=function(t,e){for(var i=Object.keys(e),n=0,r=i.length;n<r;n++)t.style[i[n]]=e[i[n]]};t.exports={removeEles:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t).forEach(function(t){return t.parentNode.removeChild(t)})},setStyles:n,createElement:function(t){t=t||{};var e=document.createElement(t.tag||"div");return e.className=t.class||"",t.style&&n(e,t.style),e},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(t){var e=t.getBoundingClientRect();return{left:e.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:e.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(t,e,i){"use strict";var n=i(0),r=function(t){t&&t("core","cxtmenu",n)};"undefined"!=typeof cytoscape&&r(cytoscape),t.exports=r}])}),window.PainlessLink=function(){var t;return t=0,class{constructor(t,e,i,n,r=null,o=null,s){this.create_edge=this.create_edge.bind(this),this.reverse=this.reverse.bind(this),this.add_datatype=this.add_datatype.bind(this),this.create_node=this.create_node.bind(this),this.delete=this.delete.bind(this),this.create_link=this.create_link.bind(this),this.create_concept=this.create_concept.bind(this),this.cy=e,this.context=t,console.log(this.context),this.link_name=i,this.link_type=n,this.node_var1=r,this.node_var2=o,this.edge_source=null,this.edge_target=null,this.datatype=s,this.datatype_node=null,"concept"===n?this.create_concept():this.create_link()}find_new_name(t=null){var e;for(null===t&&(t="x"),e=0;0!==this.cy.getElementById(t+e).length;)e+=1;return t+e}create_edge(t,e,i=null){return this.cy.add({group:"edges",data:{source:t.id(),target:e.id()},classes:i})}reverse(){return this.source===this.node_var1?(this.edge_source.classes("target-edge"),this.edge_target.classes("source-edge"),this.source=this.node_var2,this.target=this.node_var1):(this.edge_source.classes("source-edge"),this.edge_target.classes("target-edge"),this.source=this.node_var1,this.target=this.node_var2)}add_datatype(t,e){return this.datatype_node=this.cy.add({group:"nodes",data:{label:e},classes:"node-datatype"}),this.edge_datatype=this.cy.add({group:"edges",data:{source:t.id(),target:this.datatype_node.id(),weight:99},classes:"edge-datatype"})}create_node(e,i=null){var n;return n={},"node-variable"===e&&(i=this.find_new_name(i),n.id=i,n.color="#"+palette[t%palette.length],t+=1),n.label="node-concept"===e?this.link_name:"node-attribute"===e||"node-role"===e?i:"?"+i,n.links=[this],this.cy.add({group:"nodes",data:n,classes:e})}delete(){var t,e,i,n,r,o,s,a;for(e=this.context.links.indexOf(this),this.context.links.splice(e,1),this.context.sparql_text.update(),null!==this.node_link&&void 0!==this.node_link&&this.cy.remove(this.node_link),null!==this.node_concept&&void 0!==this.node_concept&&this.cy.remove(this.node_concept),null!==this.datatype_node&&void 0!==this.datatype_node&&this.cy.remove(this.datatype_node),i=0,r=(s=[this.node_var1,this.node_var2]).length;i<r;i++)if(null!==(o=s[i])&&void 0!==o&&(e=o.data("links").indexOf(this),o.data("links").splice(e,1),0===o.data("links").length)){for(console.log(this.context.sparql_text.select_boxes),t=n=0,a=this.context.sparql_text.select_boxes.length;0<=a?n<a:n>a;t=0<=a?++n:--n)this.context.sparql_text.select_boxes[t]===o.id()&&this.context.sparql_text.select_boxes.splice(t,1);this.cy.remove(o)}return this.context.sparql_text.update()}create_link(){if(null===this.node_var1||void 0===this.node_var1)this.node_var1=this.create_node("node-variable"),this.node_var1.classes("node-variable node-variable-full-options");else{if(this.node_var1.hasClass("attr-range"))return void console.warn("properties can't be added to the range of an attribute");this.node_var1.data("links").push(this)}return null===this.node_var2||void 0===this.node_var2?"attribute"===this.link_type?(this.node_var2=this.create_node("node-variable",this.link_name),this.node_var2.classes("node-variable attr-range"),null!==this.datatype&&void 0!==this.datatype&&this.add_datatype(this.node_var2,this.datatype)):(this.node_var2=this.create_node("node-variable"),this.node_var2.classes("node-variable node-variable-full-options")):this.node_var2.data("links").push(this),this.source=this.node_var1,this.target=this.node_var2,"role"===this.link_type?this.node_link=this.create_node("node-role",this.link_name):this.node_link=this.create_node("node-attribute",this.link_name),this.edge_source=this.create_edge(this.node_link,this.source,"source-edge"),this.edge_target=this.create_edge(this.node_link,this.target,"target-edge")}create_concept(){return null!==this.node_var1&&void 0!==this.node_var1||(this.node_var1=this.create_node("node-variable"),this.node_var1.classes("node-variable node-variable-full-options")),this.node_var1.data("links").push(this),this.node_concept=this.create_node("node-concept"),this.create_edge(this.node_var1,this.node_concept,"edge-concept")}}}.call(this),function(t){function e(t,n){if(t=t||"",n=n||{},t instanceof e)return t;if(!(this instanceof e))return new e(t,n);var r=i(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=k(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=k(this._r)),this._g<1&&(this._g=k(this._g)),this._b<1&&(this._b=k(this._b)),this._ok=r.ok,this._tc_id=I++}function i(t){var e={r:0,g:0,b:0},i=1,n=null,r=null,s=null,a=!1,l=!1;return"string"==typeof t&&(t=function(t){t=t.replace(O,"").replace(M,"").toLowerCase();var e,i=!1;if(F[t])t=F[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=H.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=H.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=H.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=H.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=H.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=H.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=H.hex8.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:R(e[4]),format:i?"name":"hex8"}:(e=H.hex6.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:i?"name":"hex"}:(e=H.hex4.exec(t))?{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:R(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=H.hex3.exec(t))&&{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:i?"name":"hex"}}(t)),"object"==typeof t&&(C(t.r)&&C(t.g)&&C(t.b)?(e=function(t,e,i){return{r:255*x(t,255),g:255*x(e,255),b:255*x(i,255)}}(t.r,t.g,t.b),a=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):C(t.h)&&C(t.s)&&C(t.v)?(n=A(t.s),r=A(t.v),e=o(t.h,n,r),a=!0,l="hsv"):C(t.h)&&C(t.s)&&C(t.l)&&(n=A(t.s),s=A(t.l),e=function(t,e,i){function n(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t}var r,o,s;if(t=x(t,360),e=x(e,100),i=x(i,100),0===e)r=o=s=i;else{var a=.5>i?i*(1+e):i+e-i*e,l=2*i-a;r=n(l,a,t+1/3),o=n(l,a,t),s=n(l,a,t-1/3)}return{r:255*r,g:255*o,b:255*s}}(t.h,n,s),a=!0,l="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=E(i),{ok:a,format:t.format||l,r:D(255,S(e.r,0)),g:D(255,S(e.g,0)),b:D(255,S(e.b,0)),a:i}}function n(t,e,i){t=x(t,255),e=x(e,255),i=x(i,255);var n,r,o=S(t,e,i),s=D(t,e,i),a=(o+s)/2;if(o==s)n=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:n=(e-i)/l+(i>e?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:a}}function r(t,e,i){t=x(t,255),e=x(e,255),i=x(i,255);var n,r,o=S(t,e,i),s=D(t,e,i),a=o,l=o-s;if(r=0===o?0:l/o,o==s)n=0;else{switch(o){case t:n=(e-i)/l+(i>e?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:a}}function o(e,i,n){e=6*x(e,360),i=x(i,100),n=x(n,100);var r=t.floor(e),o=e-r,s=n*(1-i),a=n*(1-o*i),l=n*(1-(1-o)*i),h=r%6;return{r:255*[n,a,s,s,l,n][h],g:255*[l,n,n,a,s,s][h],b:255*[s,s,l,n,n,a][h]}}function s(t,e,i,n){var r=[T(k(t).toString(16)),T(k(e).toString(16)),T(k(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function a(t,e,i,n){return[T(N(n)),T(k(t).toString(16)),T(k(e).toString(16)),T(k(i).toString(16))].join("")}function l(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s-=i/100,n.s=w(n.s),e(n)}function h(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.s+=i/100,n.s=w(n.s),e(n)}function c(t){return e(t).desaturate(100)}function d(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l+=i/100,n.l=w(n.l),e(n)}function u(t,i){i=0===i?0:i||10;var n=e(t).toRgb();return n.r=S(0,D(255,n.r-k(-i/100*255))),n.g=S(0,D(255,n.g-k(-i/100*255))),n.b=S(0,D(255,n.b-k(-i/100*255))),e(n)}function g(t,i){i=0===i?0:i||10;var n=e(t).toHsl();return n.l-=i/100,n.l=w(n.l),e(n)}function p(t,i){var n=e(t).toHsl(),r=(n.h+i)%360;return n.h=0>r?360+r:r,e(n)}function f(t){var i=e(t).toHsl();return i.h=(i.h+180)%360,e(i)}function y(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+120)%360,s:i.s,l:i.l}),e({h:(n+240)%360,s:i.s,l:i.l})]}function v(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+90)%360,s:i.s,l:i.l}),e({h:(n+180)%360,s:i.s,l:i.l}),e({h:(n+270)%360,s:i.s,l:i.l})]}function m(t){var i=e(t).toHsl(),n=i.h;return[e(t),e({h:(n+72)%360,s:i.s,l:i.l}),e({h:(n+216)%360,s:i.s,l:i.l})]}function b(t,i,n){i=i||6,n=n||30;var r=e(t).toHsl(),o=360/n,s=[e(t)];for(r.h=(r.h-(o*i>>1)+720)%360;--i;)r.h=(r.h+o)%360,s.push(e(r));return s}function _(t,i){i=i||6;for(var n=e(t).toHsv(),r=n.h,o=n.s,s=n.v,a=[],l=1/i;i--;)a.push(e({h:r,s:o,v:s})),s=(s+l)%1;return a}function E(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function x(e,i){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=D(i,S(0,parseFloat(e))),n&&(e=parseInt(e*i,10)/100),t.abs(e-i)<1e-6?1:e%i/parseFloat(i)}function w(t){return D(1,S(0,t))}function L(t){return parseInt(t,16)}function T(t){return 1==t.length?"0"+t:""+t}function A(t){return 1>=t&&(t=100*t+"%"),t}function N(e){return t.round(255*parseFloat(e)).toString(16)}function R(t){return L(t)/255}function C(t){return!!H.CSS_UNIT.exec(t)}var O=/^\s+/,M=/\s+$/,I=0,k=t.round,D=t.min,S=t.max,P=t.random;e.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,i,n,r=this.toRgb();return e=r.r/255,i=r.g/255,n=r.b/255,.2126*(.03928>=e?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(.03928>=i?i/12.92:t.pow((i+.055)/1.055,2.4))+.0722*(.03928>=n?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=E(t),this._roundA=k(100*this._a)/100,this},toHsv:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=r(this._r,this._g,this._b),e=k(360*t.h),i=k(100*t.s),n=k(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=n(this._r,this._g,this._b),e=k(360*t.h),i=k(100*t.s),r=k(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+r+"%)":"hsla("+e+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,i,n,r){var o=[T(k(t).toString(16)),T(k(e).toString(16)),T(k(i).toString(16)),T(N(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:k(this._r),g:k(this._g),b:k(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+k(this._r)+", "+k(this._g)+", "+k(this._b)+")":"rgba("+k(this._r)+", "+k(this._g)+", "+k(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:k(100*x(this._r,255))+"%",g:k(100*x(this._g,255))+"%",b:k(100*x(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+k(100*x(this._r,255))+"%, "+k(100*x(this._g,255))+"%, "+k(100*x(this._b,255))+"%)":"rgba("+k(100*x(this._r,255))+"%, "+k(100*x(this._g,255))+"%, "+k(100*x(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(G[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var i="#"+a(this._r,this._g,this._b,this._a),n=i,r=this._gradientType?"GradientType = 1, ":"";if(t){var o=e(t);n="#"+a(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+i+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t)?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return e(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(f,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(y,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},e.fromRatio=function(t,i){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:A(t[r]));t=n}return e(t,i)},e.equals=function(t,i){return!(!t||!i)&&e(t).toRgbString()==e(i).toRgbString()},e.random=function(){return e.fromRatio({r:P(),g:P(),b:P()})},e.mix=function(t,i,n){n=0===n?0:n||50;var r=e(t).toRgb(),o=e(i).toRgb(),s=n/100;return e({r:(o.r-r.r)*s+r.r,g:(o.g-r.g)*s+r.g,b:(o.b-r.b)*s+r.b,a:(o.a-r.a)*s+r.a})},e.readability=function(i,n){var r=e(i),o=e(n);return(t.max(r.getLuminance(),o.getLuminance())+.05)/(t.min(r.getLuminance(),o.getLuminance())+.05)},e.isReadable=function(t,i,n){var r,o,s=e.readability(t,i);switch(o=!1,(r=function(t){var e,i;return e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:e,size:i}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=s>=4.5;break;case"AAlarge":o=s>=3;break;case"AAAsmall":o=s>=7}return o},e.mostReadable=function(t,i,n){var r,o,s,a,l=null,h=0;o=(n=n||{}).includeFallbackColors,s=n.level,a=n.size;for(var c=0;c<i.length;c++)(r=e.readability(t,i[c]))>h&&(h=r,l=e(i[c]));return e.isReadable(t,l,{level:s,size:a})||!o?l:(n.includeFallbackColors=!1,e.mostReadable(t,["#fff","#000"],n))};var F=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G=e.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(F),H=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.tinycolor=e}(Math),window.PainlessMenu=class{constructor(t){this.change_size=this.change_size.bind(this),this.create_navigation_div=this.create_navigation_div.bind(this),this.init=this.init.bind(this),this.context=t,this.init()}change_size(t){return this.context.query_canvas.style.height=t+"%",sparql_textbox.style.height=90-t+"%",setTimeout(()=>this.context.graph.cy.resize(),550)}create_div(t=null,e=null,i=null,n=null){var r;return(r=document.createElement("div")).innerHTML=t,r.className=e,r.id=i,r.onclick=n,r}create_navigation_div(){var t;return(t=this.create_div(null,null,"nav_div")).append(this.create_div("▲","resize_button",null,()=>this.change_size(90))),t.append(this.create_div("≡","resize_button",null,()=>this.change_size(60))),t.append(this.create_div("▼","resize_button",null,()=>this.change_size(0))),t}init(){var t;return t=this.create_div(null,null,"painless_menu"),document.getElementById("sidenav").append(t),t.append(this.create_navigation_div()),t.append(this.create_div('<i class="material-icons">undo</i>',"menu_button",null,()=>this.context.graph.undo())),t.append(this.create_div('<i class="material-icons">filter_center_focus</i>',"menu_button",null,()=>this.context.graph.center_view())),t.append(this.create_div('<i class="material-icons">file_copy</i>',"menu_button",null,()=>this.context.graph.copy_to_clipboard())),t.append(this.create_div('<i class="material-icons">save</i>',"menu_button",null,()=>this.context.graph.download()))}},function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("dagre")):"function"==typeof define&&define.amd?define(["dagre"],e):"object"==typeof exports?exports.cytoscapeDagre=e(require("dagre")):t.cytoscapeDagre=e(t.dagre)}(this,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(2),o=i(1),s=i(4);function a(t){this.options=o({},r,t)}a.prototype.run=function(){var t=this.options,e=t.cy,i=t.eles,r=function(t,e){return"function"==typeof e?e.apply(t,[t]):e},o=t.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===o.x2&&(o.x2=o.x1+o.w),void 0===o.w&&(o.w=o.x2-o.x1),void 0===o.y2&&(o.y2=o.y1+o.h),void 0===o.h&&(o.h=o.y2-o.y1);var a=new s.graphlib.Graph({multigraph:!0,compound:!0}),l={},h=function(t,e){null!=e&&(l[t]=e)};h("nodesep",t.nodeSep),h("edgesep",t.edgeSep),h("ranksep",t.rankSep),h("rankdir",t.rankDir),h("ranker",t.ranker),a.setGraph(l),a.setDefaultEdgeLabel(function(){return{}}),a.setDefaultNodeLabel(function(){return{}});for(var c=i.nodes(),d=0;d<c.length;d++){var u=c[d],g=u.layoutDimensions(t);a.setNode(u.id(),{width:g.w,height:g.h,name:u.id()})}for(var p=0;p<c.length;p++){var f=c[p];f.isChild()&&a.setParent(f.id(),f.parent().id())}for(var y=i.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),v=0;v<y.length;v++){var m=y[v];a.setEdge(m.source().id(),m.target().id(),{minlen:r(m,t.minLen),weight:r(m,t.edgeWeight),name:m.id()},m.id())}s.layout(a);for(var b=a.nodes(),_=0;_<b.length;_++){var E=b[_],x=a.node(E);e.getElementById(E).scratch().dagre=x}var w=void 0;t.boundingBox?(w={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},c.forEach(function(t){var e=t.scratch().dagre;w.x1=Math.min(w.x1,e.x),w.x2=Math.max(w.x2,e.x),w.y1=Math.min(w.y1,e.y),w.y2=Math.max(w.y2,e.y)}),w.w=w.x2-w.x1,w.h=w.y2-w.y1):w=o;return c.layoutPositions(this,t,function(e){var i=(e="object"===(void 0===e?"undefined":n(e))?e:this).scratch().dagre;return function(e){if(t.boundingBox){var i=0===w.w?0:(e.x-w.x1)/w.w,n=0===w.h?0:(e.y-w.y1)/w.h;return{x:o.x1+i*o.w,y:o.y1+n*o.h}}return e}({x:i.x,y:i.y})}),this},t.exports=a},function(t,e,i){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i.forEach(function(e){Object.keys(e).forEach(function(i){return t[i]=e[i]})}),t}},function(t,e,i){"use strict";var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,ranker:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(t,e){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(t,e){return e},ready:function(){},stop:function(){}};t.exports=n},function(t,e,i){"use strict";var n=i(0),r=function(t){t&&t("layout","dagre",n)};"undefined"!=typeof cytoscape&&r(cytoscape),t.exports=r},function(e,i){e.exports=t}])}),window.PainlessSparql=function(){var t,e,i;class n{constructor(t){this.add_to_query=this.add_to_query.bind(this),this.extract_datatype=this.extract_datatype.bind(this),this.create_sidenav=this.create_sidenav.bind(this),this.onkeypress_handler=this.onkeypress_handler.bind(this),this.cy=t.cy,this.init()}init(){return this.create_sidenav(),this.sparql_text=this.graph.sparql_text,this.menu=new window.PainlessMenu(this),this.add_event_listener()}add_to_query(){var t;switch(0===(t=this.cy.nodes(":selected")).length&&console.warn("please, select a node in the main graph"),t.data("type")){case"role":return this.graph.add_link(t.data("label"),"role");case"attribute":return this.graph.add_link(t.data("label"),"attribute",this.extract_datatype(t));case"concept":return this.graph.add_link(t.data("label"),"concept")}}extract_datatype(t){var e,i,n,r,o,s,a,l;for(e=0,n=(a=t.neighborhood("node")).length;e<n;e++)if("range-restriction"===(o=a[e]).data("type"))for(i=0,r=(l=o.neighborhood("node")).length;i<r;i++)if("value-domain"===(s=l[i]).data("type"))return s.data("label")}create_sidenav(){var e,i,n,r,o,s;return(n=document.createElement("div")).id="sidenav_container",n.style.width=t*document.documentElement.clientWidth/100+30+"px",document.body.appendChild(n),(r=document.createElement("div")).style.backgroundColor="#93a1a1",r.style.height="100%",r.id="slider",r.style.width="100%",r.style.display="inline-block",sidenav_container.appendChild(r),(o=document.createElement("div")).innerHTML='<i class="material-icons">keyboard_arrow_left</i>',o.className="slider_button",o.onclick=(()=>(100!==(t+=25)?(n.style.width=t*document.documentElement.clientWidth/100+30+"px",i.style.width=t+"%"):(n.style.width=t*document.documentElement.clientWidth/100+"px",i.style.width=t*document.documentElement.clientWidth/100-30+"px"),setTimeout(()=>this.graph.cy.resize(),550))),r.appendChild(o),(o=document.createElement("div")).innerHTML='<i class="material-icons">keyboard_arrow_right</i>',o.className="slider_button",o.onclick=(()=>(t-=25,n.style.width=t*document.documentElement.clientWidth/100+30+"px",i.style.width=t+"%",setTimeout(()=>this.graph.cy.resize(),550))),r.appendChild(o),(e=document.createElement("div")).innerHTML='<i class="material-icons">add</i><p style="font-size:xx-small; margin-top: -5px">node</p>',e.className="slider_button",e.style.bottom=0,e.style.position="fixed",e.style.marginLeft="5px",e.onclick=(()=>this.add_to_query()),r.appendChild(e),(i=document.createElement("div")).id="sidenav",i.className="sidenav",i.style.display="inline-block",i.style.width=t+"%",n.appendChild(i),(s=document.createElement("div")).id="sparql_textbox",s.innerHTML="sparql_query_here",i.appendChild(s),this.query_canvas=document.createElement("div"),this.query_canvas.id="query_canvas",i.appendChild(this.query_canvas),this.graph=new PainlessGraph(this.query_canvas)}open_nav(){return document.getElementById("sidenav").style.width="50%"}close_nav(){return document.getElementById("sidenav").style.width="0px"}onkeypress_handler(t){var e,i,n,r,o;if("a"===t.key);else if("b"===t.key);else{if("d"===t.key)return console.log(this.graph.cy.nodes(":selected").data("links"));if("l"===t.key)return this.graph.layout_index+=1,this.graph.reshape(),console.log(this.graph.layout);if(46===t.keyCode||8===t.keyCode||127===t.keyCode){for(o=[],e=0,i=(r=this.graph.cy.nodes(":selected").data("links")).length;e<i;e++)n=r[e],o.push(n.delete());return o}}}add_event_listener(){return document.onkeypress=this.onkeypress_handler,this.cy.on("tap",t=>{var n;return n=t.target,i&&e&&clearTimeout(i),e===n?(n.trigger("doubleTap",t),e=null,null,this.add_to_query()):(i=setTimeout(()=>e=null,300),e=n)})}}return n.graph=null,t=50,e=null,i=null,n}.call(this),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("klayjs")):"function"==typeof define&&define.amd?define(["klayjs"],e):"object"==typeof exports?exports.cytoscapeKlay=e(require("klayjs")):t.cytoscapeKlay=e(t.$klay)}(this,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";var n=i(4),r=i(1),o=i(2),s={addUnnecessaryBendpoints:"de.cau.cs.kieler.klay.layered.unnecessaryBendpoints",alignment:"de.cau.cs.kieler.alignment",aspectRatio:"de.cau.cs.kieler.aspectRatio",borderSpacing:"borderSpacing",compactComponents:"de.cau.cs.kieler.klay.layered.components.compact",compactionStrategy:"de.cau.cs.kieler.klay.layered.nodeplace.compactionStrategy",contentAlignment:"de.cau.cs.kieler.klay.layered.contentAlignment",crossingMinimization:"de.cau.cs.kieler.klay.layered.crossMin",cycleBreaking:"de.cau.cs.kieler.klay.layered.cycleBreaking",debugMode:"de.cau.cs.kieler.debugMode",direction:"de.cau.cs.kieler.direction",edgeLabelSideSelection:"de.cau.cs.kieler.klay.layered.edgeLabelSideSelection",edgeRouting:"de.cau.cs.kieler.edgeRouting",edgeSpacingFactor:"de.cau.cs.kieler.klay.layered.edgeSpacingFactor",feedbackEdges:"de.cau.cs.kieler.klay.layered.feedBackEdges",fixedAlignment:"de.cau.cs.kieler.klay.layered.fixedAlignment",greedySwitchCrossingMinimization:"de.cau.cs.kieler.klay.layered.greedySwitch",hierarchyHandling:"de.cau.cs.kieler.hierarchyHandling",inLayerSpacingFactor:"de.cau.cs.kieler.klay.layered.inLayerSpacingFactor",interactiveReferencePoint:"de.cau.cs.kieler.klay.layered.interactiveReferencePoint",layerConstraint:"de.cau.cs.kieler.klay.layered.layerConstraint",layoutHierarchy:"de.cau.cs.kieler.layoutHierarchy",linearSegmentsDeflectionDampening:"de.cau.cs.kieler.klay.layered.linearSegmentsDeflectionDampening",mergeEdges:"de.cau.cs.kieler.klay.layered.mergeEdges",mergeHierarchyCrossingEdges:"de.cau.cs.kieler.klay.layered.mergeHierarchyEdges",noLayout:"de.cau.cs.kieler.noLayout",nodeLabelPlacement:"de.cau.cs.kieler.nodeLabelPlacement",nodeLayering:"de.cau.cs.kieler.klay.layered.nodeLayering",nodePlacement:"de.cau.cs.kieler.klay.layered.nodePlace",portAlignment:"de.cau.cs.kieler.portAlignment",portAlignmentEastern:"de.cau.cs.kieler.portAlignment.east",portAlignmentNorth:"de.cau.cs.kieler.portAlignment.north",portAlignmentSouth:"de.cau.cs.kieler.portAlignment.south",portAlignmentWest:"de.cau.cs.kieler.portAlignment.west",portConstraints:"de.cau.cs.kieler.portConstraints",portLabelPlacement:"de.cau.cs.kieler.portLabelPlacement",portOffset:"de.cau.cs.kieler.offset",portSide:"de.cau.cs.kieler.portSide",portSpacing:"de.cau.cs.kieler.portSpacing",postCompaction:"de.cau.cs.kieler.klay.layered.postCompaction",priority:"de.cau.cs.kieler.priority",randomizationSeed:"de.cau.cs.kieler.randomSeed",routeSelfLoopInside:"de.cau.cs.kieler.selfLoopInside",separateConnectedComponents:"de.cau.cs.kieler.separateConnComp",sizeConstraint:"de.cau.cs.kieler.sizeConstraint",sizeOptions:"de.cau.cs.kieler.sizeOptions",spacing:"de.cau.cs.kieler.spacing",splineSelfLoopPlacement:"de.cau.cs.kieler.klay.layered.splines.selfLoopPlacement",thoroughness:"de.cau.cs.kieler.klay.layered.thoroughness",wideNodesOnMultipleLayers:"de.cau.cs.kieler.klay.layered.wideNodesOnMultipleLayers"},a={interactiveReferencePoint:"CENTER"},l=function(t){var e=t.parent(),i=t.scratch("klay"),n={x:i.x,y:i.y};if(e.nonempty()){var r=e.scratch("klay");n.x+=r.x,n.y+=r.y}return n},h=function(t,e){var i=t.layoutDimensions(e),n=t.numericStyle("padding"),r={_cyEle:t,id:t.id(),padding:{top:n,left:n,bottom:n,right:n}};return t.isParent()||(r.width=i.w,r.height=i.h),t.scratch("klay",r),r},c=function(t,e){var i={_cyEle:t,id:t.id(),source:t.data("source"),target:t.data("target")},n=e.priority(t);return null!=n&&(i.priority=n),t.scratch("klay",i),i};function d(t){var e=t.klay;this.options=r({},o,t),this.options.klay=r({},o.klay,e,a)}d.prototype.run=function(){var t=this.options,e=t.eles,i=e.nodes(),r=function(t,e,i){for(var n=[],r=[],o={},s={id:"root",children:[],edges:[]},a=0;a<t.length;a++){var l=t[a],d=h(l,i);n.push(d),o[l.id()]=d}for(var u=0;u<e.length;u++){var g=e[u],p=c(g,i);r.push(p),o[g.id()]=p}for(var f=0;f<n.length;f++){var y=n[f],v=y._cyEle;if(v.isChild()){var m=o[v.parent().id()];(m.children=m.children||[]).push(y)}else s.children.push(y)}for(var b=0;b<r.length;b++){var _=r[b],E=_._cyEle;E.source().parent(),E.target().parent(),s.edges.push(_)}return s}(i,e.edges(),t);return n.layout({graph:r,options:function(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++){var r=e[n],o=s[r],a=t[r];i[o]=a}return i}(t.klay),success:function(){},error:function(t){throw t}}),i.filter(function(t){return!t.isParent()}).layoutPositions(this,t,l),this},d.prototype.stop=function(){return this},d.prototype.destroy=function(){return this},t.exports=d},function(t,e,i){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i.forEach(function(e){Object.keys(e).forEach(function(i){return t[i]=e[i]})}),t}},function(t,e,i){"use strict";var n={nodeDimensionsIncludeLabels:!1,fit:!0,padding:20,animate:!1,animateFilter:function(t,e){return!0},animationDuration:500,animationEasing:void 0,transform:function(t,e){return e},ready:void 0,stop:void 0,klay:{addUnnecessaryBendpoints:!1,aspectRatio:1.6,borderSpacing:20,compactComponents:!1,crossingMinimization:"LAYER_SWEEP",cycleBreaking:"GREEDY",direction:"UNDEFINED",edgeRouting:"ORTHOGONAL",edgeSpacingFactor:.5,feedbackEdges:!1,fixedAlignment:"NONE",inLayerSpacingFactor:1,layoutHierarchy:!1,linearSegmentsDeflectionDampening:.3,mergeEdges:!1,mergeHierarchyCrossingEdges:!0,nodeLayering:"NETWORK_SIMPLEX",nodePlacement:"BRANDES_KOEPF",randomizationSeed:1,routeSelfLoopInside:!1,separateConnectedComponents:!0,spacing:20,thoroughness:7},priority:function(t){return null}};t.exports=n},function(t,e,i){"use strict";var n=i(0),r=function(t){t&&t("layout","klay",n)};"undefined"!=typeof cytoscape&&r(cytoscape),t.exports=r},function(e,i){e.exports=t}])}),window.QueryFilter=class{constructor(t){this.new_condition=this.new_condition.bind(this),this.to_html=this.to_html.bind(this),this.node_id=t,this.conditions=[],this.conditions.push(this.new_condition())}new_condition(){var t,e,i,n,r;return t=document.createElement("div"),void 0!==this.node_id?((e=document.createElement("div")).innerHTML=this.node_id,t.appendChild(e)):(n=new window.Void,t.appendChild(n.to_html())),(i=document.createElement("div")).innerHTML=">=",i.style.marginLeft="5px",i.style.marginRight="5px",t.appendChild(i),(r=document.createElement("div")).innerHTML="100 ^^xsd:string",t.appendChild(r),t}to_html(){var t,e,i,n,r,o,s,a;for(s=document.createElement("div"),(a=document.createElement("div")).innerHTML="filter ",a.style.display="inline",s.append(a),(e=document.createElement("div")).className="filter_condition_container",i=0,n=(r=this.conditions).length;i<n;i++)t=r[i],e.appendChild(t);return s.append(e),(o=document.createElement("div")).innerHTML="❎",o.style.color="#F08080",o.style.fontSize="large",o.style.marginLeft="8px",o.style.visibility="hidden",o.style.display="inline-block",o.onclick=(()=>console.log("click")),s.append(o),s.onmouseover=(()=>o.style.visibility="visible"),s.onmouseout=(()=>o.style.visibility="hidden"),s}},function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).cytoscapeSpread=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i||t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";var n=t("./layout"),r=function(e,i){e("layout","spread",n(e,i||t("weaverjs")))};"undefined"==typeof cytoscape||"undefined"==typeof weaver&&void 0===cytoscape.Thread||r(cytoscape,weaver||cytoscape),e.exports=r},{"./layout":2,weaverjs:void 0}],2:[function(t,e,i){var n,r=t("./rhill-voronoi-core"),o={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,prelayout:{name:"cose"},maxExpandIterations:4,boundingBox:void 0,randomize:!1};function s(t){var e=this.options={};for(var i in o)e[i]=o[i];for(var i in t)e[i]=t[i]}s.prototype.run=function(){var t=this,e=this.options,i=e.cy,o=e.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===o.x2&&(o.x2=o.x1+o.w),void 0===o.w&&(o.w=o.x2-o.x1),void 0===o.y2&&(o.y2=o.y1+o.h),void 0===o.h&&(o.h=o.y2-o.y1);var s=i.nodes(),a=i.edges(),l=i.width(),h=i.height(),c=o,d=e.padding,u=Math.max(1,.8*Math.log(s.length));s.length<100&&(u/=2),t.trigger({type:"layoutstart",layout:t});var g={x1:0,y1:0,x2:l*u,y2:h*u};c&&(g.x1=c.x1,g.y1=c.y1,g.x2=c.x2,g.y2=c.y2),g.x1+=d,g.y1+=d,g.x2-=d,g.y2-=d;var p=g.x2-g.x1,f=g.y2-g.y1,y=Date.now();if(s.size()<=1){s.positions({x:Math.round((g.x1+g.x2)/2),y:Math.round((g.y1+g.y2)/2)}),e.fit&&i.fit(e.padding);var v=Date.now();return console.info("Layout on "+s.size()+" nodes took "+(v-y)+" ms"),t.one("layoutready",e.ready),t.trigger("layoutready"),t.one("layoutstop",e.stop),void t.trigger("layoutstop")}for(var m={width:p,height:f,minDist:e.minDist,expFact:e.expandingFactor,expIt:0,maxExpIt:e.maxExpandIterations,vertices:[],edges:[],startTime:y},b=s.length-1;b>=0;b--){var _=s[b].id(),E=s[b].position();e.randomize&&(E={x:Math.round(g.x1+(g.x2-g.x1)*Math.random()),y:Math.round(g.y1+(g.y2-g.y1)*Math.random())}),m.vertices.push({id:_,x:E.x,y:E.y})}for(b=a.length-1;b>=0;b--){var x=a[b].source().id(),w=a[b].target().id();m.edges.push({src:x,tgt:w})}var L=t.thread;function T(t){for(var n=t.vertices,r=[],o=0;o<n.length;++o){var a=n[o];r[a.id]={x:a.x,y:a.y}}s.positions(function(t,e){"number"==typeof t&&(t=e);var i=t.id(),n=r[i];return{x:Math.round(g.x1+n.x),y:Math.round(g.y1+n.y)}}),e.fit&&i.fit(e.padding)}L&&!L.stopped()||(L=t.thread=n()).require(r,"Voronoi");var A=!1;if(L.on("message",function(i){var n=i.message;e.animate&&(T(n),A||(t.trigger("layoutready"),A=!0))}),t.one("layoutready",e.ready),e.prelayout){var N=i.makeLayout(e.prelayout);N.promiseOn("layoutstop").then(R),N.run()}else R();function R(){L.pass(m).run(function(t){function e(t){for(var e,i,n,r=t.halfedges,o=0,s=0,a=0,l=0;l<r.length;++l)e=r[l].getEndpoint(),i=r[l].getStartpoint(),o+=e.x*i.y,o-=e.y*i.x,n=e.x*i.y-i.x*e.y,s+=(e.x+i.x)*n,a+=(e.y+i.y)*n;return{x:s/(n=6*(o/=2)),y:a/n}}r=_ref_("Voronoi");var i=t.width,n=t.height,o=t.minDist,s=t.expFact,a=t.maxExpIt,l=function(){t.width=i,t.height=n,t.expIt=C,t.expFact=s,t.vertices=[];for(var e=0;e<y.length;++e)t.vertices.push({id:y[e].label,x:y[e].x,y:y[e].y})},h=function(){broadcast(t)},c=t.vertices,d=(t.edges,1/0),u=-1/0,g=1/0,p=-1/0;c.forEach(function(t){d=Math.min(t.x,d),u=Math.max(t.x,u),g=Math.min(t.y,g),p=Math.max(t.y,p)});var f=function(t,e,i,n,r){var o=(t-e)/(i-e);return isNaN(o)&&(o=Math.random()),n+(r-n)*o},y=c.map(function(t){return{label:t.id,x:f(t.x,d,u,0,i),y:f(t.y,g,p,0,n)}});if(l(),h(),a<=0)return t;for(var v=new r,m={xl:0,xr:i,yt:0,yb:n},b=[],_=0;_<y.length;++_)b[y[_].label]=y[_];function E(t){for(var e,i,n,r,s=0,a=0;a<t.length;++a){var l=t[a];null!=l.lSite&&null!=l.rSite&&(e=l.lSite,i=l.rSite,void 0,void 0,n=e.x-i.x,r=e.y-i.y,Math.sqrt(n*n+r*r)<o)&&++s}return s}var x=v.compute(y,m),w=x.cells;for(_=0;_<w.length;++_){var L=(M=w[_]).site,T=e(M);(I=b[L.label]).x=T.x,I.y=T.y}s<0&&(s=Math.max(.05,Math.min(.1,o/Math.sqrt(i*n/y.length)*.5)));for(var A=E(x.edges),N=A<=0||a<=0,R=0,C=0;!N;){++R;for(var O=0;O<=4;++O){v.recycle(x),x=v.compute(y,m);for(_=0;_<w.length;++_){var M,I;L=(M=w[_]).site,T=e(M);(I=b[L.label]).x=T.x,I.y=T.y}}var k=E(x.edges);k<=0?N=!0:(k>=A||R>=4)&&(C>=a?N=!0:(m={xl:0,xr:i+=i*s,yt:0,yb:n+=n*s},++C,R=0)),A=k,l(),h()}return l(),t}).then(function(i){var n=i.vertices;T(i);var r=i.startTime,o=new Date;console.info("Layout on "+n.length+" nodes took "+(o-r)+" ms"),t.one("layoutstop",e.stop),e.animate||t.trigger("layoutready"),t.trigger("layoutstop"),L.stop()})}return this},s.prototype.stop=function(){this.thread&&this.thread.stop(),this.trigger("layoutstop")},s.prototype.destroy=function(){this.thread&&this.thread.stop()},e.exports=function(t,e){return n=e.Thread,s}},{"./rhill-voronoi-core":3}],3:[function(t,e,i){function n(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}n.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var t=this.beachline.getFirst(this.beachline.root);t;)this.beachsectionJunkyard.push(t),t=t.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},n.prototype.sqrt=function(t){return Math.sqrt(t)},n.prototype.abs=function(t){return Math.abs(t)},n.prototype.ε=n.ε=1e-9,n.prototype.invε=n.invε=1/n.ε,n.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},n.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},n.prototype.greaterThanOrEqualWithEpsilon=function(t,e){return e-t<1e-9},n.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},n.prototype.lessThanOrEqualWithEpsilon=function(t,e){return t-e<1e-9},n.prototype.RBTree=function(){this.root=null},n.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){var i,n,r;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;i=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,i=t):(e.rbPrevious=e.rbNext=null,this.root=e,i=null);for(e.rbLeft=e.rbRight=null,e.rbParent=i,e.rbRed=!0,t=e;i&&i.rbRed;)i===(n=i.rbParent).rbLeft?(r=n.rbRight)&&r.rbRed?(i.rbRed=r.rbRed=!1,n.rbRed=!0,t=n):(t===i.rbRight&&(this.rbRotateLeft(i),i=(t=i).rbParent),i.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n)):(r=n.rbLeft)&&r.rbRed?(i.rbRed=r.rbRed=!1,n.rbRed=!0,t=n):(t===i.rbLeft&&(this.rbRotateRight(i),i=(t=i).rbParent),i.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n)),i=t.rbParent;this.root.rbRed=!1},n.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;var e,i,n=t.rbParent,r=t.rbLeft,o=t.rbRight;if(e=r?o?this.getFirst(o):r:o,n?n.rbLeft===t?n.rbLeft=e:n.rbRight=e:this.root=e,r&&o?(i=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=r,r.rbParent=e,e!==o?(n=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,n.rbLeft=t,e.rbRight=o,o.rbParent=e):(e.rbParent=n,n=e,t=e.rbRight)):(i=t.rbRed,t=e),t&&(t.rbParent=n),!i)if(t&&t.rbRed)t.rbRed=!1;else{var s;do{if(t===this.root)break;if(t===n.rbLeft){if((s=n.rbRight).rbRed&&(s.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),s=n.rbRight),s.rbLeft&&s.rbLeft.rbRed||s.rbRight&&s.rbRight.rbRed){s.rbRight&&s.rbRight.rbRed||(s.rbLeft.rbRed=!1,s.rbRed=!0,this.rbRotateRight(s),s=n.rbRight),s.rbRed=n.rbRed,n.rbRed=s.rbRight.rbRed=!1,this.rbRotateLeft(n),t=this.root;break}}else if((s=n.rbLeft).rbRed&&(s.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),s=n.rbLeft),s.rbLeft&&s.rbLeft.rbRed||s.rbRight&&s.rbRight.rbRed){s.rbLeft&&s.rbLeft.rbRed||(s.rbRight.rbRed=!1,s.rbRed=!0,this.rbRotateLeft(s),s=n.rbLeft),s.rbRed=n.rbRed,n.rbRed=s.rbLeft.rbRed=!1,this.rbRotateRight(n),t=this.root;break}s.rbRed=!0,t=n,n=n.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},n.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,i=t.rbRight,n=e.rbParent;n?n.rbLeft===e?n.rbLeft=i:n.rbRight=i:this.root=i,i.rbParent=n,e.rbParent=i,e.rbRight=i.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),i.rbLeft=e},n.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,i=t.rbLeft,n=e.rbParent;n?n.rbLeft===e?n.rbLeft=i:n.rbRight=i:this.root=i,i.rbParent=n,e.rbParent=i,e.rbLeft=i.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),i.rbRight=e},n.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},n.prototype.RBTree.prototype.getLast=function(t){for(;t.rbRight;)t=t.rbRight;return t},n.prototype.Diagram=function(t){this.site=t},n.prototype.Cell=function(t){this.site=t,this.halfedges=[],this.closeMe=!1},n.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this.closeMe=!1,this},n.prototype.createCell=function(t){var e=this.cellJunkyard.pop();return e?e.init(t):new this.Cell(t)},n.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,i=e.length;i--;)(t=e[i].edge).vb&&t.va||e.splice(i,1);return e.sort(function(t,e){return e.angle-t.angle}),e.length},n.prototype.Cell.prototype.getNeighborIds=function(){for(var t,e=[],i=this.halfedges.length;i--;)null!==(t=this.halfedges[i].edge).lSite&&t.lSite.voronoiId!=this.site.voronoiId?e.push(t.lSite.voronoiId):null!==t.rSite&&t.rSite.voronoiId!=this.site.voronoiId&&e.push(t.rSite.voronoiId);return e},n.prototype.Cell.prototype.getBbox=function(){for(var t,e,i,n=this.halfedges,r=n.length,o=1/0,s=1/0,a=-1/0,l=-1/0;r--;)e=(t=n[r].getStartpoint()).x,i=t.y,e<o&&(o=e),i<s&&(s=i),e>a&&(a=e),i>l&&(l=i);return{x:o,y:s,width:a-o,height:l-s}},n.prototype.Cell.prototype.pointIntersection=function(t,e){for(var i,n,r,o,s=this.halfedges,a=s.length;a--;){if(n=(i=s[a]).getStartpoint(),r=i.getEndpoint(),!(o=(e-n.y)*(r.x-n.x)-(t-n.x)*(r.y-n.y)))return 0;if(o>0)return-1}return 1},n.prototype.Vertex=function(t,e){this.x=t,this.y=e},n.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},n.prototype.Halfedge=function(t,e,i){if(this.site=e,this.edge=t,i)this.angle=Math.atan2(i.y-e.y,i.x-e.x);else{var n=t.va,r=t.vb;this.angle=t.lSite===e?Math.atan2(r.x-n.x,n.y-r.y):Math.atan2(n.x-r.x,r.y-n.y)}},n.prototype.createHalfedge=function(t,e,i){return new this.Halfedge(t,e,i)},n.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},n.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},n.prototype.createVertex=function(t,e){var i=this.vertexJunkyard.pop();return i?(i.x=t,i.y=e):i=new this.Vertex(t,e),this.vertices.push(i),i},n.prototype.createEdge=function(t,e,i,n){var r=this.edgeJunkyard.pop();return r?(r.lSite=t,r.rSite=e,r.va=r.vb=null):r=new this.Edge(t,e),this.edges.push(r),i&&this.setEdgeStartpoint(r,t,e,i),n&&this.setEdgeEndpoint(r,t,e,n),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(r,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(r,e,t)),r},n.prototype.createBorderEdge=function(t,e,i){var n=this.edgeJunkyard.pop();return n?(n.lSite=t,n.rSite=null):n=new this.Edge(t,null),n.va=e,n.vb=i,this.edges.push(n),n},n.prototype.setEdgeStartpoint=function(t,e,i,n){t.va||t.vb?t.lSite===i?t.vb=n:t.va=n:(t.va=n,t.lSite=e,t.rSite=i)},n.prototype.setEdgeEndpoint=function(t,e,i,n){this.setEdgeStartpoint(t,i,e,n)},n.prototype.Beachsection=function(){},n.prototype.createBeachsection=function(t){var e=this.beachsectionJunkyard.pop();return e||(e=new this.Beachsection),e.site=t,e},n.prototype.leftBreakPoint=function(t,e){var i=t.site,n=i.x,r=i.y,o=r-e;if(!o)return n;var s=t.rbPrevious;if(!s)return-1/0;var a=(i=s.site).x,l=i.y,h=l-e;if(!h)return a;var c=a-n,d=1/o-1/h,u=c/h;return d?(-u+this.sqrt(u*u-2*d*(c*c/(-2*h)-l+h/2+r-o/2)))/d+n:(n+a)/2},n.prototype.rightBreakPoint=function(t,e){var i=t.rbNext;if(i)return this.leftBreakPoint(i,e);var n=t.site;return n.y===e?n.x:1/0},n.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t),this.beachsectionJunkyard.push(t)},n.prototype.removeBeachsection=function(t){var e=t.circleEvent,i=e.x,n=e.ycenter,r=this.createVertex(i,n),o=t.rbPrevious,s=t.rbNext,a=[t],l=Math.abs;this.detachBeachsection(t);for(var h=o;h.circleEvent&&l(i-h.circleEvent.x)<1e-9&&l(n-h.circleEvent.ycenter)<1e-9;)o=h.rbPrevious,a.unshift(h),this.detachBeachsection(h),h=o;a.unshift(h),this.detachCircleEvent(h);for(var c=s;c.circleEvent&&l(i-c.circleEvent.x)<1e-9&&l(n-c.circleEvent.ycenter)<1e-9;)s=c.rbNext,a.push(c),this.detachBeachsection(c),c=s;a.push(c),this.detachCircleEvent(c);var d,u=a.length;for(d=1;d<u;d++)c=a[d],h=a[d-1],this.setEdgeStartpoint(c.edge,h.site,c.site,r);h=a[0],(c=a[u-1]).edge=this.createEdge(h.site,c.site,void 0,r),this.attachCircleEvent(h),this.attachCircleEvent(c)},n.prototype.addBeachsection=function(t){for(var e,i,n,r,o=t.x,s=t.y,a=this.beachline.root;a;)if((n=this.leftBreakPoint(a,s)-o)>1e-9)a=a.rbLeft;else{if(!((r=o-this.rightBreakPoint(a,s))>1e-9)){n>-1e-9?(e=a.rbPrevious,i=a):r>-1e-9?(e=a,i=a.rbNext):e=i=a;break}if(!a.rbRight){e=a;break}a=a.rbRight}var l=this.createBeachsection(t);if(this.beachline.rbInsertSuccessor(e,l),e||i){if(e===i)return this.detachCircleEvent(e),i=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(l,i),l.edge=i.edge=this.createEdge(e.site,l.site),this.attachCircleEvent(e),void this.attachCircleEvent(i);if(!e||i){if(e!==i){this.detachCircleEvent(e),this.detachCircleEvent(i);var h=e.site,c=h.x,d=h.y,u=t.x-c,g=t.y-d,p=i.site,f=p.x-c,y=p.y-d,v=2*(u*y-g*f),m=u*u+g*g,b=f*f+y*y,_=this.createVertex((y*m-g*b)/v+c,(u*b-f*m)/v+d);return this.setEdgeStartpoint(i.edge,h,p,_),l.edge=this.createEdge(h,t,void 0,_),i.edge=this.createEdge(t,p,void 0,_),this.attachCircleEvent(e),void this.attachCircleEvent(i)}}else l.edge=this.createEdge(e.site,l.site)}},n.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},n.prototype.attachCircleEvent=function(t){var e=t.rbPrevious,i=t.rbNext;if(e&&i){var n=e.site,r=t.site,o=i.site;if(n!==o){var s=r.x,a=r.y,l=n.x-s,h=n.y-a,c=o.x-s,d=o.y-a,u=2*(l*d-h*c);if(!(u>=-2e-12)){var g=l*l+h*h,p=c*c+d*d,f=(d*g-h*p)/u,y=(l*p-c*g)/u,v=y+a,m=this.circleEventJunkyard.pop();m||(m=new this.CircleEvent),m.arc=t,m.site=r,m.x=f+s,m.y=v+this.sqrt(f*f+y*y),m.ycenter=v,t.circleEvent=m;for(var b=null,_=this.circleEvents.root;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.rbLeft){b=_.rbPrevious;break}_=_.rbLeft}else{if(!_.rbRight){b=_;break}_=_.rbRight}this.circleEvents.rbInsertSuccessor(b,m),b||(this.firstCircleEvent=m)}}}},n.prototype.detachCircleEvent=function(t){var e=t.circleEvent;e&&(e.rbPrevious||(this.firstCircleEvent=e.rbNext),this.circleEvents.rbRemoveNode(e),this.circleEventJunkyard.push(e),t.circleEvent=null)},n.prototype.connectEdge=function(t,e){var i=t.vb;if(i)return!0;var n,r,o=t.va,s=e.xl,a=e.xr,l=e.yt,h=e.yb,c=t.lSite,d=t.rSite,u=c.x,g=c.y,p=d.x,f=d.y,y=(u+p)/2,v=(g+f)/2;if(this.cells[c.voronoiId].closeMe=!0,this.cells[d.voronoiId].closeMe=!0,f!==g&&(r=v-(n=(u-p)/(f-g))*y),void 0===n){if(y<s||y>=a)return!1;if(u>p){if(!o||o.y<l)o=this.createVertex(y,l);else if(o.y>=h)return!1;i=this.createVertex(y,h)}else{if(!o||o.y>h)o=this.createVertex(y,h);else if(o.y<l)return!1;i=this.createVertex(y,l)}}else if(n<-1||n>1)if(u>p){if(!o||o.y<l)o=this.createVertex((l-r)/n,l);else if(o.y>=h)return!1;i=this.createVertex((h-r)/n,h)}else{if(!o||o.y>h)o=this.createVertex((h-r)/n,h);else if(o.y<l)return!1;i=this.createVertex((l-r)/n,l)}else if(g<f){if(!o||o.x<s)o=this.createVertex(s,n*s+r);else if(o.x>=a)return!1;i=this.createVertex(a,n*a+r)}else{if(!o||o.x>a)o=this.createVertex(a,n*a+r);else if(o.x<s)return!1;i=this.createVertex(s,n*s+r)}return t.va=o,t.vb=i,!0},n.prototype.clipEdge=function(t,e){var i=t.va.x,n=t.va.y,r=0,o=1,s=t.vb.x-i,a=t.vb.y-n,l=i-e.xl;if(0===s&&l<0)return!1;var h=-l/s;if(s<0){if(h<r)return!1;h<o&&(o=h)}else if(s>0){if(h>o)return!1;h>r&&(r=h)}if(l=e.xr-i,0===s&&l<0)return!1;if(h=l/s,s<0){if(h>o)return!1;h>r&&(r=h)}else if(s>0){if(h<r)return!1;h<o&&(o=h)}if(l=n-e.yt,0===a&&l<0)return!1;if(h=-l/a,a<0){if(h<r)return!1;h<o&&(o=h)}else if(a>0){if(h>o)return!1;h>r&&(r=h)}if(l=e.yb-n,0===a&&l<0)return!1;if(h=l/a,a<0){if(h>o)return!1;h>r&&(r=h)}else if(a>0){if(h<r)return!1;h<o&&(o=h)}return r>0&&(t.va=this.createVertex(i+r*s,n+r*a)),o<1&&(t.vb=this.createVertex(i+o*s,n+o*a)),(r>0||o<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},n.prototype.clipEdges=function(t){for(var e,i=this.edges,n=i.length,r=Math.abs;n--;)e=i[n],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||r(e.va.x-e.vb.x)<1e-9&&r(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,i.splice(n,1))},n.prototype.closeCells=function(t){for(var e,i,n,r,o,s,a,l,h,c=t.xl,d=t.xr,u=t.yt,g=t.yb,p=this.cells,f=p.length,y=Math.abs;f--;)if((e=p[f]).prepareHalfedges()&&e.closeMe){for(r=(n=e.halfedges).length,i=0;i<r;){if(s=n[i].getEndpoint(),l=n[(i+1)%r].getStartpoint(),y(s.x-l.x)>=1e-9||y(s.y-l.y)>=1e-9)switch(!0){case this.equalWithEpsilon(s.x,c)&&this.lessThanWithEpsilon(s.y,g):if(h=this.equalWithEpsilon(l.x,c),a=this.createVertex(c,h?l.y:g),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;s=a;case this.equalWithEpsilon(s.y,g)&&this.lessThanWithEpsilon(s.x,d):if(h=this.equalWithEpsilon(l.y,g),a=this.createVertex(h?l.x:d,g),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;s=a;case this.equalWithEpsilon(s.x,d)&&this.greaterThanWithEpsilon(s.y,u):if(h=this.equalWithEpsilon(l.x,d),a=this.createVertex(d,h?l.y:u),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;s=a;case this.equalWithEpsilon(s.y,u)&&this.greaterThanWithEpsilon(s.x,c):if(h=this.equalWithEpsilon(l.y,u),a=this.createVertex(h?l.x:c,u),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;if(s=a,h=this.equalWithEpsilon(l.x,c),a=this.createVertex(c,h?l.y:g),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;if(s=a,h=this.equalWithEpsilon(l.y,g),a=this.createVertex(h?l.x:d,g),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;if(s=a,h=this.equalWithEpsilon(l.x,d),a=this.createVertex(d,h?l.y:u),o=this.createBorderEdge(e.site,s,a),i++,n.splice(i,0,this.createHalfedge(o,e.site,null)),r++,h)break;default:throw"Voronoi.closeCells() > this makes no sense!"}i++}e.closeMe=!1}},n.prototype.quantizeSites=function(t){for(var e,i=this.ε,n=t.length;n--;)(e=t[n]).x=Math.floor(e.x/i)*i,e.y=Math.floor(e.y/i)*i},n.prototype.recycle=function(t){if(t){if(!(t instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=t}},n.prototype.compute=function(t,e){var i=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var n=t.slice(0);n.sort(function(t,e){var i=e.y-t.y;return i||e.x-t.x});for(var r,o,s,a=n.pop(),l=0,h=this.cells;;)if(s=this.firstCircleEvent,a&&(!s||a.y<s.y||a.y===s.y&&a.x<s.x))a.x===r&&a.y===o||(h[l]=this.createCell(a),a.voronoiId=l++,this.addBeachsection(a),o=a.y,r=a.x),a=n.pop();else{if(!s)break;this.removeBeachsection(s.arc)}this.clipEdges(e),this.closeCells(e);var c=new Date,d=new this.Diagram;return d.cells=this.cells,d.edges=this.edges,d.vertices=this.vertices,d.execTime=c.getTime()-i.getTime(),this.reset(),d},e.exports=n},{}]},{},[1])(1)}),window.QueryLine=class{constructor(t,e){this.to_html=this.to_html.bind(this),this.create_highlighting_box=this.create_highlighting_box.bind(this),this.link=t,this.sparql_text=e}to_html(){var t,e,i,n,r,o;return n=document.createElement("div"),"concept"===this.link.link_type?(n.append(this.create_highlighting_box(this.link.node_var1)),(e=document.createElement("div")).innerHTML="rdf:type "+this.link.node_concept.data("label")+" .",n.append(e)):(n.append(this.create_highlighting_box(this.link.source)),(i=document.createElement("div")).innerHTML=this.link.node_link.data("label")+"&nbsp;",n.append(i),n.append(this.create_highlighting_box(this.link.target)),(e=document.createElement("div")).innerHTML=" .",n.append(e)),(t=document.createElement("div")).style.visibility="hidden","concept"!==this.link.link_type&&((o=document.createElement("div")).innerHTML="🔄",o.style.color="#ADD8E6",o.style.fontSize="large",o.style.marginLeft="8px",o.style.display="inline-block",o.onclick=(()=>(this.link.reverse(),this.sparql_text.update())),t.append(o)),(r=document.createElement("div")).innerHTML="❎",r.style.color="#F08080",r.style.fontSize="large",r.style.marginLeft="8px",r.style.display="inline-block",r.onclick=(()=>(this.link.delete(),this.sparql_text.update())),t.append(r),n.append(t),n.onmouseover=(()=>t.style.visibility="visible"),n.onmouseout=(()=>t.style.visibility="hidden"),n.className="q_line",n}create_highlighting_box(t){var e,i;return(e=document.createElement("div")).className="highlighting_box_container",(i=document.createElement("div")).className="highlighting_box",i.id=t.id()+Math.round(1e3*Math.random()),i.dataset.prevname=t.id(),i.dataset.node_id=t.id(),i.ondblclick=(()=>(i.setAttribute("contenteditable","true"),this.sparql_text.cy.center(t),setTimeout(()=>i.focus(),0),i.onkeydown=(e=>{if(t.data("label",i.innerHTML),13===e.keyCode)return e.preventDefault(),i.innerHTML.length<=2&&(i.innerHTML=t.id()),i.setAttribute("contenteditable","false"),this.sparql_text.update()}))),i.onmouseover=function(e){return t.addClass("highlight")},i.onmouseout=function(e){return t.removeClass("highlight")},i.onclick=(e=>(this.sparql_text.cy.nodes().unselect(),t.select())),i.innerHTML=t.data("label"),i.style.backgroundColor=t.data("color"),e.append(i),e}},window.SparqlText=function(){var t,e;return e=[],t=null,null,null,class{constructor(i,n){this.create_highlighting_box=this.create_highlighting_box.bind(this),this.remove_from_select_boxes=this.remove_from_select_boxes.bind(this),this.generate_plaintext_query=this.generate_plaintext_query.bind(this),this.copy_to_clipboard=this.copy_to_clipboard.bind(this),this.add_filter=this.add_filter.bind(this),this.update=this.update.bind(this),(t=document.getElementById("sparql_textbox")).className="unselectable",this.select_boxes=e,this.cy=i,this.links=n,this.filters=[]}add_to_select(t){return e.push(t),this.update()}create_tab(){var t;return(t=document.createElement("div")).innerHTML="&nbsp;",t}rename(t){var i,n,r,o;for(r=this.cy.getElementById(t.dataset.node_id),i=n=0,o=e.length;0<=o?n<o:n>o;i=0<=o?++n:--n)e[i]===t.dataset.prevname&&(e[i]=t.innerHTML.substr(i));return r.data("label",t.innerHTML.substr(1))}create_highlighting_box(t){var e,i,n;return(e=document.createElement("div")).className="highlighting_box_container",(n=document.createElement("div")).className="highlighting_box",n.id=t.id()+Math.round(1e3*Math.random()),n.dataset.prevname=t.id(),n.dataset.node_id=t.id(),n.ondblclick=(()=>(n.setAttribute("contenteditable","true"),this.cy.center(t),setTimeout(()=>n.focus(),0),n.onkeydown=(e=>{if(t.data("label",n.innerHTML),13===e.keyCode)return e.preventDefault(),n.innerHTML.length<=2&&(n.innerHTML=t.id()),n.setAttribute("contenteditable","false"),this.update()}))),n.onmouseover=function(e){return t.addClass("highlight")},n.onmouseout=function(e){return t.removeClass("highlight")},n.onclick=(e=>(this.cy.nodes().unselect(),t.select())),n.innerHTML=t.data("label"),n.style.backgroundColor=t.data("color"),e.append(n),(i=document.createElement("div")).innerHTML=" x ",i.className="minicross",i.dataset.linkedhbox=n.id,i.dataset.node_id=n.dataset.node_id,i.style.visibility="hidden",i.onclick=(t=>this.remove_from_select_boxes(i.dataset.node_id)),e.append(i),e.onmouseover=function(t){return i.style.visibility="visible"},e.onmouseout=function(t){return i.style.visibility="hidden"},e}remove_from_select_boxes(t){return e=e.filter(function(e){return e!==t}),this.update()}generate_plaintext_query(){var t,i,n,r,o,s,a,l,h,c;if(c="Select ",0===e.length)c+="*";else for(i=0,o=e.length;i<o;i++)c+="?"+e[i]+" ";for(c+="\r\nwhere {",n=0,s=(l=document.getElementsByClassName("q_line")).length;n<s;n++)for(c+="\r\n",t=0,r=0,a=(h=l[n].getElementsByClassName("highlighting_box")).length;r<a;r++)c+=h[r].innerHTML+" ",(t+=1)%3==0&&(c+=" .\r\n");return c+="}",console.log(c),c}copy_to_clipboard(){var t;return(t=document.createElement("textarea")).value=this.generate_plaintext_query(),t.id="tmp_div",document.body.appendChild(t),document.getElementById("tmp_div").select(),document.execCommand("Copy"),t.style.display="none",document.body.removeChild(t)}add_filter(t){return this.filters.push(new window.QueryFilter(t)),this.update()}update(){var i,n,r,o,s,a,l,h,c,d,u,g,p,f,y,v,m,b;if(t.innerHTML="",(s=document.createElement("div")).className="init_string",(v=document.createElement("div")).className="s_line",0===e.length)v.innerHTML="&nbsp;*";else for(v.append(this.create_tab()),a=0,c=e.length;a<c;a++)i=e[a],void 0!==this.cy.getElementById(i).id()&&v.append(this.create_highlighting_box(this.cy.getElementById(i)));for((m=document.createElement("div")).innerHTML="Select ",s.append(m),s.append(v),s.append(document.createElement("br")),(b=document.createElement("div")).innerHTML=" where {",s.append(b),t.append(s),l=0,d=(f=this.links).length;l<d;l++)g=f[l],p=new window.QueryLine(g,this),t.append(p.to_html());for(h=0,u=(y=this.filters).length;h<u;h++)r=y[h],t.append(r.to_html());return(n=document.createElement("div")).style.display="inline-block",n.style.marginRight="5px",n.innerHTML="} ",t.append(n),(o=document.createElement("div")).className="filter_button",o.innerHTML="+ filter",o.onclick=(()=>this.add_filter()),t.append(o),dragula([v])}}}.call(this),window.Void=class{constructor(){this.to_html=this.to_html.bind(this),this.div=document.createElement("div"),this.div.className="void_box",this.div.innerHTML="&nbsp;&nbsp;&nbsp;"}to_html(){return this.div}};