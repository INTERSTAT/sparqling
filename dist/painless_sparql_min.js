var palette,state_buffer_max_length;palette=["b58900","cb4b16","dc322f","d33682","6c71c4","268bd2","2aa198","859900"],state_buffer_max_length=20,function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dragula=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";var i={},r="(?:^|\\s)",o="(?:\\s|$)";function a(e){var t=i[e];return t?t.lastIndex=0:i[e]=t=new RegExp(r+e+o,"g"),t}t.exports={add:function(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(a(t)," ").trim()}}},{}],2:[function(e,t,n){(function(n){"use strict";var i=e("contra/emitter"),r=e("crossvent"),o=e("./classes"),a=document,s=a.documentElement;function l(e,t,i,o){n.navigator.pointerEnabled?r[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],o):n.navigator.msPointerEnabled?r[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],o):(r[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],o),r[t](e,i,o))}function d(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function c(e,t){return void 0!==n[t]?n[t]:s.clientHeight?s[e]:a.body[e]}function u(e,t,n){var i,r=e||{},o=r.className;return r.className+=" gu-hide",i=a.elementFromPoint(t,n),r.className=o,i}function h(){return!1}function f(){return!0}function p(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===a?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(v(t))}(e)}function b(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function y(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}t.exports=function(e,t){var n,_,x,w,k,E,C,S,L,M,P;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var T,A=null,q=t||{};void 0===q.moves&&(q.moves=f),void 0===q.accepts&&(q.accepts=f),void 0===q.invalid&&(q.invalid=function(){return!1}),void 0===q.containers&&(q.containers=e||[]),void 0===q.isContainer&&(q.isContainer=h),void 0===q.copy&&(q.copy=!1),void 0===q.copySortSource&&(q.copySortSource=!1),void 0===q.revertOnSpill&&(q.revertOnSpill=!1),void 0===q.removeOnSpill&&(q.removeOnSpill=!1),void 0===q.direction&&(q.direction="vertical"),void 0===q.ignoreInputTextSelection&&(q.ignoreInputTextSelection=!0),void 0===q.mirrorContainer&&(q.mirrorContainer=a.body);var H=i({containers:q.containers,start:function(e){var t=j(e);t&&D(t)},end:W,cancel:Q,remove:$,destroy:function(){R(!0),X({})},canMove:function(e){return!!j(e)},dragging:!1});return!0===q.removeOnSpill&&H.on("over",function(e){o.rm(e,"gu-hide")}).on("out",function(e){H.dragging&&o.add(e,"gu-hide")}),R(),H;function I(e){return-1!==H.containers.indexOf(e)||q.isContainer(e)}function R(e){var t=e?"remove":"add";l(s,t,"mousedown",F),l(s,t,"mouseup",X)}function N(e){l(s,e?"remove":"add","mousemove",B)}function O(e){var t=e?"remove":"add";r[t](s,"selectstart",z),r[t](s,"click",z)}function z(e){T&&e.preventDefault()}function F(e){if(E=e.clientX,C=e.clientY,1===d(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,n=j(t);n&&(T=n,N(),"mousedown"===e.type&&(m(t)?t.focus():e.preventDefault()))}}function B(e){if(T)if(0!==d(e)){if(void 0===e.clientX||e.clientX!==E||void 0===e.clientY||e.clientY!==C){if(q.ignoreInputTextSelection){var t=y("clientX",e),i=y("clientY",e);if(m(a.elementFromPoint(t,i)))return}var r=T;N(!0),O(),W(),D(r);var u,h={left:(u=x.getBoundingClientRect()).left+c("scrollLeft","pageXOffset"),top:u.top+c("scrollTop","pageYOffset")};w=y("pageX",e)-h.left,k=y("pageY",e)-h.top,o.add(M||x,"gu-transit"),function(){if(!n){var e=x.getBoundingClientRect();(n=x.cloneNode(!0)).style.width=p(e)+"px",n.style.height=g(e)+"px",o.rm(n,"gu-transit"),o.add(n,"gu-mirror"),q.mirrorContainer.appendChild(n),l(s,"add","mousemove",Z),o.add(q.mirrorContainer,"gu-unselectable"),H.emit("cloned",n,x,"mirror")}}(),Z(e)}}else X({})}function j(e){if(!(H.dragging&&n||I(e))){for(var t=e;v(e)&&!1===I(v(e));){if(q.invalid(e,t))return;if(!(e=v(e)))return}var i=v(e);if(i&&!q.invalid(e,t)&&q.moves(e,i,t,b(e)))return{item:e,source:i}}}function D(e){var t,n;t=e.item,n=e.source,("boolean"==typeof q.copy?q.copy:q.copy(t,n))&&(M=e.item.cloneNode(!0),H.emit("cloned",M,e.item,"copy")),_=e.source,x=e.item,S=L=b(e.item),H.dragging=!0,H.emit("drag",x,_)}function W(){if(H.dragging){var e=M||x;U(e,v(e))}}function Y(){T=!1,N(!0),O(!0)}function X(e){if(Y(),H.dragging){var t=M||x,i=y("clientX",e),r=y("clientY",e),o=J(u(n,i,r),i,r);o&&(M&&q.copySortSource||!M||o!==_)?U(t,o):q.removeOnSpill?$():Q()}}function U(e,t){var n=v(e);M&&q.copySortSource&&t===_&&n.removeChild(x),G(t)?H.emit("cancel",e,_,_):H.emit("drop",e,t,_,L),V()}function $(){if(H.dragging){var e=M||x,t=v(e);t&&t.removeChild(e),H.emit(M?"cancel":"remove",e,t,_),V()}}function Q(e){if(H.dragging){var t=arguments.length>0?e:q.revertOnSpill,n=M||x,i=v(n),r=G(i);!1===r&&t&&(M?i&&i.removeChild(M):_.insertBefore(n,S)),r||t?H.emit("cancel",n,_,_):H.emit("drop",n,i,_,L),V()}}function V(){var e=M||x;Y(),n&&(o.rm(q.mirrorContainer,"gu-unselectable"),l(s,"remove","mousemove",Z),v(n).removeChild(n),n=null),e&&o.rm(e,"gu-transit"),P&&clearTimeout(P),H.dragging=!1,A&&H.emit("out",e,A,_),H.emit("dragend",e),_=x=M=S=L=P=A=null}function G(e,t){var i;return i=void 0!==t?t:n?L:b(M||x),e===_&&i===S}function J(e,t,n){for(var i=e;i&&!r();)i=v(i);return i;function r(){if(!1===I(i))return!1;var r=K(i,e),o=ee(i,r,t,n);return!!G(i,o)||q.accepts(x,i,_,o)}}function Z(e){if(n){e.preventDefault();var t=y("clientX",e),i=y("clientY",e),r=t-w,o=i-k;n.style.left=r+"px",n.style.top=o+"px";var a=M||x,s=u(n,t,i),l=J(s,t,i),d=null!==l&&l!==A;(d||null===l)&&(A&&p("out"),A=l,d&&p("over"));var c=v(a);if(l!==_||!M||q.copySortSource){var h,f=K(l,s);if(null!==f)h=ee(l,f,t,i);else{if(!0!==q.revertOnSpill||M)return void(M&&c&&c.removeChild(a));h=S,l=_}(null===h&&d||h!==a&&h!==b(a))&&(L=h,l.insertBefore(a,h),H.emit("shadow",a,l,_))}else c&&c.removeChild(a)}function p(e){H.emit(e,a,A,_)}}function K(e,t){for(var n=t;n!==e&&v(n)!==e;)n=v(n);return n===s?null:n}function ee(e,t,n,i){var r,o="horizontal"===q.direction;return t!==e?(r=t.getBoundingClientRect(),a(o?n>r.left+p(r)/2:i>r.top+g(r)/2)):function(){var t,r,a,s=e.children.length;for(t=0;t<s;t++){if(r=e.children[t],a=r.getBoundingClientRect(),o&&a.left+a.width/2>n)return r;if(!o&&a.top+a.height/2>i)return r}return null}();function a(e){return e?b(t):t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],4:[function(e,t,n){"use strict";var i=e("ticky");t.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},{ticky:9}],5:[function(e,t,n){"use strict";var i=e("atoa"),r=e("./debounce");t.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete o[t];else if(0===i)o={};else{var r=o[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=i(arguments),s=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===o.length?o[0]:o;return a.forEach(function(i){n.async?r(i,o,s):i.apply(s,o),i._once&&e.off(t,i)}),e}},e}},{"./debounce":4,atoa:3}],6:[function(e,t,n){(function(n){"use strict";var i=e("custom-event"),r=e("./eventmap"),o=n.document,a=function(e,t,n,i){return e.addEventListener(t,n,i)},s=function(e,t,n,i){return e.removeEventListener(t,n,i)},l=[];function d(e,t,n){var i=function(e,t,n){var i,r;for(i=0;i<l.length;i++)if((r=l[i]).element===e&&r.type===t&&r.fn===n)return i}(e,t,n);if(i){var r=l[i].wrapper;return l.splice(i,1),r}}n.addEventListener||(a=function(e,t,i){return e.attachEvent("on"+t,function(e,t,i){var r=d(e,t,i)||function(e,t,i){return function(t){var r=t||n.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,i.call(e,r)}}(e,0,i);return l.push({wrapper:r,element:e,type:t,fn:i}),r}(e,t,i))},s=function(e,t,n){var i=d(e,t,n);if(i)return e.detachEvent("on"+t,i)}),t.exports={add:a,remove:s,fabricate:function(e,t,n){var a=-1===r.indexOf(t)?new i(t,{detail:n}):function(){var e;o.createEvent?(e=o.createEvent("Event")).initEvent(t,!0,!0):o.createEventObject&&(e=o.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,t,n){(function(e){"use strict";var n=[],i="",r=/^on/;for(i in e)r.test(i)&&n.push(i.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){(function(e){var n=e.CustomEvent;t.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){var i;i="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=i},{}]},{},[2])(2)}),window.PainlessUtils=class{constructor(){this.a=0}generate_style(){return(new cytoscape.stylesheet).selector("edge").style({"curve-style":"bezier",width:3,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","arrow-scale":1.5,"line-color":"#839496","font-family":"Courier New","font-size":"10","text-outline-color":"#fdf6e3","text-outline-width":"2px",color:"#002b36"}).selector(".source-edge").style({"target-arrow-shape":"square","target-arrow-fill":"hollow","target-arrow-color":"#002b36"}).selector(".target-edge").style({"target-arrow-shape":"square","target-arrow-color":"#002b36"}).selector(".edge-datatype").style({"line-style":"dotted"}).selector(".edge-concept").style({content:"rdf:type"}).selector("node").style({"background-color":"black",shape:"rectangle"}).selector(".node-domain").style({"background-color":"#002b36","border-color":"#002b36","border-style":"solid","border-width":"0.5px",width:15,height:15}).selector(".node-range").style({"background-color":"#fdf6e3","border-color":"#002b36","border-style":"solid","border-width":"2px",width:15,height:15}).selector(".node-datatype").style({shape:"ellipse","background-color":"#93a1a1",content:"data(label)","text-valign":"center","font-family":"Courier New","font-size":"12",width:15,height:15}).selector(".node-role").style({shape:"diamond","background-color":"#fdf6e3","border-style":"solid","border-color":"#002b36",color:"#002b36","border-width":"4px",content:"data(label)","text-valign":"center","font-family":"Courier New","text-outline-color":"#fdf6e3","text-outline-width":"3px",width:90,height:60}).selector(".node-attribute").style({shape:"ellipse","background-color":"#fdf6e3","border-style":"solid","border-color":"#002b36",color:"#002b36","border-width":"4px",content:"data(label)","text-valign":"center","font-family":"Courier New","text-outline-color":"#fdf6e3","text-outline-width":"3px",width:30,height:30}).selector(".node-variable").style({shape:"ellipse","background-color":function(e){return e.data("color")},width:function(e){return 100},height:function(e){return 100},"text-valign":"center","font-size":"30","font-family":"Courier New",color:"#fdf6e3","text-outline-color":function(e){return e.data("color")},"text-outline-width":"5px",content:"data(label)"}).selector(".node-constant-value").style({shape:"ellipse","background-color":function(e){return e.data("color")},width:function(e){return 100},height:function(e){return 100},"text-valign":"center","font-size":"20","font-family":"Courier New",color:"#fdf6e3","text-outline-color":"#fdf6e3","text-outline-width":"0px",content:"data(label)"}).selector(".node-constant-object").style({shape:"ellipse","background-color":function(e){return e.data("color")},width:function(e){return 100},height:function(e){return 100},"text-valign":"center","font-size":"20","font-family":"Courier New",color:"#fdf6e3","text-outline-color":"#fdf6e3","text-outline-width":"0px",content:"data(label)"}).selector(".node-concept").style({shape:"rectangle","background-color":"#073642",content:"data(label)","text-valign":"center",width:function(e){return 10*e.data("label").length+50},height:"80","border-color":"#073642","border-width":"2px","font-family":"Courier New","font-size":"20",color:"#fdf6e3","border-style":"solid"}).selector("node.highlight").style({"border-color":"#333","border-opacity":"0.5","border-width":"20px","border-style":"solid"}).selector("node:selected").style({"border-color":"#daa","border-opacity":"0.5","border-width":"20px","border-style":"solid"})}},function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("webcola")):"function"==typeof define&&define.amd?define(["webcola"],t):"object"==typeof exports?exports.cytoscapeCola=t(require("webcola")):e.cytoscapeCola=t(e.webcola)}(this,function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1),o=n(2),a=n(5)||("undefined"!=typeof window?window.cola:null),s=n(4),l=function(e){return(void 0===e?"undefined":i(e))===i(0)},d=function(){},c=function(e,t){var n;return null!=(n=e)&&(void 0===n?"undefined":i(n))===i(function(){})?e.apply(t,[t]):e};function u(e){this.options=r({},o,e)}u.prototype.run=function(){var e=this,t=this.options;e.manuallyStopped=!1;var n=t.cy,r=t.eles,o=r.nodes(),u=r.edges(),h=!1,f=o.filter(function(e){return e.isParent()}),p=o.subtract(f),g=t.boundingBox||{x1:0,y1:0,w:n.width(),h:n.height()};void 0===g.x2&&(g.x2=g.x1+g.w),void 0===g.w&&(g.w=g.x2-g.x1),void 0===g.y2&&(g.y2=g.y1+g.h),void 0===g.h&&(g.h=g.y2-g.y1);var v=function(){for(var e=0;e<o.length;e++){var i=o[e],r=i.layoutDimensions(t),a=i.scratch("cola");if(!a.updatedDims){var s=c(t.nodeSpacing,i);a.width=r.w+2*s,a.height=r.h+2*s}}o.positions(function(e){var t=e.scratch().cola,n=void 0;return!e.grabbed()&&p.contains(e)&&(n={x:g.x1+t.x,y:g.y1+t.y},l(n.x)&&l(n.y)||(n=void 0)),n}),o.updateCompoundBounds(),h||(b(),h=!0),t.fit&&n.fit(t.padding)},m=function(){t.ungrabifyWhileSimulating&&x.grabify(),n.off("destroy",w),o.off("grab free position",k),o.off("lock unlock",E),e.one("layoutstop",t.stop),e.trigger({type:"layoutstop",layout:e})},b=function(){e.one("layoutready",t.ready),e.trigger({type:"layoutready",layout:e})},y=t.refresh;y=t.refresh<0?1:Math.max(1,y);var _=e.adaptor=a.adaptor({trigger:function(e){var n=a.EventType?a.EventType.tick:null,i=a.EventType?a.EventType.end:null;switch(e.type){case"tick":case n:t.animate&&v();break;case"end":case i:v(),t.infinite||m()}},kick:function(){var n=function(){if(e.manuallyStopped)return m(),!0;var n=_.tick();return n&&t.infinite&&_.resume(),n};if(t.animate){s(function e(){(function(){for(var e=void 0,t=0;t<y&&!e;t++)e=e||n();return e})()||s(e)})}else for(;!n(););},on:d,drag:d});e.adaptor=_;var x=o.filter(":grabbable");t.ungrabifyWhileSimulating&&x.ungrabify();var w=void 0;n.one("destroy",w=function(){e.stop()});var k=void 0;o.on("grab free position",k=function(e){var t=this.scratch().cola,n=this.position();if(e.cyTarget===this||e.target===this)switch(e.type){case"grab":_.dragstart(t);break;case"free":_.dragend(t);break;case"position":t.px===n.x-g.x1&&t.py===n.y-g.y1||(t.px=n.x-g.x1,t.py=n.y-g.y1)}});var E=void 0;o.on("lock unlock",E=function(){var e=this.scratch().cola;e.fixed=this.locked(),this.locked()?_.dragstart(e):_.dragend(e)}),_.nodes(p.map(function(e,n){var i=c(t.nodeSpacing,e),r=e.position(),o=e.layoutDimensions(t);return e.scratch().cola={x:t.randomize||void 0===r.x?Math.round(Math.random()*g.w):r.x,y:t.randomize||void 0===r.y?Math.round(Math.random()*g.h):r.y,width:o.w+2*i,height:o.h+2*i,index:n,fixed:e.locked()}}));var C=[];if(t.alignment){var S=[],L=[];p.forEach(function(e){var n=c(t.alignment,e),i=e.scratch().cola.index;n&&(null!=n.x&&S.push({node:i,offset:n.x}),null!=n.y&&L.push({node:i,offset:n.y}))}),S.length>0&&C.push({type:"alignment",axis:"x",offsets:S}),L.length>0&&C.push({type:"alignment",axis:"y",offsets:L})}t.gapInequalities&&t.gapInequalities.forEach(function(e){var t=e.left.scratch().cola.index,n=e.right.scratch().cola.index;C.push({axis:e.axis,left:t,right:n,gap:e.gap,equality:e.equality})}),C.length>0&&_.constraints(C),_.groups(f.map(function(e,n){var i=c(t.nodeSpacing,e),r=function(t){return parseFloat(e.style("padding-"+t))},o=r("left")+i,a=r("right")+i,s=r("top")+i,l=r("bottom")+i;return e.scratch().cola={index:n,padding:Math.max(o,a,s,l),leaves:e.children().intersection(p).map(function(e){return e[0].scratch().cola.index}),fixed:e.locked()},e}).map(function(e){return e.scratch().cola.groups=e.children().intersection(f).map(function(e){return e.scratch().cola.index}),e.scratch().cola}));var M=void 0,P=void 0;null!=t.edgeLength?(M=t.edgeLength,P="linkDistance"):null!=t.edgeSymDiffLength?(M=t.edgeSymDiffLength,P="symmetricDiffLinkLengths"):null!=t.edgeJaccardLength?(M=t.edgeJaccardLength,P="jaccardLinkLengths"):(M=100,P="linkDistance");var T;if(_.links(u.stdFilter(function(e){return p.contains(e.source())&&p.contains(e.target())}).map(function(e){var t=e.scratch().cola={source:e.source()[0].scratch().cola.index,target:e.target()[0].scratch().cola.index};return null!=M&&(t.calcLength=c(M,e)),t})),_.size([g.w,g.h]),null!=M&&_[P](function(e){return e.calcLength}),t.flow){var A=void 0;(void 0===(T=t.flow)?"undefined":i(T))===i("")?A={axis:t.flow,minSeparation:50}:l(t.flow)?A={axis:"y",minSeparation:t.flow}:!function(e){return null!=e&&(void 0===e?"undefined":i(e))===i({})}(t.flow)?A={axis:"y",minSeparation:50}:((A=t.flow).axis=A.axis||"y",A.minSeparation=null!=A.minSeparation?A.minSeparation:50),_.flowLayout(A.axis,A.minSeparation)}return e.trigger({type:"layoutstart",layout:e}),_.avoidOverlaps(t.avoidOverlap).handleDisconnected(t.handleDisconnected).start(t.unconstrIter,t.userConstIter,t.allConstIter),t.infinite||setTimeout(function(){e.manuallyStopped||_.stop()},t.maxSimulationTime),this},u.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e.exports=u},function(e,t,n){"use strict";e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach(function(t){Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}},function(e,t,n){"use strict";var i={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(e){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};e.exports=i},function(e,t,n){"use strict";var i=n(0),r=function(e){e&&e("layout","cola",i)};"undefined"!=typeof cytoscape&&r(cytoscape),e.exports=r},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=void 0;r="undefined"!==("undefined"==typeof window?"undefined":i(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame:function(e){e()},e.exports=r},function(t,n){t.exports=e}])}),window.PainlessContextMenu=class{constructor(e,t){this.init=this.init.bind(this),this.rename_const=this.rename_const.bind(this),this.rename_var=this.rename_var.bind(this),this.context=t,this.cy=e,this.init()}init(){var e,t,n,i,r,o;return o={selector:".node-variable-full-options",commands:[{content:"delete node",select:e=>{var t,n,i,r,o,a,s;for(s=[],t=0,i=(a=e.data("links")).length;t<i;t++)null!==(o=a[t])&&void 0!==o&&s.push(o);for(n=0,r=s.length;n<r;n++)(o=s[n]).delete();return this.cy.remove(e)}},{content:"center view",select:e=>this.context.center_view(e)},{content:"add node to select statement",select:e=>this.context.add_to_select(e.id())},{content:"rename node",select:e=>this.rename_var(e)}]},r={selector:".node-role",commands:[{content:"reverse",select:e=>(console.log(e.data("links")),e.data("links")[0].reverse())},{content:"delete",select:e=>e.data("links")[0].delete()}]},i={selector:".node-attribute",commands:[{content:"delete",select:e=>e.data("links")[0].delete()}]},e={selector:".attr-range",commands:[{content:"delete",select:e=>e.data("links")[0].delete()},{content:"transform into constant [object]",select:e=>(e.data("color",tinycolor(e.data("color")).desaturate(50).toString()),e.data("label","const[o]"),e.classes("node-constant-object"))},{content:"transform into constant [value]",select:e=>(e.data("color",tinycolor(e.data("color")).desaturate(50).toString()),e.data("label","const[v]"),e.classes("node-constant-value"))}]},t={selector:".node-concept",commands:[{content:"delete",select:e=>e.data("links")[0].delete()}]},n={selector:".node-constant-value",commands:[{content:"define value",select:e=>this.rename_const(e)},{content:"delete",select:e=>e.data("links")[0].delete()}]},{selector:".node-constant-object",commands:[{content:"define value",select:e=>this.rename_const(e)},{content:"delete",select:e=>e.data("links")[0].delete()}]},this.cy.cxtmenu(o),this.cy.cxtmenu(r),this.cy.cxtmenu(i),this.cy.cxtmenu(t),this.cy.cxtmenu(n),this.cy.cxtmenu(e)}rename_const(e){var t,n,i,r,o;return o=e.data("label"),e.data("label",""),t=document.createElement(n),(n=document.createElement("div")).innerHTML=e.data("label").slice(1),n.style.display="inline-block",r=(a=>{if(a.target!==n)return""===n.innerHTML&&(n.innerHTML=o),e.data("label",n.innerHTML),t.parentNode.removeChild(t),document.removeEventListener("click",r),document.removeEventListener("keypress",i)}),i=(a=>{if("Enter"===a.key)return""===n.innerHTML&&(n.innerHTML=o),e.data("label",n.innerHTML),t.parentNode.removeChild(t),document.removeEventListener("click",r),document.removeEventListener("keypress",i)}),document.addEventListener("click",r),document.addEventListener("keypress",i),n.setAttribute("contenteditable",!0),t.appendChild(n),t.style.position="absolute",t.id="rename_div",t.style.top=document.getElementById("query_canvas").getBoundingClientRect().y+e.renderedPosition("y")-e.renderedWidth()/4+"px",t.style.left=document.getElementById("query_canvas").getBoundingClientRect().x+e.renderedPosition("x")-e.renderedWidth()/4+"px",t.style.backgroundColor=e.data("color"),t.style.fontSize="xx-large",t.style.color="#fdf6e3",t.style.borderRadius="100px",t.style.fontFamily="Courier New",t.style.padding="2px",t.style.textAlign="center",document.body.appendChild(t),n.focus()}rename_var(e){var t,n,i,r,o,a;return o=e.data("label").slice(1),e.data("label",""),t=document.createElement(n),(a=document.createElement("div")).innerHTML="?",a.style.display="inline-block",t.appendChild(a),(n=document.createElement("div")).innerHTML=e.data("label").slice(1),n.style.display="inline-block",r=(a=>{if(a.target!==n)return""===n.innerHTML&&(n.innerHTML=o),e.data("label","?"+n.innerHTML),t.parentNode.removeChild(t),document.removeEventListener("click",r),document.removeEventListener("keypress",i)}),i=(a=>{if("Enter"===a.key)return""===n.innerHTML&&(n.innerHTML=o),e.data("label","?"+n.innerHTML),t.parentNode.removeChild(t),document.removeEventListener("click",r),document.removeEventListener("keypress",i)}),document.addEventListener("click",r),document.addEventListener("keypress",i),n.setAttribute("contenteditable",!0),t.appendChild(n),t.style.position="absolute",t.id="rename_div",t.style.top=document.getElementById("query_canvas").getBoundingClientRect().y+e.renderedPosition("y")-e.renderedWidth()/4+"px",t.style.left=document.getElementById("query_canvas").getBoundingClientRect().x+e.renderedPosition("x")-e.renderedWidth()/4+"px",t.style.backgroundColor=e.data("color"),t.style.fontSize="xx-large",t.style.color="#fdf6e3",t.style.borderRadius="100px",t.style.fontFamily="Courier New",t.style.padding="2px",t.style.textAlign="center",document.body.appendChild(t),n.focus()}},function(e,t){"object"==typeof exports?module.exports=t(window,document):e.SimpleScrollbar=t(window,document)}(this,function(e,t){var n=e.requestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)};function i(e){Object.prototype.hasOwnProperty.call(e,"data-simple-scrollbar")||Object.defineProperty(e,"data-simple-scrollbar",{value:new a(e)})}function r(i){for(this.target=i,this.direction=e.getComputedStyle(this.target).direction,this.bar='<div class="ss-scroll">',this.wrapper=t.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper"),this.el=t.createElement("div"),this.el.setAttribute("class","ss-content"),"rtl"===this.direction&&this.el.classList.add("rtl"),this.wrapper.appendChild(this.el);this.target.firstChild;)this.el.appendChild(this.target.firstChild);this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild,function(e,i){var r;function o(e){var t=e.pageY-r;r=e.pageY,n(function(){i.el.scrollTop+=t/i.scrollRatio})}function a(){e.classList.remove("ss-grabbed"),t.body.classList.remove("ss-grabbed"),t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",a)}e.addEventListener("mousedown",function(n){return r=n.pageY,e.classList.add("ss-grabbed"),t.body.classList.add("ss-grabbed"),t.addEventListener("mousemove",o),t.addEventListener("mouseup",a),!1})}(this.bar,this),this.moveBar(),e.addEventListener("resize",this.moveBar.bind(this)),this.el.addEventListener("scroll",this.moveBar.bind(this)),this.el.addEventListener("mouseenter",this.moveBar.bind(this)),this.target.classList.add("ss-container");var r=e.getComputedStyle(i);"0px"===r.height&&"0px"!==r["max-height"]&&(i.style.height=r["max-height"])}function o(){for(var e=t.querySelectorAll("*[ss-container]"),n=0;n<e.length;n++)i(e[n])}r.prototype={moveBar:function(e){var t=this.el.scrollHeight,i=this.el.clientHeight,r=this;this.scrollRatio=i/t;var o="rtl"===r.direction?r.target.clientWidth-r.bar.clientWidth+18:-1*(r.target.clientWidth-r.bar.clientWidth);n(function(){r.scrollRatio>=1?r.bar.classList.add("ss-hidden"):(r.bar.classList.remove("ss-hidden"),r.bar.style.cssText="height:"+Math.max(100*r.scrollRatio,10)+"%; top:"+r.el.scrollTop/t*100+"%;right:"+o+"px;")})}},t.addEventListener("DOMContentLoaded",o),r.initEl=i,r.initAll=o;var a=r;return a}),window.PainlessGraph=function(){var e,t;return t=null,e=[],class{constructor(t){this.reshape=this.reshape.bind(this),this.center_view=this.center_view.bind(this),this.add_to_select=this.add_to_select.bind(this),this.reverse_relationship=this.reverse_relationship.bind(this),this.add_link=this.add_link.bind(this),this.check_collisions=this.check_collisions.bind(this),this.init=this.init.bind(this),this.utils=new window.PainlessUtils,this.context=t,this.links=e,this.init(),this.reshape(),this.sparql_text=new SparqlText(this.cy,e),this.sparql_text.update(),new window.PainlessContextMenu(this.cy,this)}reshape(){return this.cy.layout({name:"cola",fit:!1,refresh:2,maxSimulationTime:2e3,edgeLength:100,avoidOverlap:!0,nodeSpacing:30}).run()}center_view(e=null){return null===e?this.cy.nodes(":selected").length>0?this.cy.center(this.cy.nodes(":selected")):this.cy.fit():this.cy.center(e)}add_to_select(e){return this.sparql_text.add_to_select(e)}copy_to_clipboard(){return this.sparql_text.copy_to_clipboard()}save_state(){if(null===t&&(t=[]),this.cy.json()!==t[t.length-1]&&t.push(this.cy.json()),t.length>=state_buffer_max_length)return t.shift()}undo(){return null===t||t.length<1?console.warn("no saved states"):(this.cy.json(t[t.length-1]),this.cy.style(this.utils.generate_style()),t.pop(),this.reshape())}reverse_relationship(){var e;return null===(e=this.cy.nodes(":selected"))?console.warn("please select a node in the sparql graph"):e.hasClass("node-variable")?console.warn("please select a role and not a variable"):"attribute"===e.data("links").link_type?console.warn("attributes cannot be reversed"):e.hasClass("node-role")||e.hasClass("node-domain")||e.hasClass("node-range")?this.cy.nodes(":selected").data("links").reverse():console.warn("this action cannot be performed on the selected node")}merge(t,n){var i,r,o,a;for(this.save_state(),i=0,r=(a=n.data("links")).length;i<r;i++)"concept"===(o=a[i]).link_type?console.log("a"):o.node_var1===n&&o.node_var2===n?e.push(new PainlessLink(this.cy,o.link_name,o.link_type,t,t)):o.node_var1===n?e.push(new PainlessLink(this.cy,o.link_name,o.link_type,t,o.node_var2)):e.push(new PainlessLink(this.cy,o.link_name,o.link_type,o.node_var1,t)),o.delete();return this.cy.remove(n)}add_link(t,n,i){var r;return this.save_state(),"concept"===n?this.cy.nodes(":selected").length>0&&this.cy.nodes(":selected").hasClass("node-variable")?r=new PainlessLink(this,this.cy,t,n,this.cy.nodes(":selected")):(r=new PainlessLink(this,this.cy,t,n),this.sparql_text.add_to_select(r.node_var1.id())):this.cy.nodes(":selected").length>0&&this.cy.nodes(":selected").hasClass("node-variable")?(r=new PainlessLink(this,this.cy,t,n,this.cy.nodes(":selected"),null,i),this.sparql_text.add_to_select(r.node_var2.id())):(r=new PainlessLink(this,this.cy,t,n,null,null,i),this.sparql_text.add_to_select(r.node_var1.id()),this.sparql_text.add_to_select(r.node_var2.id())),e.push(r),this.sparql_text.update(),this.reshape()}compute_distance(e,t){var n,i;return n=Math.abs(e.position("x")-t.position("x")),i=Math.abs(e.position("y")-t.position("y")),Math.sqrt(n*n+i*i)}check_collisions(){var e,t,n,i,r,o,a,s;for(e=0,n=(a=this.cy.nodes(".node-variable")).length;e<n;e++)for(r=a[e],t=0,i=(s=this.cy.nodes(".node-variable")).length;t<i;t++)if(r!==(o=s[t])){if(this.compute_distance(r,o)<100)return r.addClass("highlight"),o.addClass("highlight"),[r,o];r.removeClass("highlight")}}init(){return this.cy=new cytoscape({container:document.getElementById("query_canvas"),style:this.utils.generate_style(),wheelSensitivity:.5}),this.cy.on("click",".node-variable",e=>(e.target.select(),this.reshape())),this.cy.on("mouseup",e=>{var t;return void 0!==this.check_collisions()&&(t=this.check_collisions(),this.merge(t[0],t[1])),this.reshape()}),this.cy.resize()}}}.call(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cytoscapeCxtmenu=t():e.cytoscapeCxtmenu=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var i=n(2),r=n(1),o=n(3),a=o.removeEles,s=o.setStyles,l=o.createElement,d=o.getPixelRatio,c=o.getOffset;e.exports=function(e){var t=r({},i,e),n=this,o=n.container(),u=void 0,h={options:t,handlers:[],container:l({class:"cxtmenu"})},f=h.container,p=l(),g=l({tag:"canvas"}),v=[],m=g.getContext("2d"),b=t.menuRadius,y=2*(b+t.activePadding),_=void 0,x=void 0;function w(e){C.drawBg=[e]}function k(){var e=d(),t=o.clientWidth,n=o.clientHeight;g.width=t*e,g.height=n*e,g.style.width=t+"px",g.style.height=n+"px",m.setTransform(1,0,0,1,0,0),m.scale(e,e)}o.insertBefore(f,o.firstChild),f.appendChild(p),p.appendChild(g),s(f,{position:"absolute",zIndex:t.zIndex,userSelect:"none"}),s(p,{display:"none",width:y+"px",height:y+"px",position:"absolute",zIndex:1,marginLeft:-t.activePadding+"px",marginTop:-t.activePadding+"px",userSelect:"none"}),g.width=y,g.height=y;var E=!0,C={},S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;k(),function e(){C.drawBg&&function(e){e=void 0!==e?e:O,m.globalCompositeOperation="source-over",m.clearRect(0,0,y,y),m.fillStyle=t.fillColor;for(var n=2*Math.PI/v.length,i=Math.PI/2,r=i+n,o=0;o<v.length;o++){var a=v[o];a.fillColor&&(m.fillStyle=a.fillColor),m.beginPath(),m.moveTo(b+t.activePadding,b+t.activePadding),m.arc(b+t.activePadding,b+t.activePadding,b,2*Math.PI-i,2*Math.PI-r,!0),m.closePath(),m.fill(),i+=n,r+=n,m.fillStyle=t.fillColor}m.globalCompositeOperation="destination-out",m.strokeStyle="white",m.lineWidth=t.separatorWidth,r=(i=Math.PI/2)+n;for(var s=0;s<v.length;s++){var l=b*Math.cos(i),d=b*Math.sin(i);m.beginPath(),m.moveTo(b+t.activePadding,b+t.activePadding),m.lineTo(b+t.activePadding+l,b+t.activePadding-d),m.closePath(),m.stroke(),i+=n,r+=n}m.fillStyle="white",m.globalCompositeOperation="destination-out",m.beginPath(),m.arc(b+t.activePadding,b+t.activePadding,e+t.spotlightPadding,0,2*Math.PI,!0),m.closePath(),m.fill(),m.globalCompositeOperation="source-over"}.apply(null,C.drawBg),C.drawCommands&&function(e,n,i){var r=2*Math.PI/v.length,o=Math.PI/2,a=o+r;o+=r*_,a+=r*_,m.fillStyle=t.activeFillColor,m.strokeStyle="black",m.lineWidth=1,m.beginPath(),m.moveTo(b+t.activePadding,b+t.activePadding),m.arc(b+t.activePadding,b+t.activePadding,b+t.activePadding,2*Math.PI-o,2*Math.PI-a,!0),m.closePath(),m.fill(),m.fillStyle="white",m.globalCompositeOperation="destination-out";var s=b+t.activePadding+e/b*(O+t.spotlightPadding-t.indicatorSize/4),l=b+t.activePadding+n/b*(O+t.spotlightPadding-t.indicatorSize/4),d=Math.PI/4-i;m.translate(s,l),m.rotate(d),m.beginPath(),m.fillRect(-t.indicatorSize/2,-t.indicatorSize/2,t.indicatorSize,t.indicatorSize),m.closePath(),m.fill(),m.rotate(-d),m.translate(-s,-l),m.beginPath(),m.arc(b+t.activePadding,b+t.activePadding,O+t.spotlightPadding,0,2*Math.PI,!0),m.closePath(),m.fill(),m.globalCompositeOperation="source-over"}.apply(null,C.drawCommands),C={},E&&S(e)}();var L,M,P,T,A,q,H,I,R=void 0,N=void 0,O=void 0,z={on:function(e,t,i){var r=i;return"core"===t&&(r=function(e){if(e.cyTarget===n||e.target===n)return i.apply(this,[e])}),h.handlers.push({events:e,selector:t,fn:r}),"core"===t?n.on(e,r):n.on(e,t,r),this}};function F(){E=!1,function(){for(var e=h.handlers,t=0;t<e.length;t++){var i=e[t];"core"===i.selector?n.off(i.events,i.fn):n.off(i.events,i.selector,i.fn)}window.removeEventListener("resize",k)}(),f.remove()}return L=void 0,M=!1,P=void 0,T=void 0,A=void 0,q=void 0,H=void 0,I=function(){L&&u.grabify(),T&&n.userZoomingEnabled(!0),A&&n.userPanningEnabled(!0),q&&n.boxSelectionEnabled(!0)},window.addEventListener("resize",k),z.on("resize",function(){k()}).on(t.openMenuEvents,t.selector,function(e){u=this;var i=this===n;if(M&&(p.style.display="none",M=!1,I()),(v="function"==typeof t.commands?t.commands(u):t.commands)&&0!==v.length){T=n.userZoomingEnabled(),n.userZoomingEnabled(!1),A=n.userPanningEnabled(),n.userPanningEnabled(!1),q=n.boxSelectionEnabled(),n.boxSelectionEnabled(!1),(L=u.grabbable&&u.grabbable())&&u.ungrabify();var r=void 0,d=void 0,h=void 0;i||!this.isNode()||this.isParent()||t.atMouse?(r=e.renderedPosition||e.cyRenderedPosition,d=1,h=1):(r=this.renderedPosition(),d=this.renderedWidth(),h=this.renderedHeight()),x=c(o),R=r.x,N=r.y,function(){a(".cxtmenu-item",p);for(var e=2*Math.PI/v.length,n=Math.PI/2,i=n+e,r=0;r<v.length;r++){var o=v[r],d=(n+i)/2,c=.66*b*Math.cos(d),u=.66*b*Math.sin(d),h=l({class:"cxtmenu-item"});s(h,{color:t.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+t.itemTextShadowColor+", 1px -1px 2px "+t.itemTextShadowColor+", -1px 1px 2px "+t.itemTextShadowColor+", 1px 1px 1px "+t.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*b+"px",width:.66*b+"px",height:.66*b+"px",marginLeft:c-.33*b+"px",marginTop:-u-.33*b+"px"});var f=l({class:"cxtmenu-content"});o.content instanceof HTMLElement?f.appendChild(o.content):f.innerHTML=o.content,s(f,{width:.66*b+"px",height:.66*b+"px","vertical-align":"middle",display:"table-cell"}),s(f,o.contentStyle||{}),!0!==o.disabled&&!1!==o.enabled||f.classList.add("cxtmenu-disabled"),p.appendChild(h),h.appendChild(f),n+=e,i+=e}}(),s(p,{display:"block",left:r.x-b+"px",top:r.y-b+"px"}),O=Math.max(d,h)/2,O=Math.max(O,t.minSpotlightRadius),O=Math.min(O,t.maxSpotlightRadius),w(),_=void 0,M=!0,H=e}}).on("cxtdrag tapdrag",t.selector,P=function(e){if(M){var n=e.originalEvent,i=n.touches&&n.touches.length>0,r=i?n.touches[0].pageX:n.pageX,o=i?n.touches[0].pageY:n.pageY;_=void 0;var a=r-x.left-R,s=o-x.top-N;0===a&&(a=.01);var l=Math.sqrt(a*a+s*s),d=(s*s-l*l-a*a)/(-2*l*a),c=Math.acos(d);if(l<O+t.spotlightPadding)w();else{w();var u=a*b/l,h=s*b/l;s>0&&(c=Math.PI+Math.abs(c-Math.PI));for(var f=2*Math.PI/v.length,p=Math.PI/2,g=p+f,m=0;m<v.length;m++){var y=v[m],k=p<=c&&c<=g||p<=c+2*Math.PI&&c+2*Math.PI<=g;if(y.disabled&&(k=!1),k){_=m;break}p+=f,g+=f}!function(e,t,n){C.drawCommands=[e,t,n]}(u,h,c)}}}).on("tapdrag",P).on("cxttapend tapend",function(){if(p.style.display="none",void 0!==_){var e=v[_].select;e&&(e.apply(u,[u,H]),_=void 0)}M=!1,I()}),{destroy:function(){F()}}}},function(e,t,n){"use strict";e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach(function(t){Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}},function(e,t,n){"use strict";e.exports={menuRadius:100,selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1}},function(e,t,n){"use strict";var i=function(e,t){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++)e.style[n[i]]=t[n[i]]};e.exports={removeEles:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e).forEach(function(e){return e.parentNode.removeChild(e)})},setStyles:i,createElement:function(e){e=e||{};var t=document.createElement(e.tag||"div");return t.className=e.class||"",e.style&&i(t,e.style),t},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(e){var t=e.getBoundingClientRect();return{left:t.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:t.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(e,t,n){"use strict";var i=n(0),r=function(e){e&&e("core","cxtmenu",i)};"undefined"!=typeof cytoscape&&r(cytoscape),e.exports=r}])}),window.PainlessLink=function(){var e;return e=0,class{constructor(e,t,n,i,r=null,o=null,a){this.create_edge=this.create_edge.bind(this),this.reverse=this.reverse.bind(this),this.add_datatype=this.add_datatype.bind(this),this.create_node=this.create_node.bind(this),this.delete=this.delete.bind(this),this.create_link=this.create_link.bind(this),this.create_concept=this.create_concept.bind(this),this.cy=t,this.context=e,console.log(this.context),this.link_name=n,this.link_type=i,this.node_var1=r,this.node_var2=o,this.edge_source=null,this.edge_target=null,this.datatype=a,this.datatype_node=null,"concept"===i?this.create_concept():this.create_link()}find_new_name(e=null){var t;for(null===e&&(e="x"),t=0;0!==this.cy.getElementById(e+t).length;)t+=1;return e+t}create_edge(e,t,n=null){return this.cy.add({group:"edges",data:{source:e.id(),target:t.id()},classes:n})}reverse(){return this.source===this.node_var1?(this.edge_source.classes("target-edge"),this.edge_target.classes("source-edge"),this.source=this.node_var2,this.target=this.node_var1):(this.edge_source.classes("source-edge"),this.edge_target.classes("target-edge"),this.source=this.node_var1,this.target=this.node_var2)}add_datatype(e,t){return this.datatype_node=this.cy.add({group:"nodes",data:{label:t},classes:"node-datatype"}),this.edge_datatype=this.cy.add({group:"edges",data:{source:e.id(),target:this.datatype_node.id(),weight:99},classes:"edge-datatype"})}create_node(t,n=null){var i;return i={},"node-variable"===t&&(n=this.find_new_name(n),i.id=n,i.color="#"+palette[e%palette.length],e+=1),i.label="node-concept"===t?this.link_name:"node-attribute"===t||"node-role"===t?n:"?"+n,i.links=[this],this.cy.add({group:"nodes",data:i,classes:t})}delete(){var e,t,n,i,r,o,a,s;for(t=this.context.links.indexOf(this),this.context.links.splice(t,1),this.context.sparql_text.update(),null!==this.node_link&&void 0!==this.node_link&&this.cy.remove(this.node_link),null!==this.node_concept&&void 0!==this.node_concept&&this.cy.remove(this.node_concept),null!==this.datatype_node&&void 0!==this.datatype_node&&this.cy.remove(this.datatype_node),n=0,r=(a=[this.node_var1,this.node_var2]).length;n<r;n++)if(null!==(o=a[n])&&void 0!==o&&(t=o.data("links").indexOf(this),o.data("links").splice(t,1),0===o.data("links").length)){for(console.log(this.context.sparql_text.select_boxes),e=i=0,s=this.context.sparql_text.select_boxes.length;0<=s?i<s:i>s;e=0<=s?++i:--i)this.context.sparql_text.select_boxes[e]===o.id()&&this.context.sparql_text.select_boxes.splice(e,1);this.cy.remove(o)}return this.context.sparql_text.update()}create_link(){if(null===this.node_var1||void 0===this.node_var1)this.node_var1=this.create_node("node-variable"),this.node_var1.classes("node-variable node-variable-full-options");else{if(this.node_var1.hasClass("attr-range"))return void console.warn("properties can't be added to the range of an attribute");this.node_var1.data("links").push(this)}return null===this.node_var2||void 0===this.node_var2?"attribute"===this.link_type?(this.node_var2=this.create_node("node-variable",this.link_name),this.node_var2.classes("node-variable attr-range"),null!==this.datatype&&void 0!==this.datatype&&this.add_datatype(this.node_var2,this.datatype)):(this.node_var2=this.create_node("node-variable"),this.node_var2.classes("node-variable node-variable-full-options")):this.node_var2.data("links").push(this),this.source=this.node_var1,this.target=this.node_var2,"role"===this.link_type?this.node_link=this.create_node("node-role",this.link_name):this.node_link=this.create_node("node-attribute",this.link_name),this.edge_source=this.create_edge(this.node_link,this.source,"source-edge"),this.edge_target=this.create_edge(this.node_link,this.target,"target-edge")}create_concept(){return null===this.node_var1&&(this.node_var1=this.create_node("node-variable"),this.node_var1.classes("node-variable node-variable-full-options")),this.node_concept=this.create_node("node-concept"),this.create_edge(this.node_var1,this.node_concept,"edge-concept")}}}.call(this),function(e){function t(e,i){if(e=e||"",i=i||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,i);var r=n(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=H(100*this._a)/100,this._format=i.format||r.format,this._gradientType=i.gradientType,this._r<1&&(this._r=H(this._r)),this._g<1&&(this._g=H(this._g)),this._b<1&&(this._b=H(this._b)),this._ok=r.ok,this._tc_id=q++}function n(e){var t={r:0,g:0,b:0},n=1,i=null,r=null,a=null,s=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(T,"").replace(A,"").toLowerCase();var t,n=!1;if(O[e])e=O[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=F.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=F.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=F.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=F.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=F.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=F.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=F.hex8.exec(e))?{r:E(t[1]),g:E(t[2]),b:E(t[3]),a:M(t[4]),format:n?"name":"hex8"}:(t=F.hex6.exec(e))?{r:E(t[1]),g:E(t[2]),b:E(t[3]),format:n?"name":"hex"}:(t=F.hex4.exec(e))?{r:E(t[1]+""+t[1]),g:E(t[2]+""+t[2]),b:E(t[3]+""+t[3]),a:M(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=F.hex3.exec(e))&&{r:E(t[1]+""+t[1]),g:E(t[2]+""+t[2]),b:E(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==typeof e&&(P(e.r)&&P(e.g)&&P(e.b)?(t=function(e,t,n){return{r:255*w(e,255),g:255*w(t,255),b:255*w(n,255)}}(e.r,e.g,e.b),s=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):P(e.h)&&P(e.s)&&P(e.v)?(i=S(e.s),r=S(e.v),t=o(e.h,i,r),s=!0,l="hsv"):P(e.h)&&P(e.s)&&P(e.l)&&(i=S(e.s),a=S(e.l),t=function(e,t,n){function i(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}var r,o,a;if(e=w(e,360),t=w(t,100),n=w(n,100),0===t)r=o=a=n;else{var s=.5>n?n*(1+t):n+t-n*t,l=2*n-s;r=i(l,s,e+1/3),o=i(l,s,e),a=i(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*a}}(e.h,i,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=x(n),{ok:s,format:e.format||l,r:I(255,R(t.r,0)),g:I(255,R(t.g,0)),b:I(255,R(t.b,0)),a:n}}function i(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var i,r,o=R(e,t,n),a=I(e,t,n),s=(o+a)/2;if(o==a)i=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,l:s}}function r(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var i,r,o=R(e,t,n),a=I(e,t,n),s=o,l=o-a;if(r=0===o?0:l/o,o==a)i=0;else{switch(o){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,v:s}}function o(t,n,i){t=6*w(t,360),n=w(n,100),i=w(i,100);var r=e.floor(t),o=t-r,a=i*(1-n),s=i*(1-o*n),l=i*(1-(1-o)*n),d=r%6;return{r:255*[i,s,a,a,l,i][d],g:255*[l,i,i,s,a,a][d],b:255*[a,a,l,i,i,s][d]}}function a(e,t,n,i){var r=[C(H(e).toString(16)),C(H(t).toString(16)),C(H(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(e,t,n,i){return[C(L(i)),C(H(e).toString(16)),C(H(t).toString(16)),C(H(n).toString(16))].join("")}function l(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s-=n/100,i.s=k(i.s),t(i)}function d(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s+=n/100,i.s=k(i.s),t(i)}function c(e){return t(e).desaturate(100)}function u(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l+=n/100,i.l=k(i.l),t(i)}function h(e,n){n=0===n?0:n||10;var i=t(e).toRgb();return i.r=R(0,I(255,i.r-H(-n/100*255))),i.g=R(0,I(255,i.g-H(-n/100*255))),i.b=R(0,I(255,i.b-H(-n/100*255))),t(i)}function f(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l-=n/100,i.l=k(i.l),t(i)}function p(e,n){var i=t(e).toHsl(),r=(i.h+n)%360;return i.h=0>r?360+r:r,t(i)}function g(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)}function v(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+120)%360,s:n.s,l:n.l}),t({h:(i+240)%360,s:n.s,l:n.l})]}function m(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+90)%360,s:n.s,l:n.l}),t({h:(i+180)%360,s:n.s,l:n.l}),t({h:(i+270)%360,s:n.s,l:n.l})]}function b(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+72)%360,s:n.s,l:n.l}),t({h:(i+216)%360,s:n.s,l:n.l})]}function y(e,n,i){n=n||6,i=i||30;var r=t(e).toHsl(),o=360/i,a=[t(e)];for(r.h=(r.h-(o*n>>1)+720)%360;--n;)r.h=(r.h+o)%360,a.push(t(r));return a}function _(e,n){n=n||6;for(var i=t(e).toHsv(),r=i.h,o=i.s,a=i.v,s=[],l=1/n;n--;)s.push(t({h:r,s:o,v:a})),a=(a+l)%1;return s}function x(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function w(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=I(n,R(0,parseFloat(t))),i&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function k(e){return I(1,R(0,e))}function E(e){return parseInt(e,16)}function C(e){return 1==e.length?"0"+e:""+e}function S(e){return 1>=e&&(e=100*e+"%"),e}function L(t){return e.round(255*parseFloat(t)).toString(16)}function M(e){return E(e)/255}function P(e){return!!F.CSS_UNIT.exec(e)}var T=/^\s+/,A=/\s+$/,q=0,H=e.round,I=e.min,R=e.max,N=e.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,i,r=this.toRgb();return t=r.r/255,n=r.g/255,i=r.b/255,.2126*(.03928>=t?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(.03928>=n?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(.03928>=i?i/12.92:e.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=x(e),this._roundA=H(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=H(360*e.h),n=H(100*e.s),i=H(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=H(360*e.h),n=H(100*e.s),r=H(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,r){var o=[C(H(e).toString(16)),C(H(t).toString(16)),C(H(n).toString(16)),C(L(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*w(this._r,255))+"%",g:H(100*w(this._g,255))+"%",b:H(100*w(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*w(this._r,255))+"%, "+H(100*w(this._g,255))+"%, "+H(100*w(this._b,255))+"%)":"rgba("+H(100*w(this._r,255))+"%, "+H(100*w(this._g,255))+"%, "+H(100*w(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(z[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var n="#"+s(this._r,this._g,this._b,this._a),i=n,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=t(e);i="#"+s(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+n+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(m,arguments)}},t.fromRatio=function(e,n){if("object"==typeof e){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]="a"===r?e[r]:S(e[r]));e=i}return t(e,n)},t.equals=function(e,n){return!(!e||!n)&&t(e).toRgbString()==t(n).toRgbString()},t.random=function(){return t.fromRatio({r:N(),g:N(),b:N()})},t.mix=function(e,n,i){i=0===i?0:i||50;var r=t(e).toRgb(),o=t(n).toRgb(),a=i/100;return t({r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a})},t.readability=function(n,i){var r=t(n),o=t(i);return(e.max(r.getLuminance(),o.getLuminance())+.05)/(e.min(r.getLuminance(),o.getLuminance())+.05)},t.isReadable=function(e,n,i){var r,o,a=t.readability(e,n);switch(o=!1,(r=function(e){var t,n;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(i)).level+r.size){case"AAsmall":case"AAAlarge":o=a>=4.5;break;case"AAlarge":o=a>=3;break;case"AAAsmall":o=a>=7}return o},t.mostReadable=function(e,n,i){var r,o,a,s,l=null,d=0;o=(i=i||{}).includeFallbackColors,a=i.level,s=i.size;for(var c=0;c<n.length;c++)(r=t.readability(e,n[c]))>d&&(d=r,l=t(n[c]));return t.isReadable(e,l,{level:a,size:s})||!o?l:(i.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],i))};var O=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=t.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(O),F=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.tinycolor=t}(Math),window.PainlessMenu=class{constructor(e){this.change_size=this.change_size.bind(this),this.create_navigation_div=this.create_navigation_div.bind(this),this.init=this.init.bind(this),this.context=e,this.init()}change_size(e){return this.context.query_canvas.style.height=e+"%",sparql_textbox.style.height=80-e+"%",setTimeout(()=>this.context.graph.cy.resize(),550)}create_div(e=null,t=null,n=null,i=null){var r;return(r=document.createElement("div")).innerHTML=e,r.className=t,r.id=n,r.onclick=i,r}create_navigation_div(){var e;return(e=this.create_div(null,null,"nav_div")).append(this.create_div("▲","resize_button",null,()=>this.change_size(80))),e.append(this.create_div("≡","resize_button",null,()=>this.change_size(50))),e.append(this.create_div("▼","resize_button",null,()=>this.change_size(0))),e}init(){var e;return e=this.create_div(null,null,"painless_menu"),document.getElementById("sidenav").append(e),e.append(this.create_navigation_div()),e.append(this.create_div("undo","menu_button",null,()=>this.context.graph.undo())),e.append(this.create_div("center view","menu_button",null,()=>this.context.graph.center_view())),e.append(this.create_div("copy to clipboard","menu_button",null,()=>this.context.graph.copy_to_clipboard())),e.append(this.create_div("filter","menu_button",null,()=>this.context.graph.sparql_text.add_filter(this.context.graph.cy.nodes(":selected").id())))}},window.PainlessSparql=function(){class e{constructor(e){this.add_to_query=this.add_to_query.bind(this),this.extract_datatype=this.extract_datatype.bind(this),this.create_sidenav=this.create_sidenav.bind(this),this.onkeypress_handler=this.onkeypress_handler.bind(this),this.graph=e,this.cy=e.cy,this.init()}init(){return this.create_sidenav(),this.sparql_text=this.graph.sparql_text,this.menu=new window.PainlessMenu(this)}add_to_query(){var e;switch(0===(e=this.cy.nodes(":selected")).length&&console.warn("please, select a node in the main graph"),e.data("type")){case"role":return this.graph.add_link(e.data("label"),"role");case"attribute":return this.graph.add_link(e.data("label"),"attribute",this.extract_datatype(e));case"concept":return this.graph.add_link(e.data("label"),"concept")}}extract_datatype(e){var t,n,i,r,o,a,s,l;for(t=0,i=(s=e.neighborhood("node")).length;t<i;t++)if("range-restriction"===(o=s[t]).data("type"))for(n=0,r=(l=o.neighborhood("node")).length;n<r;n++)if("value-domain"===(a=l[n]).data("type"))return a.data("label")}create_sidenav(){var e,t,n,i,r,o;return(n=document.createElement("div")).id="sidenav_container",document.body.appendChild(n),(t=document.createElement("div")).id="sidenav",t.className="sidenav",n.appendChild(t),(e=document.createElement("button")).innerHTML="add to \n\r query",e.id="add_to_query_button",e.onclick=(()=>this.add_to_query()),t.appendChild(e),(o=document.createElement("div")).id="sparql_textbox",o.innerHTML="sparql_query_here",t.appendChild(o),this.query_canvas=document.createElement("div"),this.query_canvas.id="query_canvas",t.appendChild(this.query_canvas),this.graph=new PainlessGraph(this.query_canvas),(i=document.createElement("div")).className="slidecontainer",(r=document.createElement("input")).type="range",r.min=1,r.max=100,r.value=48,r.step=.5,r.className="slider",i.appendChild(r),r.oninput=function(e){return console.log(this.getBoundingClientRect()),t.style.width=document.documentElement.clientWidth*(100-this.value)/100+"px",setTimeout(()=>this.graph.cy.resize(),550)},document.body.appendChild(i)}open_nav(){return document.getElementById("sidenav").style.width="50%"}close_nav(){return document.getElementById("sidenav").style.width="0px"}onkeypress_handler(e){if("a"===e.key);else if("b"===e.key);else if("d"===e.key)return console.log(this.cy.nodes(":selected").data("type"))}add_event_listener(){return document.onkeypress=this.onkeypress_handler}}return e.graph=null,e}.call(this),window.QueryFilter=class{constructor(e){this.new_condition=this.new_condition.bind(this),this.to_html=this.to_html.bind(this),this.node_id=e,this.conditions=[]}new_condition(){var e,t,n,i,r;return e=document.createElement("div"),"undefined"!==this.node_id?((t=document.createElement("div")).innerHTML=this.node_id,e.appendChild(t)):(i=new window.Void,e.appendChild(i)),(n=document.createElement("div")).innerHTML=">=",e.appendChild(n),(r=document.createElement("div")).innerHTML="100 ^^xsd:string",e.appendChild(r),e}to_html(){var e,t,n,i,r,o,a;for(o=document.createElement("div"),(a=document.createElement("div")).innerHTML="filter ",a.style.display="inline",o.append(a),this.conditions.push(this.new_condition()),(t=document.createElement("div")).className="filter_condition_container",n=0,i=(r=this.conditions).length;n<i;n++)e=r[n],t.appendChild(e);return o.append(t),o}},window.QueryLine=class{constructor(e,t){this.to_html=this.to_html.bind(this),this.create_highlighting_box=this.create_highlighting_box.bind(this),this.link=e,this.sparql_text=t}to_html(){var e,t,n,i,r,o;return i=document.createElement("div"),"concept"===this.link.link_type?(i.append(this.create_highlighting_box(this.link.node_var1)),(t=document.createElement("div")).innerHTML="&nbsp;rdf:type "+this.link.node_concept.data("label")+" .",i.append(t),i.append(document.createElement("br"))):(i.append(this.create_highlighting_box(this.link.source)),(n=document.createElement("div")).innerHTML=this.link.node_link.data("label")+"&nbsp;",i.append(n),i.append(this.create_highlighting_box(this.link.target)),(t=document.createElement("div")).innerHTML=" .",i.append(t)),(e=document.createElement("div")).style.visibility="hidden",(o=document.createElement("div")).innerHTML="🔄",o.style.color="#ADD8E6",o.style.fontSize="large",o.style.marginLeft="8px",o.style.display="inline-block",o.onclick=(()=>(this.link.reverse(),this.sparql_text.update())),e.append(o),(r=document.createElement("div")).innerHTML="❎",r.style.color="#F08080",r.style.fontSize="large",r.style.marginLeft="8px",r.style.display="inline-block",r.onclick=(()=>(this.link.delete(),this.sparql_text.update())),e.append(r),i.append(e),i.onmouseover=(()=>e.style.visibility="visible"),i.onmouseout=(()=>e.style.visibility="hidden"),i.className="q_line",i}create_highlighting_box(e){var t,n;return(t=document.createElement("div")).className="highlighting_box_container",(n=document.createElement("div")).className="highlighting_box",n.id=e.id()+Math.round(1e3*Math.random()),n.dataset.prevname=e.id(),n.dataset.node_id=e.id(),n.setAttribute("draggable",!0),n.setAttribute("contenteditable","true"),n.addEventListener("dragstart",function(e){return e.dataTransfer.setData("text",e.target.id)}),n.onkeyup=(()=>this.rename(n)),n.onmouseover=function(t){return e.addClass("highlight")},n.onmouseout=function(t){return e.removeClass("highlight")},n.onclick=(t=>(this.cy.nodes().unselect(),e.select())),n.innerHTML=e.data("label"),n.style.backgroundColor=e.data("color"),t.append(n),t}},window.SparqlText=function(){var e,t;return t=[],e=null,null,null,class{constructor(n,i){this.create_highlighting_box=this.create_highlighting_box.bind(this),this.remove_from_select_boxes=this.remove_from_select_boxes.bind(this),this.generate_plaintext_query=this.generate_plaintext_query.bind(this),this.copy_to_clipboard=this.copy_to_clipboard.bind(this),this.add_filter=this.add_filter.bind(this),this.update=this.update.bind(this),(e=document.getElementById("sparql_textbox")).className="unselectable",this.select_boxes=t,this.cy=n,this.links=i,this.filters=[]}add_to_select(e){return t.push(e),this.update()}create_tab(){var e;return(e=document.createElement("div")).innerHTML="&nbsp;",e}rename(e){var n,i,r,o;for(r=this.cy.getElementById(e.dataset.node_id),n=i=0,o=t.length;0<=o?i<o:i>o;n=0<=o?++i:--i)t[n]===e.dataset.prevname&&(t[n]=e.innerHTML.substr(n));return r.data("label",e.innerHTML.substr(1)),console.log(e.innerHTML)}create_highlighting_box(e){var t,n,i;return(t=document.createElement("div")).className="highlighting_box_container",(i=document.createElement("div")).className="highlighting_box",i.id=e.id()+Math.round(1e3*Math.random()),i.dataset.prevname=e.id(),i.dataset.node_id=e.id(),i.setAttribute("draggable",!0),i.setAttribute("contenteditable","true"),i.addEventListener("dragstart",function(e){return e.dataTransfer.setData("text",e.target.id)}),i.onkeyup=(()=>this.rename(i)),i.onmouseover=function(t){return e.addClass("highlight")},i.onmouseout=function(t){return e.removeClass("highlight")},i.onclick=(t=>(this.cy.nodes().unselect(),e.select())),i.innerHTML=e.data("label"),i.style.backgroundColor=e.data("color"),t.append(i),(n=document.createElement("div")).innerHTML=" x ",n.className="minicross",n.dataset.linkedhbox=i.id,n.dataset.node_id=i.dataset.node_id,n.style.visibility="hidden",n.onclick=(e=>this.remove_from_select_boxes(n.dataset.node_id)),t.append(n),t.onmouseover=function(e){return n.style.visibility="visible"},t.onmouseout=function(e){return n.style.visibility="hidden"},t}remove_from_select_boxes(e){return t=t.filter(function(t){return t!==e}),this.update()}generate_plaintext_query(){var e,n,i,r,o,a,s,l,d,c;if(c="Select ",0===t.length)c+="*";else for(n=0,o=t.length;n<o;n++)c+="?"+t[n]+" ";for(c+="\r\nwhere {",i=0,a=(l=document.getElementsByClassName("q_line")).length;i<a;i++)for(c+="\r\n",e=0,r=0,s=(d=l[i].getElementsByClassName("highlighting_box")).length;r<s;r++)c+=d[r].innerHTML+" ",(e+=1)%3==0&&(c+=" .\r\n");return c+="}",console.log(c),c}copy_to_clipboard(){var e;return(e=document.createElement("textarea")).value=this.generate_plaintext_query(),e.id="tmp_div",document.body.appendChild(e),document.getElementById("tmp_div").select(),document.execCommand("Copy"),e.style.display="none",document.body.removeChild(e)}add_filter(e){return this.filters.push(new window.QueryFilter(e)),this.update()}update(){var n,i,r,o,a,s,l,d,c,u,h,f,p,g,v,m,b;if(e.innerHTML="",(o=document.createElement("div")).className="init_string",(v=document.createElement("div")).className="s_line",0===t.length)v.innerHTML="&nbsp;*";else for(v.append(this.create_tab()),a=0,d=t.length;a<d;a++)n=t[a],v.append(this.create_highlighting_box(this.cy.getElementById(n)));for((m=document.createElement("div")).innerHTML="Select ",o.append(m),o.append(v),o.append(document.createElement("br")),(b=document.createElement("div")).innerHTML=" where {",o.append(b),e.append(o),s=0,c=(p=this.links).length;s<c;s++)h=p[s],f=new window.QueryLine(h,this),e.append(f.to_html());for(l=0,u=(g=this.filters).length;l<u;l++)r=g[l],e.append(r.to_html());return(i=document.createElement("div")).innerHTML="}",e.append(i),dragula([v])}}}.call(this),window.Void=class{constructor(){this.to_html=this.to_html.bind(this),this.div=document.createElement("div"),this.div.innerHTML="&nbsp;void"}to_html(){return this.div}};